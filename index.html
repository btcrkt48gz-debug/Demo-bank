<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <title>LEADCU BANK</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f0f4f8;
      min-height: 100vh;
      padding-bottom: 80px;
    }

    /* Page Views */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* Header Section */
    .header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 50%, #2d8fd4 100%);
      color: white;
      padding: 16px 20px 140px;
      position: relative;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-text {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      background: #dc2626;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-icon svg {
      width: 20px;
      height: 20px;
      fill: white;
    }

    .header-icons {
      display: flex;
      gap: 20px;
    }

    .header-icon {
      width: 26px;
      height: 26px;
      cursor: pointer;
      opacity: 0.95;
      transition: opacity 0.2s;
    }

    .header-icon:hover {
      opacity: 1;
    }

    .greeting {
      margin-bottom: 12px;
    }

    .greeting-text {
      font-size: 28px;
      font-weight: 400;
    }

    .greeting-name {
      font-weight: 700;
    }

    .date-time {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 15px;
      opacity: 0.92;
      margin-bottom: 24px;
    }

    .date-icon {
      width: 18px;
      height: 18px;
    }

    .quick-actions-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.85;
      margin-bottom: 16px;
    }

    /* Quick Actions Card */
    .quick-actions-card {
      background: white;
      margin: 0 16px;
      border-radius: 16px;
      padding: 20px 16px 12px;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -50px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
      z-index: 20;
      transition: bottom 0.3s ease;
    }

    .quick-actions-card.expanded {
      bottom: -140px;
    }

    .quick-actions {
      display: flex;
      justify-content: space-around;
    }

    .quick-actions-extra {
      display: none;
      justify-content: space-around;
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
    }

    .quick-actions-extra.show {
      display: flex;
    }

    .quick-action {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      flex: 1;
    }

    .quick-action-icon {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: 2px solid #e0e5ea;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      background: white;
    }

    .quick-action:hover .quick-action-icon {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .quick-action-icon svg {
      width: 22px;
      height: 22px;
    }

    .quick-action-icon.blue svg {
      stroke: #1a6bb3;
    }

    .quick-action-icon.purple svg {
      stroke: #1a6bb3;
      fill: none;
    }

    .quick-action-icon.gray svg {
      stroke: #1a6bb3;
    }

    .quick-action-text {
      font-size: 12px;
      color: #1f2937;
      text-align: center;
      line-height: 1.4;
      font-weight: 500;
    }

    .quick-action-subtext {
      color: #6b21a8;
      font-weight: 700;
    }

    .expand-arrow {
      display: flex;
      justify-content: center;
      margin-top: 12px;
    }

    .expand-arrow-btn {
      width: 36px;
      height: 20px;
      background: #1a6bb3;
      border-radius: 0 0 18px 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      transition: background 0.2s;
    }

    .expand-arrow-btn:hover {
      background: #155a96;
    }

    .expand-arrow-btn svg {
      width: 16px;
      height: 16px;
      color: white;
      transition: transform 0.3s;
    }

    .expand-arrow-btn.expanded svg {
      transform: rotate(180deg);
    }

    /* Main Content */
    .main-content {
      margin-top: 70px;
      padding: 0 16px;
      transition: margin-top 0.3s ease;
    }

    .main-content.expanded {
      margin-top: 160px;
    }

    /* Deposits Section */
    .section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 16px 0 12px;
      cursor: pointer;
    }

    .section-chevron {
      width: 18px;
      height: 18px;
      color: #6b7280;
      transition: transform 0.3s;
    }

    .section-chevron.expanded {
      transform: rotate(0deg);
    }

    .section-title {
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
    }

    /* Account Card */
    .account-card {
      background: white;
      border-radius: 12px;
      padding: 18px 16px;
      margin-bottom: 12px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      cursor: pointer;
      transition: all 0.2s;
    }

    .account-card:hover {
      border-color: #1a6bb3;
      box-shadow: 0 2px 8px rgba(26, 107, 179, 0.15);
    }

    .account-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .account-info {
      flex: 1;
    }

    .account-name {
      font-size: 17px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 6px;
    }

    .account-indicator {
      width: 32px;
      height: 4px;
      background: #1a6bb3;
      border-radius: 2px;
      margin-bottom: 8px;
    }

    .account-indicator.savings {
      background: #16a34a;
    }

    .account-number {
      font-size: 14px;
      color: #6b7280;
    }

    .account-balance-section {
      text-align: right;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }

    .account-balance-label {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .account-balance {
      font-size: 24px;
      font-weight: 600;
      color: #1a6bb3;
    }

    .account-menu {
      margin-left: 8px;
      cursor: pointer;
      padding: 4px;
      display: flex;
      align-items: center;
    }

    .account-menu svg {
      width: 20px;
      height: 20px;
      color: #9ca3af;
    }

    /* Account Details Page */
    .details-header {
      background: #f0f4f8;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .back-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #1a6bb3;
    }

    .back-btn svg {
      width: 28px;
      height: 28px;
    }

    .details-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .account-details-card {
      background: white;
      margin: 16px;
      border-radius: 16px;
      padding: 24px 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      text-align: center;
    }

    .details-account-name {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 4px;
    }

    .details-account-number {
      font-size: 14px;
      color: #1a6bb3;
      text-decoration: underline;
      margin-bottom: 16px;
    }

    .account-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 24px;
      margin-bottom: 16px;
    }

    .account-nav-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #1a6bb3;
    }

    .account-nav-btn svg {
      width: 24px;
      height: 24px;
    }

    .account-nav-indicator {
      width: 40px;
      height: 4px;
      background: #1a6bb3;
      border-radius: 2px;
    }

    .account-nav-indicator.savings {
      background: #16a34a;
    }

    .details-balance {
      font-size: 42px;
      font-weight: 600;
      color: #1a6bb3;
      margin-bottom: 4px;
    }

    .details-balance-label {
      font-size: 12px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .account-info-section {
      padding: 20px 16px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-size: 15px;
      color: #374151;
    }

    .info-value {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
    }

    .info-toggle {
      width: 48px;
      height: 28px;
      background: #d1d5db;
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
    }

    .info-toggle.active {
      background: #1a6bb3;
    }

    .info-toggle::after {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      top: 3px;
      left: 3px;
      transition: transform 0.2s;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .info-toggle.active::after {
      transform: translateX(20px);
    }

    .details-actions {
      background: white;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 16px;
      display: flex;
      justify-content: space-around;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .detail-action {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 8px 16px;
    }

    .detail-action-icon {
      width: 48px;
      height: 48px;
      border: 2px solid #1a6bb3;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .detail-action:hover .detail-action-icon {
      background: #f0f7ff;
    }

    .detail-action-icon svg {
      width: 24px;
      height: 24px;
      stroke: #1a6bb3;
    }

    .detail-action-text {
      font-size: 12px;
      color: #1a6bb3;
      font-weight: 600;
      text-align: center;
    }

    .transactions-section {
      background: linear-gradient(180deg, #1a6bb3 0%, #0d4a7c 100%);
      margin: 0 16px;
      border-radius: 12px 12px 0 0;
      padding: 20px 16px;
      color: white;
    }

    .transactions-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .transactions-title {
      font-size: 18px;
      font-weight: 600;
    }

    .transactions-filter {
      width: 24px;
      height: 24px;
      cursor: pointer;
    }

    .transactions-list {
      background: white;
      margin: 0 16px;
      border-radius: 0 0 12px 12px;
      padding: 8px 0;
      margin-bottom: 16px;
    }

    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid #f3f4f6;
    }

    .transaction-item:last-child {
      border-bottom: none;
    }

    .transaction-info {
      flex: 1;
    }

    .transaction-name {
      font-size: 15px;
      font-weight: 500;
      color: #111827;
      margin-bottom: 2px;
    }

    .transaction-date {
      font-size: 13px;
      color: #6b7280;
    }

    .transaction-amount {
      font-size: 16px;
      font-weight: 600;
    }

    .transaction-amount.positive {
      color: #16a34a;
    }

    .transaction-amount.negative {
      color: #111827;
    }

    /* Transfer Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 200;
      padding: 20px;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: white;
      border-radius: 16px;
      width: 100%;
      max-width: 400px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #6b7280;
    }

    .modal-close svg {
      width: 24px;
      height: 24px;
    }

    .modal-body {
      padding: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 8px;
    }

    .form-select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      color: #111827;
      background: white;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 20px;
    }

    .form-select:focus {
      outline: none;
      border-color: #1a6bb3;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      color: #111827;
    }

    .form-input:focus {
      outline: none;
      border-color: #1a6bb3;
    }

    .amount-input-wrapper {
      position: relative;
    }

    .amount-prefix {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 15px;
      color: #6b7280;
    }

    .amount-input {
      padding-left: 32px;
    }

    .account-balance-info {
      font-size: 13px;
      color: #6b7280;
      margin-top: 6px;
    }

    .transfer-btn {
      width: 100%;
      padding: 14px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .transfer-btn:hover {
      background: #155a96;
    }

    .transfer-btn:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    /* Success Message */
    .success-message {
      display: none;
      text-align: center;
      padding: 40px 20px;
    }

    .success-message.show {
      display: block;
    }

    .success-icon {
      width: 64px;
      height: 64px;
      background: #dcfce7;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
    }

    .success-icon svg {
      width: 32px;
      height: 32px;
      stroke: #16a34a;
    }

    .success-title {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .success-text {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 24px;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      display: flex;
      justify-content: space-around;
      padding: 10px 0 24px;
      border-top: 1px solid #e5e7eb;
      z-index: 100;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      padding: 4px 16px;
      transition: all 0.2s;
    }

    .nav-item svg {
      width: 24px;
      height: 24px;
      color: #6b7280;
    }

    .nav-item.active svg {
      color: #1a6bb3;
    }

    .nav-item span {
      font-size: 11px;
      color: #6b7280;
      font-weight: 500;
    }

    .nav-item.active span {
      color: #1a6bb3;
      font-weight: 600;
    }

    /* Loading State */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid #e5e7eb;
      border-top-color: #1a6bb3;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Hidden utility */
    .hidden {
      display: none !important;
    }

    /* Bottom Sheet */
    .bottom-sheet-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 250;
      transition: background 0.3s ease;
    }

    .bottom-sheet-overlay.show {
      display: block;
    }

    .bottom-sheet {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      border-radius: 24px 24px 0 0;
      padding: 8px 0 32px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
      z-index: 251;
      max-height: 80vh;
      overflow-y: auto;
    }

    .bottom-sheet-overlay.show .bottom-sheet {
      transform: translateY(0);
    }

    .bottom-sheet-handle {
      width: 40px;
      height: 4px;
      background: #d1d5db;
      border-radius: 2px;
      margin: 8px auto 16px;
    }

    .bottom-sheet-content {
      padding: 0 16px;
    }

    .sheet-action-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 18px 16px;
      cursor: pointer;
      border-radius: 12px;
      transition: background 0.2s;
    }

    .sheet-action-item:hover {
      background: #f3f4f6;
    }

    .sheet-action-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .sheet-action-icon svg {
      width: 24px;
      height: 24px;
      stroke: #1a6bb3;
      fill: none;
    }

    .sheet-action-text {
      font-size: 17px;
      font-weight: 500;
      color: #111827;
    }

    .sheet-divider {
      height: 1px;
      background: #e5e7eb;
      margin: 8px 16px;
    }

    .sheet-cancel-btn {
      display: block;
      width: calc(100% - 32px);
      margin: 16px auto 0;
      padding: 16px;
      background: transparent;
      border: none;
      font-size: 17px;
      font-weight: 500;
      color: #6b7280;
      text-align: center;
      cursor: pointer;
      border-radius: 12px;
      transition: background 0.2s;
    }

    .sheet-cancel-btn:hover {
      background: #f3f4f6;
    }

    /* Full Page Styles */
    .full-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 300;
      display: none;
      flex-direction: column;
      overflow-y: auto;
    }

    .full-page.show {
      display: flex;
    }

    .full-page-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .full-page-title {
      font-size: 18px;
      font-weight: 600;
    }

    .close-page-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      color: white;
    }

    .close-page-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Tabs */
    .tabs-container {
      display: flex;
      background: white;
      border-bottom: 1px solid #e5e7eb;
      overflow-x: auto;
    }

    .tab-btn {
      flex: 1;
      padding: 14px 16px;
      border: none;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      white-space: nowrap;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .tab-btn.active {
      color: #1a6bb3;
      border-bottom-color: #1a6bb3;
    }

    /* Currency Watchlist Card */
    .watchlist-card {
      background: white;
      margin: 16px;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .watchlist-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .watchlist-title {
      font-size: 14px;
      font-weight: 600;
      color: #374151;
    }

    .edit-btn {
      padding: 6px 16px;
      border: 1px solid #1a6bb3;
      background: transparent;
      color: #1a6bb3;
      font-size: 13px;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
    }

    .currency-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .currency-item:last-child {
      border-bottom: none;
    }

    .currency-name {
      font-size: 15px;
      font-weight: 500;
      color: #111827;
    }

    .currency-code {
      color: #6b7280;
      font-weight: 400;
    }

    .currency-rate {
      font-size: 14px;
      color: #374151;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 32px;
    }

    .empty-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: #e5e7eb;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .empty-icon svg {
      width: 40px;
      height: 40px;
      stroke: #9ca3af;
    }

    .empty-title {
      font-size: 16px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
    }

    .empty-text {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 24px;
    }

    .primary-action-btn {
      display: block;
      width: calc(100% - 32px);
      margin: 0 auto;
      padding: 14px 24px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .primary-action-btn:hover {
      background: #155a96;
    }

    /* Contact Form */
    .contact-form-page {
      background: #f0f4f8;
    }

    .form-container {
      padding: 20px 16px;
    }

    .form-section-title {
      font-size: 13px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    /* Manage Cards Page */
    .cards-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .cards-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .cards-logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .cards-logo-text {
      font-size: 16px;
      font-weight: 600;
    }

    .cards-page-title {
      font-size: 22px;
      font-weight: 600;
    }

    .cards-page-subtitle {
      font-size: 14px;
      opacity: 0.9;
      margin-top: 4px;
    }

    .cards-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cards-list {
      flex: 1;
      padding: 16px;
    }

    .saved-card {
      background: linear-gradient(135deg, #1a6bb3 0%, #0d4a7c 100%);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      color: white;
    }

    .saved-card-network {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      opacity: 0.9;
      margin-bottom: 12px;
    }

    .saved-card-number {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 2px;
      margin-bottom: 12px;
    }

    .saved-card-info {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .saved-card-name {
      text-transform: uppercase;
    }

    .saved-card-type {
      font-size: 11px;
      opacity: 0.8;
    }

    .selectable-card {
      background: white;
      border: 1px solid #e8ecf0;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: all 0.2s;
    }

    .selectable-card:hover {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .selectable-card-network {
      font-size: 12px;
      font-weight: 600;
      color: #1a6bb3;
    }

    .selectable-card-details {
      flex: 1;
      margin-left: 12px;
    }

    .selectable-card-type {
      font-size: 12px;
      color: #6b7280;
      text-transform: capitalize;
    }

    .selectable-card-number {
      font-size: 14px;
      font-weight: 500;
      color: #111827;
    }

    .card-item {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      cursor: pointer;
    }

    .card-item:hover {
      border-color: #1a6bb3;
    }

    .card-mini-preview {
      width: 60px;
      height: 38px;
      background: linear-gradient(135deg, #1a6bb3 0%, #0d4a7c 100%);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-mini-preview svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    .card-item-info {
      flex: 1;
    }

    .card-item-name {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
    }

    .card-item-number {
      font-size: 13px;
      color: #6b7280;
    }

    .card-item-type {
      font-size: 11px;
      padding: 2px 8px;
      background: #e5e7eb;
      border-radius: 4px;
      color: #374151;
      font-weight: 500;
    }

    .add-card-footer {
      padding: 16px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    .add-card-btn {
      width: 100%;
      padding: 14px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .add-card-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Add Card Page - Live Preview */
    .card-preview-section {
      padding: 24px 16px;
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
    }

    .live-card-preview {
      width: 100%;
      max-width: 340px;
      height: 200px;
      margin: 0 auto;
      border-radius: 16px;
      padding: 20px;
      position: relative;
      background: linear-gradient(135deg, #1e3a5f 0%, #0d4a7c 50%, #1a6bb3 100%);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card-preview-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .card-type-badge {
      padding: 4px 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .card-network-logo {
      width: 50px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }

    .card-network-logo svg {
      width: 50px;
      height: 32px;
    }

    .card-chip {
      width: 40px;
      height: 30px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 50%, #d4af37 100%);
      border-radius: 6px;
      margin: 16px 0;
    }

    .card-preview-number {
      font-size: 20px;
      font-weight: 500;
      color: white;
      letter-spacing: 2px;
      font-family: 'Courier New', monospace;
    }

    .card-preview-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .card-preview-name {
      font-size: 14px;
      font-weight: 500;
      color: white;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .card-preview-expiry {
      text-align: right;
    }

    .card-preview-expiry-label {
      font-size: 9px;
      color: rgba(255,255,255,0.7);
      text-transform: uppercase;
    }

    .card-preview-expiry-value {
      font-size: 14px;
      color: white;
      font-weight: 500;
    }

    /* Card Form */
    .card-form-section {
      padding: 20px 16px;
      background: white;
      flex: 1;
    }

    .toggle-group {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .toggle-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
    }

    .toggle-btn.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
      color: #1a6bb3;
    }

    /* Add Money Page */
    .amount-display {
      text-align: center;
      padding: 40px 20px;
      background: white;
    }

    .amount-value {
      font-size: 48px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .amount-label {
      font-size: 14px;
      color: #6b7280;
    }

    .numpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 16px;
      background: #f0f4f8;
    }

    .numpad-btn {
      padding: 20px;
      background: white;
      border: none;
      border-radius: 12px;
      font-size: 24px;
      font-weight: 500;
      color: #111827;
      cursor: pointer;
      transition: background 0.2s;
    }

    .numpad-btn:hover {
      background: #e5e7eb;
    }

    .numpad-btn.action {
      background: #1a6bb3;
      color: white;
    }

    .numpad-btn.delete {
      background: transparent;
    }

    .continue-btn-container {
      padding: 16px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    /* Error/Try Again Message */
    .error-message-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px;
      text-align: center;
    }

    .error-icon {
      width: 80px;
      height: 80px;
      background: #fef2f2;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
    }

    .error-icon svg {
      width: 40px;
      height: 40px;
      stroke: #dc2626;
    }

    .error-title {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .error-text {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 32px;
    }

    /* Responsive */
    @media (min-width: 640px) {
      .header {
        padding: 20px 32px 90px;
      }

      .quick-actions-card {
        margin: 0 32px;
      }

      .main-content {
        padding: 0 32px;
      }
    }

    /* Pay Bills Styles */
    .bills-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .bills-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .bill-type-card {
      background: #fff;
      border-radius: 16px;
      padding: 24px 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .bill-type-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    .bill-type-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bill-type-icon svg {
      width: 28px;
      height: 28px;
    }

    .bill-type-icon.electric,
    .bill-type-icon.water,
    .bill-type-icon.internet,
    .bill-type-icon.phone,
    .bill-type-icon.gas,
    .bill-type-icon.tv,
    .bill-type-icon.insurance,
    .bill-type-icon.other {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(0, 82, 147, 0.2);
      color: #005293;
    }

    .bill-type-name {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
      text-align: center;
    }

    .bill-payment-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .bill-type-header {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .bill-type-header-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bill-type-header-icon svg {
      width: 24px;
      height: 24px;
    }

    .bill-type-header-text {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
    }

    .bill-form-section {
      background: #fff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .bill-form-title {
      font-size: 16px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 20px;
    }

    /* Lead Transfer Styles */
    .lead-transfer-content {
      padding: 20px 16px;
      flex: 1;
    }

    .glowing-balance-card {
      background: linear-gradient(135deg, rgba(26, 107, 179, 0.15) 0%, rgba(13, 74, 124, 0.25) 100%);
      border: 1px solid rgba(26, 107, 179, 0.3);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(26, 107, 179, 0.2), 0 0 40px rgba(26, 107, 179, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
      animation: glow-pulse 2s ease-in-out infinite alternate;
    }

    @keyframes glow-pulse {
      0% {
        box-shadow: 0 0 20px rgba(26, 107, 179, 0.2), 0 0 40px rgba(26, 107, 179, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
      }
      100% {
        box-shadow: 0 0 30px rgba(26, 107, 179, 0.4), 0 0 60px rgba(26, 107, 179, 0.2), inset 0 0 30px rgba(255, 255, 255, 0.08);
      }
    }

    .glowing-balance-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.1) 50%, transparent 60%);
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%) rotate(45deg); }
      100% { transform: translateX(100%) rotate(45deg); }
    }

    .glowing-balance-label {
      font-size: 12px;
      font-weight: 600;
      color: #1a6bb3;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 4px;
      position: relative;
      z-index: 1;
    }

    .glowing-balance-account {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }

    .glowing-balance-amount {
      font-size: 32px;
      font-weight: 700;
      color: #1a6bb3;
      position: relative;
      z-index: 1;
    }

    .transfer-form-section {
      background: white;
      border-radius: 16px;
      padding: 24px 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .transfer-form-title {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 20px;
    }

    .transfer-submit-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 8px;
    }

    .transfer-submit-btn:hover {
      background: #155a96;
    }

    /* Confirmation Page */
    .confirmation-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px;
    }

    .confirmation-card {
      background: white;
      border-radius: 16px;
      padding: 32px 24px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      text-align: center;
      width: 100%;
      max-width: 400px;
    }

    .confirmation-icon {
      width: 64px;
      height: 64px;
      background: #fef3c7;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }

    .confirmation-icon svg {
      width: 32px;
      height: 32px;
      stroke: #d97706;
    }

    .confirmation-title {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .confirmation-subtitle {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 24px;
    }

    .confirmation-details {
      background: #f9fafb;
      border-radius: 12px;
      padding: 16px;
      text-align: left;
    }

    .confirmation-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .confirmation-row:last-child {
      border-bottom: none;
    }

    .confirmation-label {
      font-size: 14px;
      color: #6b7280;
    }

    .confirmation-value {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
    }

    .confirmation-value.amount {
      font-size: 18px;
      color: #1a6bb3;
    }

    .confirmation-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .cancel-btn {
      flex: 1;
      padding: 16px;
      background: transparent;
      color: #6b7280;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cancel-btn:hover {
      border-color: #d1d5db;
      background: #f9fafb;
    }

    .confirm-btn {
      flex: 1;
      padding: 16px;
      background: #16a34a;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .confirm-btn:hover {
      background: #15803d;
    }

    /* Receipt Page */
    .receipt-content {
      padding: 24px 16px;
      flex: 1;
    }

    .receipt-card {
      background: white;
      border-radius: 16px;
      padding: 32px 24px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      text-align: center;
    }

    .receipt-success-icon {
      width: 80px;
      height: 80px;
      background: #dcfce7;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }

    .receipt-success-icon svg {
      width: 40px;
      height: 40px;
      stroke: #16a34a;
    }

    .receipt-title {
      font-size: 24px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 8px;
    }

    .receipt-amount {
      font-size: 36px;
      font-weight: 700;
      color: #1a6bb3;
      margin-bottom: 8px;
    }

    .receipt-subtitle {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 24px;
    }

    .receipt-details {
      background: #f9fafb;
      border-radius: 12px;
      padding: 16px;
      text-align: left;
      margin-bottom: 24px;
    }

    .receipt-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .receipt-row:last-child {
      border-bottom: none;
    }

    .receipt-label {
      font-size: 13px;
      color: #6b7280;
    }

    .receipt-value {
      font-size: 13px;
      font-weight: 600;
      color: #111827;
    }

    .receipt-ref {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 24px;
    }

    .done-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .done-btn:hover {
      background: #155a96;
    }

    /* ========== CRYPTO PAGE STYLES ========== */
    .crypto-list-page {
      background: #f0f4f8;
    }

    .crypto-list-content {
      padding: 16px;
    }

    .crypto-list-item {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      cursor: pointer;
      transition: all 0.2s;
    }

    .crypto-list-item:hover {
      border-color: #f7931a;
      box-shadow: 0 2px 8px rgba(247, 147, 26, 0.15);
    }

    .crypto-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f7931a;
    }

    .crypto-icon svg {
      width: 28px;
      height: 28px;
      fill: white;
    }

    .crypto-info {
      flex: 1;
    }

    .crypto-name {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-symbol {
      font-size: 13px;
      color: #6b7280;
    }

    .crypto-price-info {
      text-align: right;
    }

    .crypto-price {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-change {
      font-size: 13px;
      color: #16a34a;
    }

    .crypto-change.negative {
      color: #dc2626;
    }

    /* BTC Detail Page */
    .crypto-detail-header {
      background: white;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .crypto-detail-title {
      flex: 1;
      text-align: center;
    }

    .crypto-detail-title h1 {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-detail-title span {
      font-size: 12px;
      color: #6b7280;
    }

    .crypto-detail-edit {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #6b7280;
    }

    .crypto-detail-edit svg {
      width: 20px;
      height: 20px;
    }

    .crypto-price-section {
      background: white;
      padding: 24px 20px;
      text-align: center;
    }

    .crypto-gas-fee {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #16a34a;
      margin-bottom: 16px;
    }

    .crypto-gas-fee svg {
      width: 14px;
      height: 14px;
    }

    .crypto-main-price {
      font-size: 42px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 8px;
    }

    .crypto-price-change {
      font-size: 15px;
      color: #16a34a;
    }

    .crypto-price-change.negative {
      color: #dc2626;
    }

    .crypto-chart-container {
      background: white;
      padding: 20px;
      height: 200px;
      position: relative;
    }

    .crypto-chart {
      width: 100%;
      height: 100%;
    }

    .chart-time-filters {
      display: flex;
      justify-content: space-around;
      background: white;
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .chart-time-btn {
      padding: 8px 16px;
      border: none;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .chart-time-btn.active {
      background: #f3f4f6;
      color: #111827;
    }

    .crypto-tabs {
      display: flex;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    .crypto-tab {
      flex: 1;
      padding: 14px 16px;
      border: none;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .crypto-tab.active {
      color: #111827;
      border-bottom-color: #111827;
    }

    .crypto-holdings-section {
      padding: 16px;
    }

    .crypto-holdings-title {
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .crypto-holdings-card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .crypto-holdings-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: #f7931a;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .crypto-holdings-icon svg {
      width: 28px;
      height: 28px;
      fill: white;
    }

    .crypto-holdings-info {
      flex: 1;
    }

    .crypto-holdings-name {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-holdings-amount {
      font-size: 13px;
      color: #6b7280;
    }

    .crypto-holdings-value {
      text-align: right;
    }

    .crypto-holdings-usd {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-holdings-pnl {
      font-size: 13px;
      color: #6b7280;
    }

    /* Crypto Action Bar */
    .crypto-action-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      display: flex;
      justify-content: center;
      gap: 24px;
      padding: 16px 24px 32px;
      border-top: 1px solid #e5e7eb;
      z-index: 100;
    }

    .crypto-action-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 8px 24px;
      border: none;
      background: transparent;
    }

    .crypto-action-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3f4f6;
      transition: all 0.2s;
    }

    .crypto-action-btn:hover .crypto-action-icon {
      background: #e5e7eb;
    }

    .crypto-action-icon svg {
      width: 24px;
      height: 24px;
      stroke: #111827;
    }

    .crypto-action-text {
      font-size: 12px;
      font-weight: 500;
      color: #374151;
    }

    .crypto-tab-content {
      display: none;
      padding-bottom: 100px;
    }

    .crypto-tab-content.active {
      display: block;
    }

    .crypto-history-empty,
    .crypto-about-content {
      padding: 40px 20px;
      text-align: center;
      color: #6b7280;
    }

    .crypto-about-content {
      text-align: left;
      padding: 20px;
    }

    .crypto-about-content h3 {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 12px;
    }

    .crypto-about-content p {
      font-size: 14px;
      line-height: 1.6;
      color: #6b7280;
      margin-bottom: 16px;
    }

    /* ========== CARD MANAGEMENT STYLES ========== */
    .manage-cards-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 20px;
    }

    .manage-cards-header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .manage-cards-logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .manage-cards-logo-icon {
      width: 28px;
      height: 28px;
      background: #dc2626;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .manage-cards-logo-icon svg {
      width: 16px;
      height: 16px;
      fill: white;
    }

    .manage-cards-logo-text {
      font-size: 14px;
      font-weight: 600;
    }

    .manage-cards-title {
      font-size: 24px;
      font-weight: 400;
      line-height: 1.3;
    }

    .manage-cards-title strong {
      font-weight: 700;
    }

    .manage-cards-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cards-empty-state {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 32px;
      text-align: center;
    }

    .cards-empty-icon {
      width: 80px;
      height: 50px;
      border: 3px solid #d1d5db;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
    }

    .cards-empty-icon-inner {
      width: 50px;
      height: 8px;
      background: #d1d5db;
      border-radius: 2px;
    }

    .cards-empty-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .cards-empty-text {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 32px;
    }

    .saved-cards-list {
      padding: 16px;
      flex: 1;
    }

    .saved-card-item {
      background: linear-gradient(135deg, #1e3a5f 0%, #0d4a7c 50%, #1a6bb3 100%);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      color: white;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .saved-card-item:hover {
      transform: scale(1.02);
    }

    .saved-card-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .saved-card-chip {
      width: 35px;
      height: 26px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 50%, #d4af37 100%);
      border-radius: 4px;
    }

    .saved-card-type-badge {
      padding: 3px 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .saved-card-number-display {
      font-size: 16px;
      letter-spacing: 2px;
      font-family: 'Courier New', monospace;
      margin-bottom: 16px;
    }

    .saved-card-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .saved-card-holder {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .saved-card-network-display {
      font-size: 14px;
      font-weight: 700;
      font-style: italic;
    }

    .add-card-footer-btn {
      margin: 16px;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .add-card-footer-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Add Card Form Page */
    .add-card-preview-section {
      padding: 24px 16px;
      background: linear-gradient(180deg, #4a5568 0%, #2d3748 100%);
    }

    .add-card-live-preview {
      width: 100%;
      max-width: 340px;
      height: 200px;
      margin: 0 auto;
      border-radius: 16px;
      padding: 20px;
      position: relative;
      background: linear-gradient(135deg, #1e3a5f 0%, #0d4a7c 50%, #1a6bb3 100%);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .add-card-preview-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .add-card-preview-chip {
      width: 40px;
      height: 30px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 50%, #d4af37 100%);
      border-radius: 6px;
    }

    .add-card-preview-type {
      padding: 4px 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      color: white;
      text-transform: uppercase;
    }

    .add-card-preview-number {
      font-size: 18px;
      font-weight: 500;
      color: white;
      letter-spacing: 3px;
      font-family: 'Courier New', monospace;
      text-align: center;
      margin: 16px 0;
    }

    .add-card-preview-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .add-card-preview-holder-section {
      flex: 1;
    }

    .add-card-preview-label {
      font-size: 8px;
      color: rgba(255,255,255,0.6);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 2px;
    }

    .add-card-preview-holder-name {
      font-size: 13px;
      font-weight: 500;
      color: white;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .add-card-preview-expiry-section {
      text-align: right;
    }

    .add-card-preview-expiry {
      font-size: 13px;
      color: white;
      font-weight: 500;
    }

    .add-card-preview-network {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      font-weight: 700;
      color: white;
      font-style: italic;
    }

    .add-card-form-section {
      padding: 20px 16px;
      background: white;
      flex: 1;
    }

    .card-form-row {
      display: flex;
      gap: 12px;
    }

    .card-form-row .form-group {
      flex: 1;
    }

    .card-type-toggle {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .card-type-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
    }

    .card-type-btn.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
      color: #1a6bb3;
    }

    .card-network-toggle {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .card-network-btn {
      flex: 1;
      padding: 12px 8px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .card-network-btn.visa {
      color: #1a1f71;
    }

    .card-network-btn.mastercard {
      color: #eb001b;
    }

    .card-network-btn.amex {
      color: #006fcf;
    }

    .card-network-btn.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .save-card-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
    }

    .save-card-btn:hover {
      background: #155a96;
    }

    /* Add Money Card Selection */
    .add-money-card-select {
      padding: 20px 16px;
      flex: 1;
    }

    .add-money-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
      margin-bottom: 16px;
    }

    .add-money-card-option {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .add-money-card-option:hover {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .add-money-card-mini {
      width: 50px;
      height: 32px;
      background: linear-gradient(135deg, #1e3a5f 0%, #1a6bb3 100%);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .add-money-card-mini-chip {
      width: 12px;
      height: 9px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 100%);
      border-radius: 2px;
    }

    .add-money-card-details {
      flex: 1;
    }

    .add-money-card-network {
      font-size: 12px;
      font-weight: 600;
      color: #1a6bb3;
      text-transform: uppercase;
    }

    .add-money-card-number {
      font-size: 14px;
      color: #374151;
    }

    .add-money-card-arrow {
      width: 20px;
      height: 20px;
      color: #9ca3af;
    }

    /* Amount Entry Page */
    .amount-entry-section {
      padding: 40px 20px;
      background: white;
      text-align: center;
    }

    .amount-entry-value {
      font-size: 48px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .amount-entry-label {
      font-size: 14px;
      color: #6b7280;
    }

    .amount-numpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 16px;
      background: #f0f4f8;
    }

    .numpad-key {
      padding: 20px;
      background: white;
      border: none;
      border-radius: 12px;
      font-size: 24px;
      font-weight: 500;
      color: #111827;
      cursor: pointer;
      transition: background 0.2s;
    }

    .numpad-key:hover {
      background: #e5e7eb;
    }

    .numpad-key.delete {
      background: transparent;
      font-size: 18px;
    }

    .amount-continue-section {
      padding: 16px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    .amount-continue-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .amount-continue-btn:hover {
      background: #155a96;
    }

    /* Error Banner */
    .error-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #dc2626;
      color: white;
      padding: 16px 20px;
      display: none;
      align-items: center;
      justify-content: center;
      gap: 12px;
      z-index: 500;
      animation: slideDown 0.3s ease;
    }

    .error-banner.show {
      display: flex;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }

    .error-banner-icon {
      width: 24px;
      height: 24px;
    }

    .error-banner-text {
      font-size: 15px;
      font-weight: 500;
    }

    .error-banner-close {
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      padding: 4px;
    }

    .error-banner-close svg {
      width: 20px;
      height: 20px;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- HOME PAGE -->
    <div class="page active" id="homePage">
      <!-- Header -->
      <header class="header">
        <div class="header-top">
          <div class="logo">
            <span class="logo-text">LEADCU BANK</span>
            <div class="logo-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
          </div>
          <div class="header-icons">
            <svg class="header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
            </svg>
            <svg class="header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
          </div>
        </div>

        <div class="greeting">
          <span class="greeting-text">Good <span id="timeOfDay">morning</span>, <span class="greeting-name" id="userName">Daniel</span></span>
        </div>

        <div class="date-time">
          <svg class="date-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          <span id="currentDateTime">Today is Tuesday, October 17, 2023.</span>
        </div>

        <div class="quick-actions-label">Quick Actions</div>

        <!-- Quick Actions Card -->
        <div class="quick-actions-card" id="quickActionsCard">
          <div class="overall-balance" style="text-align: center; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px;">Overall Balance</div>
            <div id="overallBalance" style="font-size: 28px; font-weight: 700; color: #1a6bb3;" data-testid="text-overall-balance">$0.00</div>
          </div>
          <div class="quick-actions">
            <div class="quick-action" data-testid="action-lead-transfer" onclick="openLeadTransferPage()">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                </svg>
              </div>
              <span class="quick-action-text">Lead Transfer</span>
            </div>

            <div class="quick-action" data-testid="action-send-money">
              <div class="quick-action-icon purple">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                </svg>
              </div>
              <span class="quick-action-text">Send money with<br><span class="quick-action-subtext">Zelle</span></span>
            </div>

            <div class="quick-action" data-testid="action-logout" onclick="handleLogout()">
              <div class="quick-action-icon gray">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
              </div>
              <span class="quick-action-text">Logout</span>
            </div>
          </div>

          <!-- Extra Quick Actions (Hidden by default) -->
          <div class="quick-actions-extra" id="quickActionsExtra">
            <div class="quick-action" onclick="openManageCardsPage()" data-testid="action-manage-cards">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                </svg>
              </div>
              <span class="quick-action-text">Manage cards</span>
            </div>

            <div class="quick-action" data-testid="action-pay-bills" onclick="openBillsPage()">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <span class="quick-action-text">Pay bills</span>
            </div>

            <div class="quick-action" onclick="openAddMoneyPage()" data-testid="action-add-money">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                </svg>
              </div>
              <span class="quick-action-text">Add money</span>
            </div>
          </div>

          <div class="expand-arrow">
            <button class="expand-arrow-btn" id="expandArrowBtn" onclick="toggleQuickActions()" data-testid="button-expand-actions">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <div class="main-content" id="mainContent">
        <!-- Deposits Section -->
        <div class="section-header" onclick="toggleSection('deposits')">
          <svg class="section-chevron expanded" id="depositsChevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
          <span class="section-title">Deposits</span>
        </div>

        <div id="depositsContent"></div>
      </div>
    </div>

    <!-- ACCOUNT DETAILS PAGE -->
    <div class="page" id="accountDetailsPage">
      <div class="details-header">
        <button class="back-btn" onclick="goBack()" data-testid="button-back">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="details-title">Account details</span>
      </div>

      <div class="account-details-card">
        <div class="details-account-name" id="detailsAccountName">Checking Account</div>
        <div class="details-account-number" id="detailsAccountNumber">Checking *6016</div>

        <div class="account-nav">
          <button class="account-nav-btn" onclick="prevAccount()" data-testid="button-prev-account">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <div class="account-nav-indicator" id="detailsIndicator"></div>
          <button class="account-nav-btn" onclick="nextAccount()" data-testid="button-next-account">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </button>
        </div>

        <div class="details-balance" id="detailsBalance">$7,473.22</div>
        <div class="details-balance-label">Available Balance</div>
      </div>

      <div class="account-info-section">
        <div class="info-row">
          <span class="info-label">Routing number</span>
          <span class="info-value" id="routingNumber">071025661</span>
        </div>
        <div class="info-row">
          <span class="info-label">Current balance</span>
          <span class="info-value" id="currentBalance">$7,473.22</span>
        </div>
        <div class="info-row">
          <span class="info-label">Last business day balance</span>
          <span class="info-value" id="lastDayBalance">$7,473.22</span>
        </div>
      </div>

      <div class="details-actions">
        <div class="detail-action" data-testid="action-view-statements">
          <div class="detail-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
          </div>
          <span class="detail-action-text">View<br>statements</span>
        </div>

        <div class="detail-action" onclick="openTransferModal()" data-testid="action-transfer-money">
          <div class="detail-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
          </div>
          <span class="detail-action-text">Transfer<br>money</span>
        </div>

        <div class="detail-action" data-testid="action-pay-bills-detail">
          <div class="detail-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
          </div>
          <span class="detail-action-text">Pay<br>bills</span>
        </div>
      </div>

      <div class="transactions-section">
        <div class="transactions-header">
          <span class="transactions-title">Account transactions</span>
          <svg class="transactions-filter" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
          </svg>
        </div>
      </div>

      <div class="transactions-list" id="transactionsList">
      </div>
    </div>

    <!-- TRANSFER MODAL -->
    <div class="modal-overlay" id="transferModal">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-title">Transfer Money</span>
          <button class="modal-close" onclick="closeTransferModal()" data-testid="button-close-modal">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <div class="modal-body" id="transferForm">
          <div class="form-group">
            <label class="form-label">From Account</label>
            <select class="form-select" id="fromAccount" onchange="updateTransferInfo()" data-testid="select-from-account">
            </select>
            <div class="account-balance-info" id="fromAccountBalance"></div>
          </div>

          <div class="form-group">
            <label class="form-label">To Account</label>
            <select class="form-select" id="toAccount" data-testid="select-to-account">
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <div class="amount-input-wrapper">
              <span class="amount-prefix">$</span>
              <input type="number" class="form-input amount-input" id="transferAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-transfer-amount">
            </div>
          </div>

          <button class="transfer-btn" onclick="executeTransfer()" data-testid="button-confirm-transfer">Transfer</button>
        </div>

        <div class="success-message" id="successMessage">
          <div class="success-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <div class="success-title">Transfer Complete</div>
          <div class="success-text" id="successText">Your money has been transferred successfully.</div>
          <button class="transfer-btn" onclick="closeTransferModal()" data-testid="button-done">Done</button>
        </div>
      </div>
    </div>

    <!-- PAY & TRANSFER BOTTOM SHEET -->
    <div class="bottom-sheet-overlay" id="payTransferSheet" onclick="closePayTransferSheet(event)">
      <div class="bottom-sheet" onclick="event.stopPropagation()">
        <div class="bottom-sheet-handle"></div>
        <div class="bottom-sheet-content">
          <div class="sheet-action-item" onclick="handleAccountTransfer()" data-testid="sheet-account-transfer">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
            </div>
            <span class="sheet-action-text">Account transfer</span>
          </div>

          <div class="sheet-action-item" onclick="handleGlobalTransfer()" data-testid="sheet-global-transfer">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
              </svg>
            </div>
            <span class="sheet-action-text">Global Money Transfer</span>
          </div>

          <div class="sheet-action-item" onclick="handleDepositCheque()" data-testid="sheet-deposit-cheque">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
            <span class="sheet-action-text">Deposit a cheque</span>
          </div>

          <div class="sheet-divider"></div>

          <button class="sheet-cancel-btn" onclick="closePayTransferSheet()" data-testid="sheet-cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- GLOBAL MONEY TRANSFER PAGE -->
    <div class="full-page" id="globalTransferPage">
      <div class="full-page-header">
        <span class="full-page-title">Global money transfer</span>
        <button class="close-page-btn" onclick="closeGlobalTransferPage()" data-testid="button-close-global-transfer">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="tabs-container">
        <button class="tab-btn active" onclick="switchGlobalTab('overview', event)" data-testid="tab-overview">Overview</button>
        <button class="tab-btn" onclick="switchGlobalTab('history', event)" data-testid="tab-history">Global transfer history</button>
        <button class="tab-btn" onclick="switchGlobalTab('manage', event)" data-testid="tab-manage">Manage</button>
      </div>

      <!-- OVERVIEW TAB -->
      <div id="tabOverview" class="tab-panel" data-testid="panel-overview">
        <div class="watchlist-card">
          <div class="watchlist-header">
            <span class="watchlist-title">Your currency watchlist</span>
            <button class="edit-btn" data-testid="button-edit-watchlist">EDIT</button>
          </div>
          <div class="currency-item">
            <span class="currency-name">Euro <span class="currency-code">EUR</span></span>
            <span class="currency-rate">1 USD = 0.92 EUR</span>
          </div>
          <div class="currency-item">
            <span class="currency-name">British pound <span class="currency-code">GBP</span></span>
            <span class="currency-rate">1 USD = 0.79 GBP</span>
          </div>
          <div class="currency-item">
            <span class="currency-name">Japanese yen <span class="currency-code">JPY</span></span>
            <span class="currency-rate">1 USD = 149.50 JPY</span>
          </div>
        </div>

        <div class="empty-state" id="contactsEmptyState">
          <div class="empty-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
          </div>
          <div class="empty-text">You haven't added any contacts yet. Let's change that.</div>
          <button class="primary-action-btn" onclick="openAddContactPage()" data-testid="button-add-contact">ADD A CONTACT</button>
        </div>

        <div id="contactsList" style="display:none; padding: 16px;">
          <button class="primary-action-btn" onclick="openAddContactPage()" style="margin-bottom: 16px;" data-testid="button-add-another-contact">ADD A CONTACT</button>
          <div id="savedContactsList"></div>
        </div>
      </div>

      <!-- HISTORY TAB -->
      <div id="tabHistory" class="tab-panel" style="display:none;" data-testid="panel-history">
        <div class="empty-state">
          <div class="empty-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div class="empty-text">No transfer history yet. Your global transfers will appear here.</div>
        </div>
      </div>

      <!-- MANAGE TAB -->
      <div id="tabManage" class="tab-panel" style="display:none;" data-testid="panel-manage">
        <div class="manage-section" style="padding: 16px;">
          <div class="manage-card" style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e8ecf0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div style="font-size: 15px; font-weight: 600; color: #111827;">Transfer Limits</div>
                <div style="font-size: 13px; color: #6b7280;">Manage your daily transfer limits</div>
              </div>
              <svg style="width: 20px; height: 20px; color: #6b7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ADD CONTACT PAGE -->
    <div class="full-page" id="addContactPage">
      <div class="full-page-header">
        <span class="full-page-title">Add Recipient</span>
        <button class="close-page-btn" onclick="closeAddContactPage()" data-testid="button-close-add-contact">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <div class="form-group">
          <label class="form-label">Recipient Full Name</label>
          <input type="text" class="form-input" id="contactName" placeholder="Enter full name" data-testid="input-contact-name">
        </div>

        <div class="form-group">
          <label class="form-label">Bank Name</label>
          <input type="text" class="form-input" id="contactBankName" placeholder="Enter bank name" data-testid="input-contact-bank">
        </div>

        <div class="form-group">
          <label class="form-label">Bank Account Number</label>
          <input type="text" class="form-input" id="contactAccountNumber" placeholder="Enter account number" data-testid="input-contact-account">
        </div>

        <div class="form-group">
          <label class="form-label">Recipient Address</label>
          <input type="text" class="form-input" id="contactAddress" placeholder="Enter recipient address" data-testid="input-contact-address">
        </div>

        <div class="form-group">
          <label class="form-label">Bank Address</label>
          <input type="text" class="form-input" id="contactBankAddress" placeholder="Enter bank address" data-testid="input-contact-bank-address">
        </div>

        <div class="form-group">
          <label class="form-label">Routing Number / SWIFT Code</label>
          <input type="text" class="form-input" id="contactRoutingSwift" placeholder="Enter routing or SWIFT code" data-testid="input-contact-routing">
        </div>

        <div class="form-group">
          <label class="form-label">Country</label>
          <select class="form-select" id="contactCountry" data-testid="select-contact-country">
            <option value="">Select country</option>
            <option value="United States">United States</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="Canada">Canada</option>
            <option value="Germany">Germany</option>
            <option value="France">France</option>
            <option value="Japan">Japan</option>
            <option value="Australia">Australia</option>
            <option value="Mexico">Mexico</option>
            <option value="India">India</option>
            <option value="China">China</option>
            <option value="Brazil">Brazil</option>
            <option value="Nigeria">Nigeria</option>
            <option value="South Africa">South Africa</option>
            <option value="Philippines">Philippines</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <button onclick="saveContact()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-testid="button-save-contact">CONTINUE</button>
        <button onclick="closeAddContactPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-cancel-add-contact">CANCEL</button>
      </div>
    </div>

    <!-- GLOBAL TRANSFER AMOUNT PAGE -->
    <div class="full-page" id="globalTransferAmountPage">
      <div class="full-page-header">
        <span class="full-page-title">Send Money</span>
        <button class="close-page-btn" onclick="closeGlobalTransferAmountPage()" data-testid="button-close-global-amount">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <div style="background: #f0f7ff; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
          <div style="font-size: 14px; color: #6b7280; margin-bottom: 4px;">Sending to</div>
          <div style="font-size: 18px; font-weight: 600; color: #111827;" id="globalTransferRecipientName">Recipient Name</div>
          <div style="font-size: 14px; color: #6b7280;" id="globalTransferRecipientBank">Bank Name</div>
          <div style="font-size: 14px; color: #6b7280;" id="globalTransferRecipientCountry">Country</div>
        </div>

        <div class="form-group">
          <label class="form-label">Amount (USD)</label>
          <div class="amount-input-wrapper">
            <span class="amount-prefix">$</span>
            <input type="number" class="form-input amount-input" id="globalTransferAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-global-amount">
          </div>
        </div>

        <div class="glowing-balance-card" style="margin-top: 20px;">
          <div class="glowing-balance-label">Checking Account Balance</div>
          <div class="glowing-balance-account">Checking *<span id="globalTransferAccountLast4">6016</span></div>
          <div class="glowing-balance-amount" id="globalTransferAvailableBalance">$7,473.22</div>
        </div>

        <button onclick="executeGlobalTransfer()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-testid="button-send-global">SEND MONEY</button>
        <button onclick="closeGlobalTransferAmountPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-cancel-global-send">CANCEL</button>
      </div>
    </div>

    <!-- GLOBAL TRANSFER SUCCESS PAGE -->
    <div class="full-page" id="globalTransferSuccessPage">
      <div class="full-page-header">
        <span class="full-page-title">Transfer Complete</span>
        <button class="close-page-btn" onclick="closeGlobalTransferSuccessPage()" data-testid="button-close-global-success">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="receipt-content">
        <div class="receipt-card">
          <div class="receipt-success-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <div class="receipt-title">Transfer Successful!</div>
          <div class="receipt-amount" id="globalTransferSuccessAmount">$0.00</div>
          <div class="receipt-subtitle">has been sent successfully</div>

          <div class="receipt-details">
            <div class="receipt-row">
              <span class="receipt-label">Recipient</span>
              <span class="receipt-value" id="globalSuccessRecipient">Recipient Name</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Bank</span>
              <span class="receipt-value" id="globalSuccessBank">Bank Name</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Country</span>
              <span class="receipt-value" id="globalSuccessCountry">Country</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">From Account</span>
              <span class="receipt-value" id="globalSuccessFromAccount">Checking *6016</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Date & Time</span>
              <span class="receipt-value" id="globalSuccessDateTime">Dec 8, 2024 10:30 AM</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">New Balance</span>
              <span class="receipt-value" id="globalSuccessNewBalance">$0.00</span>
            </div>
          </div>

          <div class="receipt-ref" id="globalSuccessRef">Reference: GT-1234567890</div>

          <button class="done-btn" onclick="closeGlobalTransferSuccessPage()" data-testid="button-done-global-success">Done</button>
        </div>
      </div>
    </div>

    <!-- BILLS PAGE -->
    <div class="full-page" id="billsPage">
      <div class="full-page-header">
        <span class="full-page-title">Pay Bills</span>
        <button class="close-page-btn" onclick="closeBillsPage()" data-testid="button-close-bills">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="bills-content">
        <div class="bills-grid">
          <div class="bill-type-card" onclick="openBillPaymentPage('electric')">
            <div class="bill-type-icon electric">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </div>
            <span class="bill-type-name">Electric</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('water')">
            <div class="bill-type-icon water">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c0 4.5-6 7.5-6 12a6 6 0 1012 0c0-4.5-6-7.5-6-12z"/></svg>
            </div>
            <span class="bill-type-name">Water</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('internet')">
            <div class="bill-type-icon internet">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/></svg>
            </div>
            <span class="bill-type-name">Internet</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('phone')">
            <div class="bill-type-icon phone">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>
            </div>
            <span class="bill-type-name">Phone</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('gas')">
            <div class="bill-type-icon gas">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/></svg>
            </div>
            <span class="bill-type-name">Gas</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('tv')">
            <div class="bill-type-icon tv">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
            </div>
            <span class="bill-type-name">TV/Cable</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('insurance')">
            <div class="bill-type-icon insurance">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
            </div>
            <span class="bill-type-name">Insurance</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('other')">
            <div class="bill-type-icon other">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
            </div>
            <span class="bill-type-name">Other</span>
          </div>
        </div>
      </div>
    </div>

    <!-- BILL PAYMENT PAGE -->
    <div class="full-page" id="billPaymentPage">
      <div class="full-page-header">
        <span class="full-page-title" id="billPaymentTitle">Pay Electric Bill</span>
        <button class="close-page-btn" onclick="closeBillPaymentPage()" data-testid="button-close-bill-payment">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="bill-payment-content">
        <div class="bill-type-header">
          <div class="bill-type-header-icon bill-type-icon electric" id="billPaymentIcon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
          </div>
          <span class="bill-type-header-text" id="billPaymentType">Electric Bill</span>
        </div>

        <div class="bill-form-section">
          <div class="bill-form-title">Payment Details</div>

          <div class="form-group">
            <label class="form-label">Company/Biller Name</label>
            <input type="text" class="form-input" id="billCompanyName" placeholder="Enter company name" data-testid="input-bill-company">
          </div>

          <div class="form-group">
            <label class="form-label">Account Number</label>
            <input type="text" class="form-input" id="billAccountNumber" placeholder="Enter account number" data-testid="input-bill-account">
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <div class="amount-input-wrapper">
              <span class="amount-prefix">$</span>
              <input type="number" class="form-input amount-input" id="billPaymentAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-bill-amount">
            </div>
          </div>

          <button class="transfer-submit-btn" onclick="proceedToBillConfirmation()" data-testid="button-proceed-bill">Continue</button>
        </div>

        <div class="glowing-balance-card">
          <div class="glowing-balance-label">Checking Account Balance</div>
          <div class="glowing-balance-account">Checking *<span id="billPaymentAccountLast4">6016</span></div>
          <div class="glowing-balance-amount" id="billPaymentBalance">$7,473.22</div>
        </div>
      </div>
    </div>

    <!-- BILL CONFIRMATION PAGE -->
    <div class="full-page" id="billConfirmPage">
      <div class="full-page-header">
        <span class="full-page-title">Confirm Payment</span>
        <button class="close-page-btn" onclick="closeBillConfirmPage()" data-testid="button-close-bill-confirm">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="confirmation-content">
        <div class="confirmation-card">
          <div class="confirmation-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
          </div>
          <div class="confirmation-title">Confirm Payment</div>
          <div class="confirmation-subtitle">Please review the payment details below</div>

          <div class="confirmation-details">
            <div class="confirmation-row">
              <span class="confirmation-label">Bill Type</span>
              <span class="confirmation-value" id="confirmBillType">Electric</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Company</span>
              <span class="confirmation-value" id="confirmBillCompany">Company Name</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Account Number</span>
              <span class="confirmation-value" id="confirmBillAccount">****1234</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">From Account</span>
              <span class="confirmation-value" id="confirmBillFromAccount">Checking *6016</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Amount</span>
              <span class="confirmation-value amount" id="confirmBillAmount">$0.00</span>
            </div>
          </div>

          <div class="confirmation-buttons">
            <button class="cancel-btn" onclick="cancelBillPayment()" data-testid="button-cancel-bill">Cancel</button>
            <button class="confirm-btn" onclick="executeBillPayment()" data-testid="button-confirm-bill">Confirm</button>
          </div>
        </div>
      </div>
    </div>

    <!-- BILL PAYMENT RECEIPT PAGE -->
    <div class="full-page" id="billReceiptPage">
      <div class="full-page-header">
        <span class="full-page-title">Payment Complete</span>
        <button class="close-page-btn" onclick="closeBillReceiptPage()" data-testid="button-close-bill-receipt">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="receipt-content">
        <div class="receipt-card">
          <div class="receipt-success-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <div class="receipt-title">Payment Successful!</div>
          <div class="receipt-amount" id="billReceiptAmount">$0.00</div>
          <div class="receipt-subtitle">has been paid successfully</div>

          <div class="receipt-details">
            <div class="receipt-row">
              <span class="receipt-label">Bill Type</span>
              <span class="receipt-value" id="billReceiptType">Electric</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Company</span>
              <span class="receipt-value" id="billReceiptCompany">Company Name</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Account Number</span>
              <span class="receipt-value" id="billReceiptAccount">****1234</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">From Account</span>
              <span class="receipt-value" id="billReceiptFromAccount">Checking *6016</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Date & Time</span>
              <span class="receipt-value" id="billReceiptDateTime">Dec 8, 2024 10:30 AM</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">New Balance</span>
              <span class="receipt-value" id="billReceiptNewBalance">$0.00</span>
            </div>
          </div>

          <div class="receipt-ref" id="billReceiptRef">Reference: BP-1234567890</div>

          <button class="done-btn" onclick="closeBillReceiptPage()" data-testid="button-done-bill-receipt">Done</button>
        </div>
      </div>
    </div>

    <!-- CHECK DEPOSIT AGREEMENT PAGE -->
    <div class="full-page" id="checkDepositAgreementPage">
      <div class="full-page-header">
        <span class="full-page-title">Mobile Check Deposit</span>
        <button class="close-page-btn" onclick="closeCheckDepositAgreementPage()" data-testid="button-close-check-agreement">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="agreement-content" style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          You agree that your use of Mobile Check Deposit is subject to the LEADCU BANK Mobile Check Deposit Terms and Conditions (terms and conditions) set out in your account agreement (current version: the <a href="#" style="color: #1a6bb3; text-decoration: underline;">Electronic Banking Services Agreement</a> and <a href="#" style="color: #1a6bb3; text-decoration: underline;">Better Banking Guide for Business</a>).
        </p>

        <p style="font-size: 15px; font-weight: 600; color: #111827; margin-bottom: 12px;">
          The following is a reminder of important information:
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          You agree to use the service to deposit a digital representation (image) of any of the following original paper items (each an eligible item): checks, certified checks and travelers checks, money orders and bank drafts issued by a United States financial institution or provincial or United States government, in United States dollars, and addressed to you (and/or to your joint accountholder in the case of a joint account). You must provide an image of the front and back of the original eligible item. You agree to only deposit eligible items while you are physically located in United States through cellular or Wi-Fi networks in United States.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          You will not use mobile check deposit to deposit any items that:
        </p>

        <ul style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px; padding-left: 20px;">
          <li style="margin-bottom: 8px;">Are payable to any person or entity other than you</li>
          <li style="margin-bottom: 8px;">Are drawn on a financial institution located outside of the United States</li>
          <li style="margin-bottom: 8px;">Are not payable in United States dollars</li>
          <li style="margin-bottom: 8px;">Are dated more than 6 months prior to the date of deposit</li>
          <li style="margin-bottom: 8px;">Have been previously deposited</li>
        </ul>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          Deposits received on or before 11:59 p.m. Eastern Time (ET) on a business day will have that day as a transaction date, and otherwise will have the next business day as a transaction date.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          Amounts you deposit through this service are subject to the limits set out in your account agreement. We may impose limits on the dollar amount of items and/or number of items which can be deposited and may reject any item. You are liable for any error and your account may be adjusted accordingly.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          There is no charge to deposit items into a personal deposit account. Per-item deposit content fees may apply when you deposit items into a business banking account.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 24px;">
          The parties expressly request that these terms and conditions and any related documents be drafted in English.
        </p>

        <button onclick="agreeAndProceedToCheckDeposit()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 12px;" data-testid="button-agree-deposit">I AGREE</button>
        <button onclick="closeCheckDepositAgreementPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer;" data-testid="button-cancel-agreement">CANCEL</button>
      </div>
    </div>

    <!-- CHECK DEPOSIT PAGE -->
    <div class="full-page" id="checkDepositPage">
      <div class="full-page-header">
        <span class="full-page-title">Deposit a check</span>
        <button class="close-page-btn" onclick="closeCheckDepositPage()" data-testid="button-close-check-deposit">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <p style="font-size: 14px; color: #6b7280; margin-bottom: 20px;">Step 1 of 3 - Enter details</p>
        
        <div class="form-group">
          <label class="form-label">Amount</label>
          <div class="amount-input-wrapper">
            <span class="amount-prefix">$</span>
            <input type="number" class="form-input amount-input" id="checkDepositAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-check-amount">
          </div>
          <p style="font-size: 12px; color: #6b7280; margin-top: 4px;">Format: 0.00</p>
        </div>

        <div class="form-group">
          <label class="form-label">To</label>
          <select class="form-select" id="checkDepositAccount" data-testid="select-check-account">
            <option value="">Choose an account</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Photo of front</label>
          <div style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: #1a6bb3; font-weight: 600;">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            <span>TAKE PHOTO</span>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Photo of back</label>
          <div style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: #1a6bb3; font-weight: 600;">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            <span>TAKE PHOTO</span>
          </div>
        </div>

        <button id="checkDepositBtn" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: not-allowed; margin-top: 20px; opacity: 0.5; filter: blur(0.5px); pointer-events: none;" data-testid="button-deposit-check" disabled>CONTINUE</button>
        <button onclick="closeCheckDepositPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-cancel-deposit">CANCEL</button>
      </div>
    </div>

    <!-- LEAD TRANSFER PAGE -->
    <div class="full-page" id="leadTransferPage">
      <div class="full-page-header">
        <span class="full-page-title">Lead Transfer</span>
        <button class="close-page-btn" onclick="closeLeadTransferPage()" data-testid="button-close-lead-transfer">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="lead-transfer-content">
        <div class="transfer-form-section">
          <div class="transfer-form-title">Transfer to Another User</div>

          <div class="form-group">
            <label class="form-label">Recipient Account Number</label>
            <input type="text" class="form-input" id="leadTransferAccount" placeholder="Enter account number" data-testid="input-lead-account">
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <div class="amount-input-wrapper">
              <span class="amount-prefix">$</span>
              <input type="number" class="form-input amount-input" id="leadTransferAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-lead-amount">
            </div>
          </div>

          <button class="transfer-submit-btn" onclick="proceedToConfirmation()" data-testid="button-proceed-transfer">Continue</button>
        </div>

        <div class="glowing-balance-card">
          <div class="glowing-balance-label">Checking Account Balance</div>
          <div class="glowing-balance-account">Checking *<span id="leadTransferAccountLast4">6016</span></div>
          <div class="glowing-balance-amount" id="leadTransferBalance">$7,473.22</div>
        </div>
      </div>
    </div>

    <!-- LEAD TRANSFER CONFIRMATION PAGE -->
    <div class="full-page" id="leadTransferConfirmPage">
      <div class="full-page-header">
        <span class="full-page-title">Confirm Transfer</span>
        <button class="close-page-btn" onclick="closeLeadTransferConfirmPage()" data-testid="button-close-confirm">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="confirmation-content">
        <div class="confirmation-card">
          <div class="confirmation-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
          </div>
          <div class="confirmation-title">Confirm Transfer</div>
          <div class="confirmation-subtitle">Please review the transfer details below</div>

          <div class="confirmation-details">
            <div class="confirmation-row">
              <span class="confirmation-label">To Account</span>
              <span class="confirmation-value" id="confirmToAccount">****1234</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">From Account</span>
              <span class="confirmation-value" id="confirmFromAccount">Checking *6016</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Amount</span>
              <span class="confirmation-value amount" id="confirmAmount">$0.00</span>
            </div>
          </div>

          <div class="confirmation-buttons">
            <button class="cancel-btn" onclick="cancelLeadTransfer()" data-testid="button-cancel-transfer">Cancel</button>
            <button class="confirm-btn" onclick="executeLeadTransfer()" data-testid="button-confirm-transfer">Confirm</button>
          </div>
        </div>
      </div>
    </div>

    <!-- LEAD TRANSFER RECEIPT PAGE -->
    <div class="full-page" id="leadTransferReceiptPage">
      <div class="full-page-header">
        <span class="full-page-title">Transfer Complete</span>
        <button class="close-page-btn" onclick="closeLeadTransferReceiptPage()" data-testid="button-close-receipt">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="receipt-content">
        <div class="receipt-card">
          <div class="receipt-success-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <div class="receipt-title">Transfer Successful!</div>
          <div class="receipt-amount" id="receiptAmount">$0.00</div>
          <div class="receipt-subtitle">has been sent successfully</div>

          <div class="receipt-details">
            <div class="receipt-row">
              <span class="receipt-label">To Account</span>
              <span class="receipt-value" id="receiptToAccount">****1234</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">From Account</span>
              <span class="receipt-value" id="receiptFromAccount">Checking *6016</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Date & Time</span>
              <span class="receipt-value" id="receiptDateTime">Dec 8, 2024 10:30 AM</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">New Balance</span>
              <span class="receipt-value" id="receiptNewBalance">$0.00</span>
            </div>
          </div>

          <div class="receipt-ref" id="receiptRef">Reference: LT-1234567890</div>

          <button class="done-btn" onclick="closeLeadTransferReceiptPage()" data-testid="button-done-receipt">Done</button>
        </div>
      </div>
    </div>

    <!-- MANAGE CARDS PAGE -->
    <div class="full-page" id="manageCardsPage">
      <div class="manage-cards-header">
        <div class="manage-cards-header-top">
          <div class="manage-cards-logo">
            <div class="manage-cards-logo-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
            <span class="manage-cards-logo-text">LEADCU BANK</span>
          </div>
          <button class="close-page-btn" onclick="closeManageCardsPage()" data-testid="button-close-manage-cards">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
        <div class="manage-cards-title">
          Manage your <strong>debit or<br>ATM card.</strong>
        </div>
      </div>

      <div class="manage-cards-content">
        <!-- Empty State (shown when no cards) -->
        <div class="cards-empty-state" id="cardsEmptyState">
          <div class="cards-empty-icon">
            <div class="cards-empty-icon-inner"></div>
          </div>
          <div class="cards-empty-title">No cards added yet</div>
          <div class="cards-empty-text">Tap "Add Card" to add your first card</div>
        </div>

        <!-- Saved Cards List (shown when cards exist) -->
        <div class="saved-cards-list" id="savedCardsList" style="display: none;"></div>

        <button class="add-card-footer-btn" onclick="openAddCardPage()" data-testid="button-add-card">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
          </svg>
          Add Card
        </button>
      </div>
    </div>

    <!-- ADD CARD PAGE -->
    <div class="full-page" id="addCardPage">
      <div class="full-page-header">
        <button class="back-btn" onclick="closeAddCardPage()" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="full-page-title">Add Card</span>
        <div style="width: 40px;"></div>
      </div>

      <!-- Live Card Preview -->
      <div class="add-card-preview-section">
        <div class="add-card-live-preview">
          <div class="add-card-preview-top">
            <div class="add-card-preview-chip"></div>
            <div class="add-card-preview-type" id="previewCardType">DEBIT</div>
          </div>
          <div class="add-card-preview-number" id="previewCardNumber">**** **** **** ****</div>
          <div class="add-card-preview-bottom">
            <div class="add-card-preview-holder-section">
              <div class="add-card-preview-label">CARD HOLDER</div>
              <div class="add-card-preview-holder-name" id="previewCardHolder">YOUR NAME</div>
            </div>
            <div class="add-card-preview-expiry-section">
              <div class="add-card-preview-label">EXPIRES</div>
              <div class="add-card-preview-expiry" id="previewCardExpiry">MM/YY</div>
            </div>
          </div>
          <div class="add-card-preview-network" id="previewCardNetwork">VISA</div>
        </div>
      </div>

      <!-- Card Form -->
      <div class="add-card-form-section">
        <div class="form-group">
          <label class="form-label">Cardholder Name</label>
          <input type="text" class="form-input" id="cardHolderName" placeholder="Enter name on card" oninput="updateCardPreview()" data-testid="input-cardholder-name">
        </div>

        <div class="form-group">
          <label class="form-label">Card Number</label>
          <input type="text" class="form-input" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this); updateCardPreview()" data-testid="input-card-number">
        </div>

        <div class="card-form-row">
          <div class="form-group">
            <label class="form-label">Expiry Date</label>
            <input type="text" class="form-input" id="cardExpiry" placeholder="MM/YY" maxlength="5" oninput="formatExpiry(this); updateCardPreview()" data-testid="input-card-expiry">
          </div>
          <div class="form-group">
            <label class="form-label">CVV</label>
            <input type="text" class="form-input" id="cardCvv" placeholder="123" maxlength="4" data-testid="input-card-cvv">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Card Type</label>
          <div class="card-type-toggle">
            <button class="card-type-btn active" onclick="selectCardType('debit')" id="btnDebit" data-testid="button-debit">Debit</button>
            <button class="card-type-btn" onclick="selectCardType('credit')" id="btnCredit" data-testid="button-credit">Credit</button>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Card Network</label>
          <div class="card-network-toggle">
            <button class="card-network-btn visa active" onclick="selectCardNetwork('visa')" id="btnVisa" data-testid="button-visa">VISA</button>
            <button class="card-network-btn mastercard" onclick="selectCardNetwork('mastercard')" id="btnMastercard" data-testid="button-mastercard">Mastercard</button>
            <button class="card-network-btn amex" onclick="selectCardNetwork('amex')" id="btnAmex" data-testid="button-amex">AMEX</button>
          </div>
        </div>

        <button class="save-card-btn" onclick="saveCard()" data-testid="button-save-card">Save Card</button>
      </div>
    </div>

    <!-- ADD MONEY - SELECT CARD PAGE -->
    <div class="full-page" id="addMoneySelectCardPage">
      <div class="full-page-header">
        <span class="full-page-title">Add Money</span>
        <button class="close-page-btn" onclick="closeAddMoneySelectCardPage()" data-testid="button-close-add-money-select">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="add-money-card-select">
        <div class="add-money-section-title">Select a card to add money from</div>
        <div id="addMoneyCardsList"></div>
        
        <!-- Empty state if no cards -->
        <div id="addMoneyNoCards" style="display: none; text-align: center; padding: 40px 20px;">
          <div class="cards-empty-icon" style="margin: 0 auto 20px;">
            <div class="cards-empty-icon-inner"></div>
          </div>
          <div class="cards-empty-title">No cards available</div>
          <div class="cards-empty-text">Please add a card first to add money</div>
          <button class="add-card-footer-btn" onclick="closeAddMoneySelectCardPage(); openManageCardsPage();" style="margin-top: 20px;">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            Add Card
          </button>
        </div>
      </div>
    </div>

    <!-- ADD MONEY - AMOUNT ENTRY PAGE -->
    <div class="full-page" id="addMoneyAmountPage">
      <div class="full-page-header">
        <button class="back-btn" onclick="closeAddMoneyAmountPage()" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="full-page-title">Add Money</span>
        <div style="width: 40px;"></div>
      </div>

      <div class="amount-entry-section">
        <div class="amount-entry-value" id="addMoneyAmountDisplay">$0</div>
        <div class="amount-entry-label">Enter amount to add</div>
      </div>

      <div class="amount-numpad">
        <button class="numpad-key" onclick="addMoneyNumpadPress('1')">1</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('2')">2</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('3')">3</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('4')">4</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('5')">5</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('6')">6</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('7')">7</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('8')">8</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('9')">9</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('.')">.</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('0')">0</button>
        <button class="numpad-key delete" onclick="addMoneyNumpadDelete()">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z"/>
          </svg>
        </button>
      </div>

      <div class="amount-continue-section">
        <button class="amount-continue-btn" onclick="processAddMoney()" data-testid="button-add-money-continue">Add Money</button>
      </div>
    </div>

    <!-- ERROR BANNER -->
    <div class="error-banner" id="errorBanner">
      <svg class="error-banner-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
      </svg>
      <span class="error-banner-text">Try again later</span>
      <button class="error-banner-close" onclick="closeErrorBanner()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- TRY AGAIN LATER PAGE -->
    <div class="full-page" id="tryAgainPage">
      <div class="full-page-header">
        <span class="full-page-title">Add money</span>
        <button class="close-page-btn" onclick="closeTryAgainPage()" data-testid="button-close-try-again">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="error-message-page">
        <div class="error-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
          </svg>
        </div>
        <div class="error-title">Try again later</div>
        <div class="error-text">We're unable to process your request at this time. Please try again later.</div>
        <button class="primary-action-btn" onclick="closeTryAgainPage()" data-testid="button-ok-try-again">OK</button>
      </div>
    </div>

    <!-- CRYPTO LIST PAGE -->
    <div class="full-page crypto-list-page" id="cryptoListPage">
      <div class="full-page-header">
        <span class="full-page-title">Crypto</span>
        <button class="close-page-btn" onclick="closeCryptoListPage()" data-testid="button-close-crypto-list">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="crypto-list-content">
        <div class="crypto-list-item" onclick="openBTCDetailPage()">
          <div class="crypto-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13h-2v1H9v2h1.5v4H9v2h1.5v1h2v-1h.5c1.38 0 2.5-1.12 2.5-2.5 0-.89-.47-1.67-1.17-2.11.42-.39.67-.94.67-1.54 0-1.1-.9-1.85-2-1.85zm0 6h-.5v-2h.5c.55 0 1 .45 1 1s-.45 1-1 1zm0-4h-.5V8h.5c.55 0 1 .35 1 .75s-.45.75-1 .75z"/>
            </svg>
          </div>
          <div class="crypto-info">
            <div class="crypto-name">Bitcoin</div>
            <div class="crypto-symbol">BTC</div>
          </div>
          <div class="crypto-price-info">
            <div class="crypto-price" id="btcListPrice">$91,257.58</div>
            <div class="crypto-change" id="btcListChange">+2.02%</div>
          </div>
        </div>
      </div>
    </div>

    <!-- BTC DETAIL PAGE -->
    <div class="full-page" id="btcDetailPage" style="padding-bottom: 100px;">
      <div class="crypto-detail-header">
        <button class="back-btn" onclick="closeBTCDetailPage()" data-testid="button-back-btc">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <div class="crypto-detail-title">
          <h1>BTC</h1>
          <span>COIN | Bitcoin</span>
        </div>
        <div class="crypto-detail-edit">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
          </svg>
        </div>
      </div>

      <div class="crypto-price-section">
        <div class="crypto-gas-fee">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 10H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"/>
          </svg>
          $1.82
        </div>
        <div class="crypto-main-price" id="btcMainPrice">$91,257.58</div>
        <div class="crypto-price-change" id="btcPriceChange"> $1,815.20 (+2.02%)</div>
      </div>

      <div class="crypto-chart-container">
        <canvas id="btcChart" class="crypto-chart"></canvas>
      </div>

      <div class="chart-time-filters">
        <button class="chart-time-btn" onclick="setChartTimeframe('1H')">1H</button>
        <button class="chart-time-btn active" onclick="setChartTimeframe('1D')">1D</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('1W')">1W</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('1M')">1M</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('1Y')">1Y</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('All')">All</button>
      </div>

      <div class="crypto-tabs">
        <button class="crypto-tab active" onclick="switchCryptoTab('holdings')">Holdings</button>
        <button class="crypto-tab" onclick="switchCryptoTab('history')">History</button>
        <button class="crypto-tab" onclick="switchCryptoTab('about')">About</button>
      </div>

      <div id="cryptoHoldingsTab" class="crypto-tab-content active">
        <div class="crypto-holdings-section">
          <div class="crypto-holdings-title">My Balance</div>
          <div class="crypto-holdings-card">
            <div class="crypto-holdings-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13h-2v1H9v2h1.5v4H9v2h1.5v1h2v-1h.5c1.38 0 2.5-1.12 2.5-2.5 0-.89-.47-1.67-1.17-2.11.42-.39.67-.94.67-1.54 0-1.1-.9-1.85-2-1.85zm0 6h-.5v-2h.5c.55 0 1 .45 1 1s-.45 1-1 1zm0-4h-.5V8h.5c.55 0 1 .35 1 .75s-.45.75-1 .75z"/>
              </svg>
            </div>
            <div class="crypto-holdings-info">
              <div class="crypto-holdings-name">Bitcoin</div>
              <div class="crypto-holdings-amount" id="btcHoldingsAmount">0.00 BTC</div>
            </div>
            <div class="crypto-holdings-value">
              <div class="crypto-holdings-usd" id="btcHoldingsUsd">$0.00</div>
              <div class="crypto-holdings-pnl">-</div>
            </div>
          </div>
        </div>
      </div>

      <div id="cryptoHistoryTab" class="crypto-tab-content">
        <div class="crypto-history-empty">
          <p>No transaction history yet</p>
        </div>
      </div>

      <div id="cryptoAboutTab" class="crypto-tab-content">
        <div class="crypto-about-content">
          <h3>About Bitcoin</h3>
          <p>Bitcoin is a decentralized digital currency that can be transferred on the peer-to-peer bitcoin network. Bitcoin transactions are verified by network nodes through cryptography and recorded in a public distributed ledger called a blockchain.</p>
          <p>Bitcoin was invented in 2008 by an unknown person or group of people using the name Satoshi Nakamoto. The currency began use in 2009, when its implementation was released as open-source software.</p>
        </div>
      </div>

      <div class="crypto-action-bar">
        <button class="crypto-action-btn" onclick="handleCryptoReceive()">
          <div class="crypto-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
            </svg>
          </div>
          <span class="crypto-action-text">Receive</span>
        </button>
        <button class="crypto-action-btn" onclick="handleCryptoSell()">
          <div class="crypto-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
          </div>
          <span class="crypto-action-text">Sell</span>
        </button>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <div class="nav-item active" onclick="goHome()" data-testid="nav-home">
        <svg fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        <span>Home</span>
      </div>

      <div class="nav-item" onclick="openPayTransferSheet()" data-testid="nav-pay-transfer">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span>Pay & Transfer</span>
      </div>

      <div class="nav-item" onclick="handleDepositCheque()" data-testid="nav-deposit">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
        </svg>
        <span>Deposit a check</span>
      </div>

      <div class="nav-item" data-testid="nav-more">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <span>More</span>
      </div>
    </nav>
  </div>

  <script>
    // Firebase Configuration - Replace with your Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    let db = null;
    let auth = null;

    function initFirebase() {
      try {
        if (firebaseConfig.apiKey !== "YOUR_API_KEY") {
          firebase.initializeApp(firebaseConfig);
          db = firebase.firestore();
          auth = firebase.auth();
          console.log('Firebase initialized successfully');
        } else {
          console.log('Firebase not configured. Using local data.');
        }
      } catch (error) {
        console.log('Firebase initialization error:', error);
      }
    }

    // User data (will be replaced with Firebase data when configured)
    let userData = {
      name: 'Daniel',
      accounts: [
        {
          id: 'checking-6016',
          name: 'Checking Account',
          type: 'Checking',
          lastFour: '6016',
          routingNumber: '071025661',
          availableBalance: 7473.22,
          currentBalance: 7473.22,
          lastDayBalance: 7473.22
        },
        {
          id: 'savings-9460',
          name: 'Savings Account',
          type: 'Savings',
          lastFour: '9460',
          routingNumber: '071025661',
          availableBalance: 2344.49,
          currentBalance: 2344.49,
          lastDayBalance: 2344.49
        },
        {
          id: 'crypto-verification-2310',
          name: 'Crypto & Verification',
          type: 'Checking',
          lastFour: '2310',
          routingNumber: '071025661',
          availableBalance: 0,
          currentBalance: 0,
          lastDayBalance: 0,
          isCrypto: true
        }
      ],
      transactions: [
        { id: 1, name: 'Direct Deposit - Payroll', date: 'Dec 6, 2024', amount: 2500.00, type: 'credit' },
        { id: 2, name: 'Amazon.com', date: 'Dec 5, 2024', amount: -89.99, type: 'debit' },
        { id: 3, name: 'Transfer from Savings', date: 'Dec 4, 2024', amount: 500.00, type: 'credit' },
        { id: 4, name: 'Electric Company', date: 'Dec 3, 2024', amount: -145.50, type: 'debit' },
        { id: 5, name: 'Grocery Store', date: 'Dec 2, 2024', amount: -67.23, type: 'debit' }
      ],
      cards: [],
      contacts: [],
      crypto: {
        btc: {
          balance: 0,
          usdValue: 0
        }
      }
    };

    // Crypto data (will be updated with live data)
    let cryptoData = {
      btc: {
        price: 0,
        change24h: 0,
        changePercent: 0,
        chartData: [],
        lastFetched: null
      }
    };

    // CoinGecko API endpoints (free, no key required)
    const COINGECKO_API = {
      price: 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true',
      chart: 'https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd'
    };

    let btcPriceInterval = null;

    // Fetch live BTC price
    async function fetchBtcPrice() {
      try {
        const response = await fetch(COINGECKO_API.price);
        if (!response.ok) throw new Error('API error');
        const data = await response.json();

        const price = data.bitcoin.usd;
        const changePercent = data.bitcoin.usd_24h_change || 0;
        const change24h = price * (changePercent / 100);

        cryptoData.btc.price = price;
        cryptoData.btc.changePercent = changePercent;
        cryptoData.btc.change24h = change24h;
        cryptoData.btc.lastFetched = Date.now();

        // Update UI if crypto pages are visible
        if (document.getElementById('cryptoListPage').classList.contains('show')) {
          updateCryptoPrices();
        }
        if (document.getElementById('btcDetailPage').classList.contains('show')) {
          updateBTCDetail();
        }

        console.log('BTC price updated:', formatCurrency(price));
        return true;
      } catch (error) {
        console.error('Failed to fetch BTC price:', error);
        // Use fallback values if first fetch fails
        if (cryptoData.btc.price === 0) {
          cryptoData.btc.price = 91257.58;
          cryptoData.btc.changePercent = 2.02;
          cryptoData.btc.change24h = 1815.20;
        }
        return false;
      }
    }

    // Fetch chart data based on timeframe
    async function fetchBtcChartData(timeframe) {
      try {
        let days = '1';
        switch(timeframe) {
          case '1H': days = '1'; break;
          case '1D': days = '1'; break;
          case '1W': days = '7'; break;
          case '1M': days = '30'; break;
          case '1Y': days = '365'; break;
          case 'All': days = 'max'; break;
        }

        const url = COINGECKO_API.chart + '&days=' + days;
        const response = await fetch(url);
        if (!response.ok) throw new Error('Chart API error');
        const data = await response.json();

        let prices = data.prices.map(p => p[1]);

        // For 1H, take last ~12 points (5 min intervals from hourly data)
        if (timeframe === '1H') {
          prices = prices.slice(-12);
        }

        cryptoData.btc.chartData = prices;
        return prices;
      } catch (error) {
        console.error('Failed to fetch chart data:', error);
        return null;
      }
    }

    // Start/stop price refresh interval
    function startBtcPriceRefresh() {
      if (btcPriceInterval) clearInterval(btcPriceInterval);
      fetchBtcPrice();
      btcPriceInterval = setInterval(fetchBtcPrice, 60000); // Refresh every 60 seconds
    }

    function stopBtcPriceRefresh() {
      if (btcPriceInterval) {
        clearInterval(btcPriceInterval);
        btcPriceInterval = null;
      }
    }

    // Current state
    let currentAccountIndex = 0;
    let quickActionsExpanded = false;

    // Toggle quick actions panel
    function toggleQuickActions() {
      quickActionsExpanded = !quickActionsExpanded;

      const card = document.getElementById('quickActionsCard');
      const extra = document.getElementById('quickActionsExtra');
      const btn = document.getElementById('expandArrowBtn');
      const mainContent = document.getElementById('mainContent');

      if (quickActionsExpanded) {
        card.classList.add('expanded');
        extra.classList.add('show');
        btn.classList.add('expanded');
        mainContent.classList.add('expanded');
      } else {
        card.classList.remove('expanded');
        extra.classList.remove('show');
        btn.classList.remove('expanded');
        mainContent.classList.remove('expanded');
      }
    }

    // Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
    }

    function goHome() {
      showPage('homePage');
      updateUI();
    }

    function goBack() {
      goHome();
    }

    function openAccountDetails(accountIndex) {
      const account = userData.accounts[accountIndex];
      if (account.isCrypto) {
        openCryptoListPage();
      } else {
        currentAccountIndex = accountIndex;
        showPage('accountDetailsPage');
        updateAccountDetails();
      }
    }

    function prevAccount() {
      // Only cycle between checking (0) and savings (1), exclude crypto
      currentAccountIndex = currentAccountIndex === 0 ? 1 : 0;
      updateAccountDetails();
    }

    function nextAccount() {
      // Only cycle between checking (0) and savings (1), exclude crypto
      currentAccountIndex = currentAccountIndex === 0 ? 1 : 0;
      updateAccountDetails();
    }

    function updateAccountDetails() {
      const account = userData.accounts[currentAccountIndex];

      document.getElementById('detailsAccountName').textContent = account.name;
      document.getElementById('detailsAccountNumber').textContent = `${account.type} *${account.lastFour}`;
      document.getElementById('detailsBalance').textContent = formatCurrency(account.availableBalance);
      document.getElementById('routingNumber').textContent = account.routingNumber;
      document.getElementById('currentBalance').textContent = formatCurrency(account.currentBalance);
      document.getElementById('lastDayBalance').textContent = formatCurrency(account.lastDayBalance);

      const indicator = document.getElementById('detailsIndicator');
      if (account.type === 'Savings') {
        indicator.classList.add('savings');
      } else {
        indicator.classList.remove('savings');
      }

      renderTransactions();
    }

    function renderTransactions() {
      const list = document.getElementById('transactionsList');
      list.innerHTML = userData.transactions.map(tx => `
        <div class="transaction-item">
          <div class="transaction-info">
            <div class="transaction-name">${tx.name}</div>
            <div class="transaction-date">${tx.date}</div>
          </div>
          <div class="transaction-amount ${tx.amount >= 0 ? 'positive' : 'negative'}">
            ${tx.amount >= 0 ? '+' : ''}${formatCurrency(Math.abs(tx.amount))}
          </div>
        </div>
      `).join('');
    }

    // Transfer Modal
    function openTransferModal() {
      const modal = document.getElementById('transferModal');
      const fromSelect = document.getElementById('fromAccount');
      const toSelect = document.getElementById('toAccount');
      const form = document.getElementById('transferForm');
      const success = document.getElementById('successMessage');

      // Reset modal state
      form.style.display = 'block';
      success.classList.remove('show');
      document.getElementById('transferAmount').value = '';

      // Populate account dropdowns (exclude crypto accounts)
      const nonCryptoAccounts = userData.accounts.filter(acc => !acc.isCrypto);
      fromSelect.innerHTML = nonCryptoAccounts.map((acc, idx) => 
        `<option value="${userData.accounts.indexOf(acc)}" ${userData.accounts.indexOf(acc) === currentAccountIndex ? 'selected' : ''}>${acc.name} (*${acc.lastFour})</option>`
      ).join('');

      toSelect.innerHTML = nonCryptoAccounts.map((acc, idx) => 
        `<option value="${userData.accounts.indexOf(acc)}" ${userData.accounts.indexOf(acc) !== currentAccountIndex ? 'selected' : ''} ${userData.accounts.indexOf(acc) === currentAccountIndex ? 'disabled' : ''}>${acc.name} (*${acc.lastFour})</option>`
      ).join('');

      // Select first non-current account for "to"
      const firstOther = nonCryptoAccounts.find((acc) => userData.accounts.indexOf(acc) !== currentAccountIndex);
      if (firstOther) {
        toSelect.value = userData.accounts.indexOf(firstOther);
      }

      updateTransferInfo();
      modal.classList.add('show');
    }

    function closeTransferModal() {
      document.getElementById('transferModal').classList.remove('show');
    }

    // Pay & Transfer Bottom Sheet
    function openPayTransferSheet() {
      document.getElementById('payTransferSheet').classList.add('show');
    }

    function closePayTransferSheet(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('payTransferSheet').classList.remove('show');
    }

    function handleAccountTransfer() {
      closePayTransferSheet();
      openTransferModal();
    }

    function handleBillPayment() {
      closePayTransferSheet();
      alert('Bill payment feature coming soon!');
    }

    function handleGlobalTransfer() {
      closePayTransferSheet();
      openGlobalTransferPage();
    }

    function handleDepositCheque() {
      closePayTransferSheet();
      document.getElementById('checkDepositAgreementPage').classList.add('show');
    }

    function closeCheckDepositAgreementPage() {
      document.getElementById('checkDepositAgreementPage').classList.remove('show');
    }

    function agreeAndProceedToCheckDeposit() {
      document.getElementById('checkDepositAgreementPage').classList.remove('show');
      // Populate account dropdown
      const select = document.getElementById('checkDepositAccount');
      select.innerHTML = '<option value="">Choose an account</option>';
      userData.accounts.forEach((acc, idx) => {
        if (!acc.isCrypto) {
          select.innerHTML += `<option value="${idx}">${acc.name} *${acc.lastFour}</option>`;
        }
      });
      document.getElementById('checkDepositPage').classList.add('show');
    }

    function closeCheckDepositPage() {
      document.getElementById('checkDepositPage').classList.remove('show');
    }

    function updateTransferInfo() {
      const fromIdx = parseInt(document.getElementById('fromAccount').value);
      const account = userData.accounts[fromIdx];
      document.getElementById('fromAccountBalance').textContent = 
        `Available: ${formatCurrency(account.availableBalance)}`;

      // Update "to" dropdown to disable same account
      const toSelect = document.getElementById('toAccount');
      Array.from(toSelect.options).forEach((opt) => {
        opt.disabled = parseInt(opt.value) === fromIdx;
      });

      // If current "to" selection is same as "from", change it
      if (parseInt(toSelect.value) === fromIdx) {
        const firstOther = userData.accounts.findIndex((acc, idx) => idx !== fromIdx && !acc.isCrypto);
        if (firstOther >= 0) {
          toSelect.value = firstOther;
        }
      }
    }

    function executeTransfer() {
      const fromIdx = parseInt(document.getElementById('fromAccount').value);
      const toIdx = parseInt(document.getElementById('toAccount').value);
      const amount = parseFloat(document.getElementById('transferAmount').value);

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > userData.accounts[fromIdx].availableBalance) {
        alert('Insufficient funds');
        return;
      }

      if (fromIdx === toIdx) {
        alert('Cannot transfer to the same account');
        return;
      }

      // Execute transfer
      userData.accounts[fromIdx].availableBalance -= amount;
      userData.accounts[fromIdx].currentBalance -= amount;
      userData.accounts[toIdx].availableBalance += amount;
      userData.accounts[toIdx].currentBalance += amount;

      // Add transactions
      const today = new Date();
      const dateStr = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

      userData.transactions.unshift({
        id: Date.now(),
        name: `Transfer to ${userData.accounts[toIdx].name}`,
        date: dateStr,
        amount: -amount,
        type: 'debit'
      });

      // Show success
      document.getElementById('transferForm').style.display = 'none';
      document.getElementById('successMessage').classList.add('show');
      document.getElementById('successText').textContent = 
        `${formatCurrency(amount)} has been transferred to ${userData.accounts[toIdx].name}.`;

      // Update UI to reflect new balances
      renderAccountCards();
      updateOverallBalance();
    }

    // Global transfer
    function openGlobalTransferPage() {
      document.getElementById('globalTransferPage').classList.add('show');
    }

    function closeGlobalTransferPage() {
      document.getElementById('globalTransferPage').classList.remove('show');
    }

    function switchGlobalTab(tabName, event) {
      // Update active tab button
      document.querySelectorAll('#globalTransferPage .tab-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      // Show selected tab panel
      document.getElementById('tabOverview').style.display = tabName === 'overview' ? 'block' : 'none';
      document.getElementById('tabHistory').style.display = tabName === 'history' ? 'block' : 'none';
      document.getElementById('tabManage').style.display = tabName === 'manage' ? 'block' : 'none';
    }

    // Global contacts storage
    let globalContacts = [];
    let selectedGlobalContact = null;

    function openAddContactPage() {
      // Clear form
      document.getElementById('contactName').value = '';
      document.getElementById('contactBankName').value = '';
      document.getElementById('contactAccountNumber').value = '';
      document.getElementById('contactAddress').value = '';
      document.getElementById('contactBankAddress').value = '';
      document.getElementById('contactRoutingSwift').value = '';
      document.getElementById('contactCountry').value = '';
      document.getElementById('addContactPage').classList.add('show');
    }

    function closeAddContactPage() {
      document.getElementById('addContactPage').classList.remove('show');
    }

    function saveContact() {
      const name = document.getElementById('contactName').value.trim();
      const bankName = document.getElementById('contactBankName').value.trim();
      const accountNumber = document.getElementById('contactAccountNumber').value.trim();
      const address = document.getElementById('contactAddress').value.trim();
      const bankAddress = document.getElementById('contactBankAddress').value.trim();
      const routingSwift = document.getElementById('contactRoutingSwift').value.trim();
      const country = document.getElementById('contactCountry').value;

      if (!name || !bankName || !accountNumber || !country) {
        alert('Please fill in all required fields (Name, Bank Name, Account Number, Country)');
        return;
      }

      const contact = {
        id: Date.now(),
        name,
        bankName,
        accountNumber,
        address,
        bankAddress,
        routingSwift,
        country
      };

      globalContacts.push(contact);
      closeAddContactPage();
      updateContactsDisplay();
    }

    function updateContactsDisplay() {
      const emptyState = document.getElementById('contactsEmptyState');
      const contactsList = document.getElementById('contactsList');
      const savedContactsList = document.getElementById('savedContactsList');

      if (globalContacts.length === 0) {
        emptyState.style.display = 'block';
        contactsList.style.display = 'none';
      } else {
        emptyState.style.display = 'none';
        contactsList.style.display = 'block';

        savedContactsList.innerHTML = globalContacts.map(contact => `
          <div onclick="selectContactForTransfer(${contact.id})" style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e8ecf0; cursor: pointer; transition: all 0.2s;" data-testid="contact-card-${contact.id}">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div style="font-size: 16px; font-weight: 600; color: #111827;">${contact.name}</div>
                <div style="font-size: 14px; color: #6b7280;">${contact.bankName}</div>
                <div style="font-size: 13px; color: #9ca3af;">${contact.country}</div>
              </div>
              <svg style="width: 20px; height: 20px; color: #6b7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </div>
        `).join('');
      }
    }

    function selectContactForTransfer(contactId) {
      selectedGlobalContact = globalContacts.find(c => c.id === contactId);
      if (!selectedGlobalContact) return;

      // Update transfer page with contact info
      document.getElementById('globalTransferRecipientName').textContent = selectedGlobalContact.name;
      document.getElementById('globalTransferRecipientBank').textContent = selectedGlobalContact.bankName;
      document.getElementById('globalTransferRecipientCountry').textContent = selectedGlobalContact.country;

      // Update balance display
      const checkingAccount = userData.accounts[0];
      document.getElementById('globalTransferAccountLast4').textContent = checkingAccount.lastFour;
      document.getElementById('globalTransferAvailableBalance').textContent = formatCurrency(checkingAccount.availableBalance);

      // Clear amount
      document.getElementById('globalTransferAmount').value = '';

      document.getElementById('globalTransferAmountPage').classList.add('show');
    }

    function closeGlobalTransferAmountPage() {
      document.getElementById('globalTransferAmountPage').classList.remove('show');
    }

    function executeGlobalTransfer() {
      const amount = parseFloat(document.getElementById('globalTransferAmount').value);
      const checkingAccount = userData.accounts[0];

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > checkingAccount.availableBalance) {
        alert('Insufficient funds. Your available balance is ' + formatCurrency(checkingAccount.availableBalance));
        return;
      }

      // Deduct from checking account
      checkingAccount.availableBalance -= amount;
      checkingAccount.currentBalance -= amount;

      // Add transaction
      const today = new Date();
      const dateStr = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = today.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });

      userData.transactions.unshift({
        id: Date.now(),
        name: `Global Transfer to ${selectedGlobalContact.name}`,
        date: dateStr,
        amount: -amount,
        type: 'debit'
      });

      // Show success page
      document.getElementById('globalTransferSuccessAmount').textContent = formatCurrency(amount);
      document.getElementById('globalSuccessRecipient').textContent = selectedGlobalContact.name;
      document.getElementById('globalSuccessBank').textContent = selectedGlobalContact.bankName;
      document.getElementById('globalSuccessCountry').textContent = selectedGlobalContact.country;
      document.getElementById('globalSuccessFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('globalSuccessDateTime').textContent = `${dateStr} ${timeStr}`;
      document.getElementById('globalSuccessNewBalance').textContent = formatCurrency(checkingAccount.availableBalance);
      document.getElementById('globalSuccessRef').textContent = 'Reference: GT-' + Date.now();

      closeGlobalTransferAmountPage();
      document.getElementById('globalTransferSuccessPage').classList.add('show');

      // Update UI
      renderAccounts();
    }

    function closeGlobalTransferSuccessPage() {
      document.getElementById('globalTransferSuccessPage').classList.remove('show');
      closeGlobalTransferPage();
    }

    // Currency formatting
    function formatCurrency(amount) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD'
      }).format(amount);
    }

    // Update overall balance display
    function updateOverallBalance() {
      const total = userData.accounts.reduce((sum, acc) => sum + acc.availableBalance, 0);
      document.getElementById('overallBalance').textContent = formatCurrency(total);
    }

    // Update date display
    function updateDateTime() {
      const now = new Date();
      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

      const dayName = days[now.getDay()];
      const monthName = months[now.getMonth()];
      const date = now.getDate();
      const year = now.getFullYear();

      document.getElementById('currentDateTime').textContent = `Today is ${dayName}, ${monthName} ${date}, ${year}.`;
    }

    // Update greeting based on time
    function updateGreeting() {
      const hour = new Date().getHours();
      let greeting = 'morning';
      if (hour >= 12 && hour < 17) greeting = 'afternoon';
      else if (hour >= 17) greeting = 'evening';
      document.getElementById('timeOfDay').textContent = greeting;
    }

    // Update UI
    function updateUI() {
      document.getElementById('userName').textContent = userData.name;
      renderAccountCards();
      updateOverallBalance();
    }

    // Render account cards
    function renderAccountCards() {
      const container = document.getElementById('depositsContent');
      container.innerHTML = userData.accounts.map((account, index) => `
        <div class="account-card" onclick="openAccountDetails(${index})" data-testid="account-card-${index}">
          <div class="account-header">
            <div class="account-info">
              <div class="account-name">${account.name}</div>
              <div class="account-indicator ${account.type === 'Savings' ? 'savings' : ''}"></div>
              <div class="account-number">${account.type} *${account.lastFour}</div>
            </div>
            <div class="account-balance-section">
              <div class="account-balance-label">Available</div>
              <div class="account-balance">${formatCurrency(account.availableBalance)}</div>
            </div>
            <div class="account-menu">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
              </svg>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Toggle section
    function toggleSection(section) {
      // Could add collapse functionality here
    }

    // ========== CARD MANAGEMENT ==========
    let savedCards = [];
    let selectedCardType = 'debit';
    let selectedCardNetwork = 'visa';
    let selectedCardForAddMoney = null;
    let addMoneyAmountValue = '';

    // Load saved cards from storage (localStorage fallback, Firestore when available)
    async function loadSavedCards() {
      // Try Firestore first if configured
      if (db && auth && auth.currentUser) {
        try {
          const snapshot = await db.collection('users').doc(auth.currentUser.uid).collection('cards').get();
          savedCards = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
          console.log('Cards loaded from Firestore:', savedCards.length);
          return;
        } catch (error) {
          console.error('Error loading cards from Firestore:', error);
        }
      }
      
      // Fallback to localStorage
      try {
        const stored = localStorage.getItem('leadcu_saved_cards');
        if (stored) {
          savedCards = JSON.parse(stored);
          console.log('Cards loaded from localStorage:', savedCards.length);
        }
      } catch (error) {
        console.error('Error loading cards from localStorage:', error);
        savedCards = [];
      }
    }

    // Save cards to storage
    async function persistCards() {
      // Save to localStorage as backup
      try {
        localStorage.setItem('leadcu_saved_cards', JSON.stringify(savedCards));
      } catch (error) {
        console.error('Error saving to localStorage:', error);
      }
    }

    // Save a single card to Firestore
    async function saveCardToFirestore(card) {
      if (db && auth && auth.currentUser) {
        try {
          await db.collection('users').doc(auth.currentUser.uid).collection('cards').doc(card.id.toString()).set({
            holderName: card.holderName,
            number: card.number,
            expiry: card.expiry,
            type: card.type,
            network: card.network,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
          console.log('Card saved to Firestore');
          return true;
        } catch (error) {
          console.error('Error saving card to Firestore:', error);
          return false;
        }
      }
      return false;
    }

    // Manage Cards Page
    function openManageCardsPage() {
      document.getElementById('manageCardsPage').classList.add('show');
      updateSavedCardsDisplay();
    }

    function closeManageCardsPage() {
      document.getElementById('manageCardsPage').classList.remove('show');
    }

    function updateSavedCardsDisplay() {
      const emptyState = document.getElementById('cardsEmptyState');
      const cardsList = document.getElementById('savedCardsList');

      if (savedCards.length === 0) {
        emptyState.style.display = 'flex';
        cardsList.style.display = 'none';
      } else {
        emptyState.style.display = 'none';
        cardsList.style.display = 'block';
        cardsList.innerHTML = savedCards.map(card => `
          <div class="saved-card-item">
            <div class="saved-card-top">
              <div class="saved-card-chip"></div>
              <div class="saved-card-type-badge">${card.type}</div>
            </div>
            <div class="saved-card-number-display">${maskCardNumber(card.number)}</div>
            <div class="saved-card-bottom">
              <div class="saved-card-holder">${card.holderName}</div>
              <div class="saved-card-network-display">${card.network.toUpperCase()}</div>
            </div>
          </div>
        `).join('');
      }
    }

    function maskCardNumber(number) {
      const clean = number.replace(/\s/g, '');
      const last4 = clean.slice(-4);
      return `**** **** **** ${last4}`;
    }

    // Add Card Page
    function openAddCardPage() {
      // Reset form
      document.getElementById('cardHolderName').value = '';
      document.getElementById('cardNumber').value = '';
      document.getElementById('cardExpiry').value = '';
      document.getElementById('cardCvv').value = '';
      selectedCardType = 'debit';
      selectedCardNetwork = 'visa';
      
      // Reset type buttons
      document.getElementById('btnDebit').classList.add('active');
      document.getElementById('btnCredit').classList.remove('active');
      
      // Reset network buttons
      document.getElementById('btnVisa').classList.add('active');
      document.getElementById('btnMastercard').classList.remove('active');
      document.getElementById('btnAmex').classList.remove('active');
      
      // Reset preview
      updateCardPreview();
      
      document.getElementById('addCardPage').classList.add('show');
    }

    function closeAddCardPage() {
      document.getElementById('addCardPage').classList.remove('show');
    }

    function selectCardType(type) {
      selectedCardType = type;
      document.getElementById('btnDebit').classList.toggle('active', type === 'debit');
      document.getElementById('btnCredit').classList.toggle('active', type === 'credit');
      document.getElementById('previewCardType').textContent = type.toUpperCase();
    }

    function selectCardNetwork(network) {
      selectedCardNetwork = network;
      document.getElementById('btnVisa').classList.toggle('active', network === 'visa');
      document.getElementById('btnMastercard').classList.toggle('active', network === 'mastercard');
      document.getElementById('btnAmex').classList.toggle('active', network === 'amex');
      
      const networkDisplay = {
        'visa': 'VISA',
        'mastercard': 'Mastercard',
        'amex': 'AMEX'
      };
      document.getElementById('previewCardNetwork').textContent = networkDisplay[network];
    }

    function formatCardNumber(input) {
      let value = input.value.replace(/\s/g, '').replace(/\D/g, '');
      let formatted = value.match(/.{1,4}/g)?.join(' ') || '';
      input.value = formatted;
    }

    function formatExpiry(input) {
      let value = input.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.substring(0, 2) + '/' + value.substring(2, 4);
      }
      input.value = value;
    }

    function updateCardPreview() {
      const holderName = document.getElementById('cardHolderName').value || 'YOUR NAME';
      const cardNumber = document.getElementById('cardNumber').value || '**** **** **** ****';
      const expiry = document.getElementById('cardExpiry').value || 'MM/YY';
      
      document.getElementById('previewCardHolder').textContent = holderName.toUpperCase();
      document.getElementById('previewCardNumber').textContent = cardNumber || '**** **** **** ****';
      document.getElementById('previewCardExpiry').textContent = expiry;
    }

    async function saveCard() {
      const holderName = document.getElementById('cardHolderName').value.trim();
      const cardNumber = document.getElementById('cardNumber').value.trim();
      const expiry = document.getElementById('cardExpiry').value.trim();
      const cvv = document.getElementById('cardCvv').value.trim();

      if (!holderName || !cardNumber || !expiry || !cvv) {
        alert('Please fill in all card details');
        return;
      }

      if (cardNumber.replace(/\s/g, '').length < 15) {
        alert('Please enter a valid card number');
        return;
      }

      const card = {
        id: Date.now(),
        holderName,
        number: cardNumber,
        expiry,
        type: selectedCardType,
        network: selectedCardNetwork
      };

      savedCards.push(card);
      
      // Persist to storage
      await saveCardToFirestore(card);
      await persistCards();
      
      closeAddCardPage();
      updateSavedCardsDisplay();
    }

    // Add Money Page - Card Selection
    function openAddMoneyPage() {
      document.getElementById('addMoneySelectCardPage').classList.add('show');
      updateAddMoneyCardsList();
    }

    function closeAddMoneySelectCardPage() {
      document.getElementById('addMoneySelectCardPage').classList.remove('show');
    }

    function updateAddMoneyCardsList() {
      const cardsList = document.getElementById('addMoneyCardsList');
      const noCards = document.getElementById('addMoneyNoCards');

      if (savedCards.length === 0) {
        cardsList.style.display = 'none';
        noCards.style.display = 'block';
      } else {
        cardsList.style.display = 'block';
        noCards.style.display = 'none';
        cardsList.innerHTML = savedCards.map(card => `
          <div class="add-money-card-option" onclick="selectCardForAddMoney(${card.id})">
            <div class="add-money-card-mini">
              <div class="add-money-card-mini-chip"></div>
            </div>
            <div class="add-money-card-details">
              <div class="add-money-card-network">${card.network.toUpperCase()}</div>
              <div class="add-money-card-number">${maskCardNumber(card.number)}</div>
            </div>
            <svg class="add-money-card-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        `).join('');
      }
    }

    function selectCardForAddMoney(cardId) {
      selectedCardForAddMoney = savedCards.find(c => c.id === cardId);
      if (!selectedCardForAddMoney) return;
      
      closeAddMoneySelectCardPage();
      openAddMoneyAmountPage();
    }

    // Add Money Amount Page
    function openAddMoneyAmountPage() {
      addMoneyAmountValue = '';
      document.getElementById('addMoneyAmountDisplay').textContent = '$0';
      document.getElementById('addMoneyAmountPage').classList.add('show');
    }

    function closeAddMoneyAmountPage() {
      document.getElementById('addMoneyAmountPage').classList.remove('show');
    }

    function addMoneyNumpadPress(key) {
      if (key === '.' && addMoneyAmountValue.includes('.')) return;
      if (addMoneyAmountValue.includes('.') && addMoneyAmountValue.split('.')[1]?.length >= 2) return;
      
      addMoneyAmountValue += key;
      updateAddMoneyDisplay();
    }

    function addMoneyNumpadDelete() {
      addMoneyAmountValue = addMoneyAmountValue.slice(0, -1);
      updateAddMoneyDisplay();
    }

    function updateAddMoneyDisplay() {
      const value = parseFloat(addMoneyAmountValue) || 0;
      document.getElementById('addMoneyAmountDisplay').textContent = '$' + (addMoneyAmountValue || '0');
    }

    function processAddMoney() {
      const amount = parseFloat(addMoneyAmountValue);
      if (!amount || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      // Close amount page
      closeAddMoneyAmountPage();
      
      // Show error banner
      showErrorBanner();
    }

    function showErrorBanner() {
      document.getElementById('errorBanner').classList.add('show');
      
      // Auto-hide after 5 seconds
      setTimeout(() => {
        closeErrorBanner();
      }, 5000);
    }

    function closeErrorBanner() {
      document.getElementById('errorBanner').classList.remove('show');
    }

    function closeTryAgainPage() {
      document.getElementById('tryAgainPage').classList.remove('show');
    }

    function handleLogout() {
      if (auth) {
        auth.signOut().then(() => {
          alert('Logged out successfully');
        });
      } else {
        alert('Logged out');
      }
    }

    // ========== PAY BILLS ==========
    const billTypes = {
      electric: { name: 'Electric', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>', class: 'electric' },
      water: { name: 'Water', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c0 4.5-6 7.5-6 12a6 6 0 1012 0c0-4.5-6-7.5-6-12z"/></svg>', class: 'water' },
      internet: { name: 'Internet', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/></svg>', class: 'internet' },
      phone: { name: 'Phone', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>', class: 'phone' },
      gas: { name: 'Gas', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/></svg>', class: 'gas' },
      tv: { name: 'TV/Cable', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>', class: 'tv' },
      insurance: { name: 'Insurance', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>', class: 'insurance' },
      other: { name: 'Other', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>', class: 'other' }
    };

    let billPaymentData = {
      type: '',
      typeName: '',
      companyName: '',
      accountNumber: '',
      amount: 0
    };

    function openBillsPage() {
      document.getElementById('billsPage').classList.add('show');
    }

    function closeBillsPage() {
      document.getElementById('billsPage').classList.remove('show');
    }

    function openBillPaymentPage(billType) {
      const bill = billTypes[billType];
      billPaymentData.type = billType;
      billPaymentData.typeName = bill.name;

      // Update header
      document.getElementById('billPaymentTitle').textContent = 'Pay ' + bill.name + ' Bill';
      document.getElementById('billPaymentType').textContent = bill.name + ' Bill';

      // Set icon
      const iconEl = document.getElementById('billPaymentIcon');
      iconEl.className = 'bill-type-header-icon bill-type-icon ' + bill.class;
      iconEl.innerHTML = bill.icon;

      // Clear form
      document.getElementById('billCompanyName').value = '';
      document.getElementById('billAccountNumber').value = '';
      document.getElementById('billPaymentAmount').value = '';

      // Update balance display
      const checkingAccount = userData.accounts[0];
      document.getElementById('billPaymentAccountLast4').textContent = checkingAccount.lastFour;
      document.getElementById('billPaymentBalance').textContent = formatCurrency(checkingAccount.availableBalance);

      // Close bills page and open payment page
      document.getElementById('billsPage').classList.remove('show');
      document.getElementById('billPaymentPage').classList.add('show');
    }

    function closeBillPaymentPage() {
      document.getElementById('billPaymentPage').classList.remove('show');
      billPaymentData = { type: '', typeName: '', companyName: '', accountNumber: '', amount: 0 };
    }

    function proceedToBillConfirmation() {
      const companyName = document.getElementById('billCompanyName').value.trim();
      const accountNumber = document.getElementById('billAccountNumber').value.trim();
      const amount = parseFloat(document.getElementById('billPaymentAmount').value);
      const checkingAccount = userData.accounts[0];

      // Validation
      if (!companyName) {
        alert('Please enter a company or biller name');
        return;
      }

      if (!accountNumber) {
        alert('Please enter an account number');
        return;
      }

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > checkingAccount.availableBalance) {
        alert('Insufficient funds. Your available balance is ' + formatCurrency(checkingAccount.availableBalance));
        return;
      }

      // Store payment data
      billPaymentData.companyName = companyName;
      billPaymentData.accountNumber = accountNumber;
      billPaymentData.amount = amount;

      // Update confirmation page
      document.getElementById('confirmBillType').textContent = billPaymentData.typeName;
      document.getElementById('confirmBillCompany').textContent = companyName;
      document.getElementById('confirmBillAccount').textContent = '****' + accountNumber.slice(-4);
      document.getElementById('confirmBillFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('confirmBillAmount').textContent = formatCurrency(amount);

      // Close payment page and show confirmation
      document.getElementById('billPaymentPage').classList.remove('show');
      document.getElementById('billConfirmPage').classList.add('show');
    }

    function closeBillConfirmPage() {
      document.getElementById('billConfirmPage').classList.remove('show');
    }

    function cancelBillPayment() {
      document.getElementById('billConfirmPage').classList.remove('show');
      billPaymentData = { type: '', typeName: '', companyName: '', accountNumber: '', amount: 0 };
    }

    function executeBillPayment() {
      const checkingAccount = userData.accounts[0];
      const amount = billPaymentData.amount;

      // Deduct from checking account
      checkingAccount.availableBalance -= amount;
      checkingAccount.currentBalance -= amount;

      // Create transaction record
      const now = new Date();
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
      const referenceId = 'BP-' + Date.now();

      const transaction = {
        id: Date.now(),
        name: billPaymentData.typeName + ' Bill - ' + billPaymentData.companyName,
        date: dateStr,
        amount: -amount,
        type: 'debit',
        reference: referenceId
      };

      // Add to transactions (at the beginning)
      userData.transactions.unshift(transaction);

      // Update receipt page
      document.getElementById('billReceiptAmount').textContent = formatCurrency(amount);
      document.getElementById('billReceiptType').textContent = billPaymentData.typeName;
      document.getElementById('billReceiptCompany').textContent = billPaymentData.companyName;
      document.getElementById('billReceiptAccount').textContent = '****' + billPaymentData.accountNumber.slice(-4);
      document.getElementById('billReceiptFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('billReceiptDateTime').textContent = dateStr + ' ' + timeStr;
      document.getElementById('billReceiptNewBalance').textContent = formatCurrency(checkingAccount.availableBalance);
      document.getElementById('billReceiptRef').textContent = 'Reference: ' + referenceId;

      // Close confirmation and show receipt
      document.getElementById('billConfirmPage').classList.remove('show');
      document.getElementById('billReceiptPage').classList.add('show');

      // Reset payment data
      billPaymentData = { type: '', typeName: '', companyName: '', accountNumber: '', amount: 0 };
    }

    function closeBillReceiptPage() {
      document.getElementById('billReceiptPage').classList.remove('show');
      updateUI();
      goHome();
    }

    // ========== LEAD TRANSFER ==========
    let leadTransferData = {
      toAccount: '',
      amount: 0
    };

    function openLeadTransferPage() {
      document.getElementById('leadTransferPage').classList.add('show');
      document.getElementById('leadTransferAccount').value = '';
      document.getElementById('leadTransferAmount').value = '';

      // Update balance display with checking account (first account)
      const checkingAccount = userData.accounts[0];
      document.getElementById('leadTransferAccountLast4').textContent = checkingAccount.lastFour;
      document.getElementById('leadTransferBalance').textContent = formatCurrency(checkingAccount.availableBalance);
    }

    function closeLeadTransferPage() {
      document.getElementById('leadTransferPage').classList.remove('show');
    }

    function proceedToConfirmation() {
      const toAccount = document.getElementById('leadTransferAccount').value.trim();
      const amount = parseFloat(document.getElementById('leadTransferAmount').value);
      const checkingAccount = userData.accounts[0];

      // Validation
      if (!toAccount) {
        alert('Please enter a recipient account number');
        return;
      }

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > checkingAccount.availableBalance) {
        alert('Insufficient funds. Your available balance is ' + formatCurrency(checkingAccount.availableBalance));
        return;
      }

      // Store transfer data
      leadTransferData.toAccount = toAccount;
      leadTransferData.amount = amount;

      // Update confirmation page
      const maskedAccount = '****' + toAccount.slice(-4);
      document.getElementById('confirmToAccount').textContent = maskedAccount;
      document.getElementById('confirmFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('confirmAmount').textContent = formatCurrency(amount);

      // Close input page and show confirmation
      document.getElementById('leadTransferPage').classList.remove('show');
      document.getElementById('leadTransferConfirmPage').classList.add('show');
    }

    function closeLeadTransferConfirmPage() {
      document.getElementById('leadTransferConfirmPage').classList.remove('show');
    }

    function cancelLeadTransfer() {
      document.getElementById('leadTransferConfirmPage').classList.remove('show');
      leadTransferData = { toAccount: '', amount: 0 };
    }

    function executeLeadTransfer() {
      const checkingAccount = userData.accounts[0];
      const amount = leadTransferData.amount;
      const toAccount = leadTransferData.toAccount;

      // Deduct from checking account
      checkingAccount.availableBalance -= amount;
      checkingAccount.currentBalance -= amount;

      // Create transaction record
      const now = new Date();
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
      const referenceId = 'LT-' + Date.now();

      const transaction = {
        id: Date.now(),
        name: 'Lead Transfer to ****' + toAccount.slice(-4),
        date: dateStr,
        amount: -amount,
        type: 'debit',
        reference: referenceId
      };

      // Add to transactions (at the beginning)
      userData.transactions.unshift(transaction);

      // Update receipt page
      const maskedAccount = '****' + toAccount.slice(-4);
      document.getElementById('receiptAmount').textContent = formatCurrency(amount);
      document.getElementById('receiptToAccount').textContent = maskedAccount;
      document.getElementById('receiptFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('receiptDateTime').textContent = dateStr + ' ' + timeStr;
      document.getElementById('receiptNewBalance').textContent = formatCurrency(checkingAccount.availableBalance);
      document.getElementById('receiptRef').textContent = 'Reference: ' + referenceId;

      // Close confirmation and show receipt
      document.getElementById('leadTransferConfirmPage').classList.remove('show');
      document.getElementById('leadTransferReceiptPage').classList.add('show');

      // Reset transfer data
      leadTransferData = { toAccount: '', amount: 0 };
    }

    function closeLeadTransferReceiptPage() {
      document.getElementById('leadTransferReceiptPage').classList.remove('show');
      updateUI();
      goHome();
    }

    // ========== CRYPTO FUNCTIONS ==========
    function openCryptoListPage() {
      document.getElementById('cryptoListPage').classList.add('show');
      startBtcPriceRefresh();
      updateCryptoPrices();
    }

    function closeCryptoListPage() {
      document.getElementById('cryptoListPage').classList.remove('show');
      stopBtcPriceRefresh();
    }

    async function openBTCDetailPage() {
      document.getElementById('cryptoListPage').classList.remove('show');
      document.getElementById('btcDetailPage').classList.add('show');
      startBtcPriceRefresh();
      updateBTCDetail();

      // Fetch live chart data
      const chartData = await fetchBtcChartData('1D');
      drawBTCChart(chartData);
    }

    function closeBTCDetailPage() {
      document.getElementById('btcDetailPage').classList.remove('show');
      openCryptoListPage();
    }

    function updateCryptoPrices() {
      document.getElementById('btcListPrice').textContent = formatCurrency(cryptoData.btc.price);
      const changeText = cryptoData.btc.changePercent >= 0 ? '+' + cryptoData.btc.changePercent.toFixed(2) + '%' : cryptoData.btc.changePercent.toFixed(2) + '%';
      document.getElementById('btcListChange').textContent = changeText;
      document.getElementById('btcListChange').className = 'crypto-change' + (cryptoData.btc.changePercent < 0 ? ' negative' : '');
    }

    function updateBTCDetail() {
      document.getElementById('btcMainPrice').textContent = formatCurrency(cryptoData.btc.price);
      const arrow = cryptoData.btc.changePercent >= 0 ? '' : '';
      const changeText = arrow + ' ' + formatCurrency(Math.abs(cryptoData.btc.change24h)) + ' (' + (cryptoData.btc.changePercent >= 0 ? '+' : '') + cryptoData.btc.changePercent.toFixed(2) + '%)';
      document.getElementById('btcPriceChange').textContent = changeText;
      document.getElementById('btcPriceChange').className = 'crypto-price-change' + (cryptoData.btc.changePercent < 0 ? ' negative' : '');

      // Update holdings
      document.getElementById('btcHoldingsAmount').textContent = userData.crypto.btc.balance.toFixed(8) + ' BTC';
      document.getElementById('btcHoldingsUsd').textContent = formatCurrency(userData.crypto.btc.usdValue);
    }

    function drawBTCChart(liveData) {
      const canvas = document.getElementById('btcChart');
      const ctx = canvas.getContext('2d');

      // Set canvas size
      canvas.width = canvas.offsetWidth * 2;
      canvas.height = canvas.offsetHeight * 2;
      ctx.scale(2, 2);

      const width = canvas.offsetWidth;
      const height = canvas.offsetHeight;

      // Use live data if available, otherwise generate sample
      let points;
      if (liveData && liveData.length > 0) {
        points = liveData;
      } else if (cryptoData.btc.chartData && cryptoData.btc.chartData.length > 0) {
        points = cryptoData.btc.chartData;
      } else {
        // Fallback: generate sample data
        points = [];
        let price = cryptoData.btc.price || 91000;
        for (let i = 0; i < 50; i++) {
          price += (Math.random() - 0.48) * 500;
          points.push(price);
        }
      }

      // Normalize points
      const minPrice = Math.min(...points);
      const maxPrice = Math.max(...points);
      const priceRange = maxPrice - minPrice || 1;

      // Determine color based on price trend
      const isPositive = points[points.length - 1] >= points[0];
      const lineColor = isPositive ? '#16a34a' : '#dc2626';
      const gradientColor = isPositive ? 'rgba(22, 163, 74,' : 'rgba(220, 38, 38,';

      // Clear canvas
      ctx.clearRect(0, 0, width, height);

      // Draw line
      ctx.beginPath();
      ctx.strokeStyle = lineColor;
      ctx.lineWidth = 2;

      points.forEach((point, index) => {
        const x = (index / (points.length - 1)) * width;
        const y = height - ((point - minPrice) / priceRange) * (height - 20) - 10;

        if (index === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      });

      ctx.stroke();

      // Draw gradient fill
      const gradient = ctx.createLinearGradient(0, 0, 0, height);
      gradient.addColorStop(0, gradientColor + '0.2)');
      gradient.addColorStop(1, gradientColor + '0)');

      ctx.lineTo(width, height);
      ctx.lineTo(0, height);
      ctx.closePath();
      ctx.fillStyle = gradient;
      ctx.fill();
    }

    async function setChartTimeframe(timeframe) {
      document.querySelectorAll('.chart-time-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent === timeframe) {
          btn.classList.add('active');
        }
      });

      // Fetch live data for selected timeframe
      const chartData = await fetchBtcChartData(timeframe);
      drawBTCChart(chartData);
    }

    function switchCryptoTab(tabName) {
      document.querySelectorAll('.crypto-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.crypto-tab-content').forEach(content => content.classList.remove('active'));

      event.target.classList.add('active');

      if (tabName === 'holdings') {
        document.getElementById('cryptoHoldingsTab').classList.add('active');
      } else if (tabName === 'history') {
        document.getElementById('cryptoHistoryTab').classList.add('active');
      } else if (tabName === 'about') {
        document.getElementById('cryptoAboutTab').classList.add('active');
      }
    }

    function handleCryptoReceive() {
      alert('Receive BTC feature - Please share your wallet address to receive Bitcoin');
    }

    function handleCryptoSell() {
      alert('Sell BTC feature - You currently have ' + userData.crypto.btc.balance.toFixed(8) + ' BTC to sell');
    }

    // Initialize app
    async function init() {
      initFirebase();
      updateGreeting();
      updateDateTime();
      updateUI();
      
      // Load saved cards from storage
      await loadSavedCards();

      // Check for auth state changes
      if (auth) {
        auth.onAuthStateChanged(async (user) => {
          if (user) {
            // loadUserData(user.uid);
            // Reload cards when user signs in (to get Firestore data)
            await loadSavedCards();
          }
        });
      }
    }

    // Run initialization when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>