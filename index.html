<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <title>LEADCU BANK</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

  <style>
    /* Landing Page Styles */
    .landing-page {
      min-height: 100vh;
      background: #f8fafc;
    }

    .landing-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    .landing-logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .landing-logo-icon {
      width: 32px;
      height: 32px;
      background: #dc2626;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }

    .landing-logo-text {
      font-size: 20px;
      font-weight: 700;
      color: #1a6bb3;
    }

    .landing-signin-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 20px;
      background: white;
      border: 2px solid #1a6bb3;
      color: #1a6bb3;
      font-size: 13px;
      font-weight: 600;
      border-radius: 4px;
      cursor: pointer;
    }

    .landing-menu-btn {
      padding: 8px;
      background: transparent;
      border: none;
      color: #374151;
      cursor: pointer;
    }

    .landing-fdic {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 16px;
      background: #f3f4f6;
      font-size: 11px;
      color: #4b5563;
    }

    .landing-hero {
      background: linear-gradient(180deg, #1a6bb3 0%, #0d4a7c 100%);
      padding: 40px 20px;
      display: flex;
      justify-content: center;
    }

    .hero-phone {
      width: 200px;
      height: 300px;
      background: white;
      border-radius: 24px;
      padding: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    .phone-screen {
      background: linear-gradient(180deg, #1a6bb3 0%, #2d8fd4 100%);
      border-radius: 16px;
      height: 100%;
      padding: 16px;
      color: white;
    }

    .phone-header {
      margin-bottom: 20px;
    }

    .phone-greeting {
      font-size: 12px;
      opacity: 0.9;
    }

    .phone-user {
      font-size: 16px;
      font-weight: 600;
    }

    .phone-balance {
      background: rgba(255,255,255,0.15);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
    }

    .balance-label {
      font-size: 10px;
      opacity: 0.8;
      margin-bottom: 4px;
    }

    .balance-amount {
      font-size: 22px;
      font-weight: 700;
    }

    .phone-accounts {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .phone-account {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      padding: 8px 12px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
    }

    .landing-content {
      padding: 32px 20px;
      text-align: center;
    }

    .landing-headline {
      font-size: 24px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 12px;
      line-height: 1.3;
    }

    .landing-subtext {
      font-size: 15px;
      color: #6b7280;
      margin-bottom: 24px;
      line-height: 1.5;
    }

    .landing-cta-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 16px;
    }

    .landing-signin-link {
      font-size: 14px;
      color: #6b7280;
    }

    .landing-signin-link a {
      color: #1a6bb3;
      font-weight: 600;
      text-decoration: none;
    }

    .landing-features {
      padding: 32px 20px;
      background: white;
    }

    .features-title {
      font-size: 12px;
      color: #6b7280;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .features-headline {
      font-size: 22px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 20px;
    }

    .feature-tabs {
      display: flex;
      gap: 24px;
      margin-bottom: 24px;
      border-bottom: 2px solid #e5e7eb;
    }

    .feature-tab {
      padding-bottom: 12px;
      font-size: 14px;
      color: #6b7280;
      cursor: pointer;
    }

    .feature-tab.active {
      color: #1a6bb3;
      border-bottom: 2px solid #1a6bb3;
      margin-bottom: -2px;
      font-weight: 600;
    }

    .feature-card {
      background: #f8fafc;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .feature-icon {
      margin-bottom: 12px;
    }

    .feature-card-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .feature-card-text {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .feature-link {
      color: #1a6bb3;
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
    }

    .landing-footer {
      background: #1a6bb3;
      padding: 24px 20px;
      text-align: center;
      color: white;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-bottom: 16px;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
      font-size: 13px;
    }

    .footer-copyright {
      font-size: 12px;
      opacity: 0.8;
    }

    /* Verification Banner */
    .verification-banner {
      background: #fef3c7;
      border: 1px solid #fcd34d;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 12px;
      display: none;
      flex-direction: column;
      gap: 8px;
    }

    .verification-banner.show {
      display: flex;
    }

    .verification-banner-header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .verification-banner-icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      color: #d97706;
      margin-top: 2px;
    }

    .verification-banner-content {
      flex: 1;
    }

    .verification-banner-title {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 2px;
    }

    .verification-banner-text {
      font-size: 12px;
      color: #6b7280;
    }

    .verification-banner-action {
      display: flex;
      gap: 8px;
      margin-left: 32px;
    }

    .verification-banner-btn {
      font-size: 12px;
      font-weight: 600;
      color: #d97706;
      background: transparent;
      border: 1px solid #fcd34d;
      border-radius: 4px;
      cursor: pointer;
      padding: 6px 12px;
      transition: all 0.2s;
    }

    .verification-banner-btn:hover {
      background: #fef3c7;
      border-color: #d97706;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f0f4f8;
      min-height: 100vh;
      padding-bottom: 80px;
    }

    /* Page Views */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* Header Section */
    .header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 50%, #2d8fd4 100%);
      color: white;
      padding: 16px 20px 140px;
      position: relative;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-text {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      background: #dc2626;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-icon svg {
      width: 20px;
      height: 20px;
      fill: white;
    }

    .header-icons {
      display: flex;
      gap: 20px;
    }

    .header-icon {
      width: 26px;
      height: 26px;
      cursor: pointer;
      opacity: 0.95;
      transition: opacity 0.2s;
    }

    .header-icon:hover {
      opacity: 1;
    }

    .greeting {
      margin-bottom: 12px;
    }

    .greeting-text {
      font-size: 28px;
      font-weight: 400;
    }

    .greeting-name {
      font-weight: 700;
    }

    .date-time {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 15px;
      opacity: 0.92;
      margin-bottom: 24px;
    }

    .date-icon {
      width: 18px;
      height: 18px;
    }

    .quick-actions-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.85;
      margin-bottom: 16px;
    }

    /* Quick Actions Card */
    .quick-actions-card {
      background: white;
      margin: 0 16px;
      border-radius: 16px;
      padding: 20px 16px 12px;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -50px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
      z-index: 20;
      transition: bottom 0.3s ease;
    }

    .quick-actions-card.expanded {
      bottom: -140px;
    }

    .quick-actions {
      display: flex;
      justify-content: space-around;
    }

    .quick-actions-extra {
      display: none;
      justify-content: space-around;
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
    }

    .quick-actions-extra.show {
      display: flex;
    }

    .quick-action {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      flex: 1;
    }

    .quick-action-icon {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: 2px solid #e0e5ea;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      background: white;
    }

    .quick-action:hover .quick-action-icon {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .quick-action-icon svg {
      width: 22px;
      height: 22px;
    }

    .quick-action-icon.blue svg {
      stroke: #1a6bb3;
    }

    .quick-action-icon.purple svg {
      stroke: #1a6bb3;
      fill: none;
    }

    .quick-action-icon.gray svg {
      stroke: #1a6bb3;
    }

    .quick-action-text {
      font-size: 12px;
      color: #1f2937;
      text-align: center;
      line-height: 1.4;
      font-weight: 500;
    }

    .quick-action-subtext {
      color: #6b21a8;
      font-weight: 700;
    }

    .expand-arrow {
      display: flex;
      justify-content: center;
      margin-top: 12px;
    }

    .expand-arrow-btn {
      width: 36px;
      height: 20px;
      background: #1a6bb3;
      border-radius: 0 0 18px 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      transition: background 0.2s;
    }

    .expand-arrow-btn:hover {
      background: #155a96;
    }

    .expand-arrow-btn svg {
      width: 16px;
      height: 16px;
      color: white;
      transition: transform 0.3s;
    }

    .expand-arrow-btn.expanded svg {
      transform: rotate(180deg);
    }

    /* Main Content */
    .main-content {
      margin-top: 70px;
      padding: 0 16px;
      transition: margin-top 0.3s ease;
    }

    .main-content.expanded {
      margin-top: 160px;
    }

    /* Deposits Section */
    .section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 16px 0 12px;
      cursor: pointer;
    }

    .section-chevron {
      width: 18px;
      height: 18px;
      color: #6b7280;
      transition: transform 0.3s;
    }

    .section-chevron.expanded {
      transform: rotate(0deg);
    }

    .section-title {
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
    }

    /* Account Card */
    .account-card {
      background: white;
      border-radius: 12px;
      padding: 18px 16px;
      margin-bottom: 12px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      cursor: pointer;
      transition: all 0.2s;
    }

    .account-card:hover {
      border-color: #1a6bb3;
      box-shadow: 0 2px 8px rgba(26, 107, 179, 0.15);
    }

    .account-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .account-info {
      flex: 1;
    }

    .account-name {
      font-size: 17px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 6px;
    }

    .account-indicator {
      width: 32px;
      height: 4px;
      background: #1a6bb3;
      border-radius: 2px;
      margin-bottom: 8px;
    }

    .account-indicator.savings {
      background: #16a34a;
    }

    .account-number {
      font-size: 14px;
      color: #6b7280;
    }

    .account-balance-section {
      text-align: right;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }

    .account-balance-label {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .account-balance {
      font-size: 24px;
      font-weight: 600;
      color: #1a6bb3;
    }

    .account-menu {
      margin-left: 8px;
      cursor: pointer;
      padding: 4px;
      display: flex;
      align-items: center;
    }

    .account-menu svg {
      width: 20px;
      height: 20px;
      color: #9ca3af;
    }

    /* Account Details Page */
    .details-header {
      background: #f0f4f8;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .back-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #1a6bb3;
    }

    .back-btn svg {
      width: 28px;
      height: 28px;
    }

    .details-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .account-details-card {
      background: white;
      margin: 16px;
      border-radius: 16px;
      padding: 24px 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      text-align: center;
    }

    .details-account-name {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 4px;
    }

    .details-account-number {
      font-size: 14px;
      color: #1a6bb3;
      text-decoration: underline;
      margin-bottom: 16px;
    }

    .account-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 24px;
      margin-bottom: 16px;
    }

    .account-nav-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #1a6bb3;
    }

    .account-nav-btn svg {
      width: 24px;
      height: 24px;
    }

    .account-nav-indicator {
      width: 40px;
      height: 4px;
      background: #1a6bb3;
      border-radius: 2px;
    }

    .account-nav-indicator.savings {
      background: #16a34a;
    }

    .details-balance {
      font-size: 42px;
      font-weight: 600;
      color: #1a6bb3;
      margin-bottom: 4px;
    }

    .details-balance-label {
      font-size: 12px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .account-info-section {
      padding: 20px 16px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-size: 15px;
      color: #374151;
    }

    .info-value {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
    }

    .info-toggle {
      width: 48px;
      height: 28px;
      background: #d1d5db;
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
    }

    .info-toggle.active {
      background: #1a6bb3;
    }

    .info-toggle::after {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      top: 3px;
      left: 3px;
      transition: transform 0.2s;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .info-toggle.active::after {
      transform: translateX(20px);
    }

    .details-actions {
      background: white;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 16px;
      display: flex;
      justify-content: space-around;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .detail-action {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 8px 16px;
    }

    .detail-action-icon {
      width: 48px;
      height: 48px;
      border: 2px solid #1a6bb3;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .detail-action:hover .detail-action-icon {
      background: #f0f7ff;
    }

    .detail-action-icon svg {
      width: 24px;
      height: 24px;
      stroke: #1a6bb3;
    }

    .detail-action-text {
      font-size: 12px;
      color: #1a6bb3;
      font-weight: 600;
      text-align: center;
    }

    .transactions-section {
      background: linear-gradient(180deg, #1a6bb3 0%, #0d4a7c 100%);
      margin: 0 16px;
      border-radius: 12px 12px 0 0;
      padding: 20px 16px;
      color: white;
    }

    .transactions-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .transactions-title {
      font-size: 18px;
      font-weight: 600;
    }

    .transactions-filter {
      width: 24px;
      height: 24px;
      cursor: pointer;
    }

    /* Filter Modal */
    .filter-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: flex-end;
      z-index: 250;
    }

    .filter-modal-overlay.show {
      display: flex;
    }

    .filter-modal {
      background: white;
      border-radius: 16px 16px 0 0;
      width: 100%;
      max-width: 500px;
      padding: 20px;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        transform: translateY(100%);
      }
      to {
        transform: translateY(0);
      }
    }

    .filter-modal-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 20px;
    }

    .filter-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .filter-option {
      display: flex;
      align-items: center;
      padding: 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-option:hover {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .filter-option.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .filter-option-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #1a6bb3;
      border-radius: 4px;
      margin-right: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .filter-option.active .filter-option-checkbox {
      background: #1a6bb3;
    }

    .filter-option.active .filter-option-checkbox::after {
      content: 'âœ“';
      color: white;
      font-size: 12px;
      font-weight: bold;
    }

    .filter-option-label {
      flex: 1;
      font-size: 15px;
      color: #111827;
    }

    .filter-buttons {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .filter-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-btn.reset {
      background: white;
      color: #1a6bb3;
      border: 2px solid #1a6bb3;
    }

    .filter-btn.reset:hover {
      background: #f0f7ff;
    }

    .filter-btn.apply {
      background: #1a6bb3;
      color: white;
    }

    .filter-btn.apply:hover {
      background: #155a96;
    }

    .transactions-list {
      background: white;
      margin: 0 16px;
      border-radius: 0 0 12px 12px;
      padding: 8px 0;
      margin-bottom: 16px;
    }

    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid #f3f4f6;
    }

    .transaction-item:last-child {
      border-bottom: none;
    }

    .transaction-info {
      flex: 1;
    }

    .transaction-name {
      font-size: 15px;
      font-weight: 500;
      color: #111827;
      margin-bottom: 2px;
    }

    .transaction-date {
      font-size: 13px;
      color: #6b7280;
    }

    .transaction-amount {
      font-size: 16px;
      font-weight: 600;
    }

    .transaction-amount.positive {
      color: #16a34a;
    }

    .transaction-amount.negative {
      color: #111827;
    }

    .transaction-amount.pending {
      color: #b45309;
    }

    /* Transfer Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 200;
      padding: 20px;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: white;
      border-radius: 16px;
      width: 100%;
      max-width: 400px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #6b7280;
    }

    .modal-close svg {
      width: 24px;
      height: 24px;
    }

    .modal-body {
      padding: 20px;
    }

    /* Verification Modal */
    .verification-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 20px;
      backdrop-filter: blur(2px);
    }

    .verification-modal-overlay.show {
      display: flex;
    }

    .verification-modal {
      background: white;
      border-radius: 20px;
      width: 100%;
      max-width: 360px;
      padding: 40px 24px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        transform: translateY(40px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .verification-modal-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #ffe5e5 0%, #ffd4d4 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
    }

    .verification-modal-icon svg {
      width: 44px;
      height: 44px;
      stroke: #dc2626;
    }

    .verification-modal-title {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 12px;
    }

    .verification-modal-text {
      font-size: 15px;
      color: #6b7280;
      line-height: 1.6;
      margin-bottom: 28px;
    }

    .verification-modal-close-btn {
      width: 100%;
      padding: 14px;
      background: transparent;
      color: #1a6bb3;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 12px;
      transition: all 0.2s;
    }

    .verification-modal-close-btn:hover {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .verification-modal-action-btn {
      width: 100%;
      padding: 14px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .verification-modal-action-btn:hover {
      background: #155a96;
      box-shadow: 0 4px 12px rgba(26, 107, 179, 0.3);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 8px;
    }

    .form-select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      color: #111827;
      background: white;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 20px;
    }

    .form-select:focus {
      outline: none;
      border-color: #1a6bb3;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      color: #111827;
    }

    .form-input:focus {
      outline: none;
      border-color: #1a6bb3;
    }

    .amount-input-wrapper {
      position: relative;
    }

    .amount-prefix {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 15px;
      color: #6b7280;
    }

    .amount-input {
      padding-left: 32px;
    }

    .account-balance-info {
      font-size: 13px;
      color: #6b7280;
      margin-top: 6px;
    }

    .transfer-btn {
      width: 100%;
      padding: 14px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .transfer-btn:hover {
      background: #155a96;
    }

    .transfer-btn:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    /* Success Message */
    .success-message {
      display: none;
      text-align: center;
      padding: 40px 20px;
    }

    .success-message.show {
      display: block;
    }

    .success-icon {
      width: 64px;
      height: 64px;
      background: #dcfce7;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
    }

    .success-icon svg {
      width: 32px;
      height: 32px;
      stroke: #16a34a;
    }

    .success-title {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .success-text {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 24px;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      display: flex;
      justify-content: space-around;
      padding: 10px 0 24px;
      border-top: 1px solid #e5e7eb;
      z-index: 100;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      padding: 4px 16px;
      transition: all 0.2s;
    }

    .nav-item svg {
      width: 24px;
      height: 24px;
      color: #6b7280;
    }

    .nav-item.active svg {
      color: #1a6bb3;
    }

    .nav-item span {
      font-size: 11px;
      color: #6b7280;
      font-weight: 500;
    }

    .nav-item.active span {
      color: #1a6bb3;
      font-weight: 600;
    }

    /* Loading State */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid #e5e7eb;
      border-top-color: #1a6bb3;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Hidden utility */
    .hidden {
      display: none !important;
    }

    /* Bottom Sheet */
    .bottom-sheet-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 250;
      transition: background 0.3s ease;
    }

    .bottom-sheet-overlay.show {
      display: block;
    }

    .bottom-sheet {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      border-radius: 24px 24px 0 0;
      padding: 8px 0 32px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
      z-index: 251;
      max-height: 50vh;
      overflow-y: auto;
    }

    .bottom-sheet-overlay.show .bottom-sheet {
      transform: translateY(0);
    }

    .bottom-sheet-handle {
      width: 40px;
      height: 4px;
      background: #d1d5db;
      border-radius: 2px;
      margin: 8px auto 16px;
    }

    .bottom-sheet-content {
      padding: 0 16px;
    }

    .sheet-action-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 18px 16px;
      cursor: pointer;
      border-radius: 12px;
      transition: background 0.2s;
    }

    .sheet-action-item:hover {
      background: #f3f4f6;
    }

    .sheet-action-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .sheet-action-icon svg {
      width: 24px;
      height: 24px;
      stroke: #1a6bb3;
      fill: none;
    }

    .sheet-action-text {
      font-size: 17px;
      font-weight: 500;
      color: #111827;
    }

    .sheet-divider {
      height: 1px;
      background: #e5e7eb;
      margin: 8px 16px;
    }

    .sheet-cancel-btn {
      display: block;
      width: calc(100% - 32px);
      margin: 16px auto 0;
      padding: 16px;
      background: transparent;
      border: none;
      font-size: 17px;
      font-weight: 500;
      color: #6b7280;
      text-align: center;
      cursor: pointer;
      border-radius: 12px;
      transition: background 0.2s;
    }

    .sheet-cancel-btn:hover {
      background: #f3f4f6;
    }

    /* Full Page Styles */
    .full-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 300;
      display: none;
      flex-direction: column;
      overflow-y: auto;
    }

    .full-page.show {
      display: flex;
    }

    .full-page-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .full-page-title {
      font-size: 18px;
      font-weight: 600;
    }

    .close-page-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      color: white;
    }

    .close-page-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Tabs */
    .tabs-container {
      display: flex;
      background: white;
      border-bottom: 1px solid #e5e7eb;
      overflow-x: auto;
    }

    .tab-btn {
      flex: 1;
      padding: 14px 16px;
      border: none;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      white-space: nowrap;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .tab-btn.active {
      color: #1a6bb3;
      border-bottom-color: #1a6bb3;
    }

    /* Currency Watchlist Card */
    /* Bitcoin Receive Page */
    .btc-receive-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 400;
      display: none;
      flex-direction: column;
      overflow-y: auto;
    }

    .btc-receive-page.show {
      display: flex;
    }

    .receive-page-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .receive-close-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      color: white;
    }

    .receive-close-btn svg {
      width: 20px;
      height: 20px;
    }

    .receive-page-title {
      font-size: 18px;
      font-weight: 600;
      flex: 1;
      text-align: center;
    }

    .receive-info-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      color: white;
    }

    .receive-info-btn svg {
      width: 20px;
      height: 20px;
    }

    .receive-page-content {
      padding: 24px 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .receive-warning-box {
      background: #fef3c7;
      border: 1px solid #fcd34d;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      display: flex;
      gap: 12px;
      align-items: flex-start;
      width: 100%;
      max-width: 400px;
    }

    .warning-icon {
      width: 20px;
      height: 20px;
      color: #d97706;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .warning-text {
      font-size: 14px;
      color: #92400e;
      line-height: 1.5;
    }

    .receive-crypto-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 32px;
    }

    .receive-crypto-icon {
      width: 60px;
      height: 60px;
      background: #f0f7ff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
    }

    .receive-crypto-icon svg {
      width: 32px;
      height: 32px;
      fill: #1a6bb3;
    }

    .receive-crypto-name {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .qr-code-container {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .qr-code-canvas {
      width: 200px;
      height: 200px;
      display: block;
    }

    .receive-address-box {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      width: 100%;
      max-width: 400px;
      text-align: center;
    }

    .receive-address-label {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }

    .receive-address-text {
      font-size: 13px;
      color: #111827;
      font-family: 'Courier New', monospace;
      word-break: break-all;
      line-height: 1.6;
    }

    .receive-actions {
      display: flex;
      gap: 12px;
      width: 100%;
      max-width: 400px;
    }

    .receive-copy-btn {
      flex: 1;
      padding: 14px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: background 0.2s;
    }

    .receive-copy-btn:hover {
      background: #155a96;
    }

    .receive-copy-btn svg {
      width: 18px;
      height: 18px;
    }

    .watchlist-card {
      background: white;
      margin: 16px;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .watchlist-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .watchlist-title {
      font-size: 14px;
      font-weight: 600;
      color: #374151;
    }

    .edit-btn {
      padding: 6px 16px;
      border: 1px solid #1a6bb3;
      background: transparent;
      color: #1a6bb3;
      font-size: 13px;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
    }

    .currency-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .currency-item:last-child {
      border-bottom: none;
    }

    .currency-name {
      font-size: 15px;
      font-weight: 500;
      color: #111827;
    }

    .currency-code {
      color: #6b7280;
      font-weight: 400;
    }

    .currency-rate {
      font-size: 14px;
      color: #374151;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 32px;
    }

    .empty-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: #e5e7eb;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .empty-icon svg {
      width: 40px;
      height: 40px;
      stroke: #9ca3af;
    }

    .empty-title {
      font-size: 16px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
    }

    .empty-text {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 24px;
    }

    .primary-action-btn {
      display: block;
      width: calc(100% - 32px);
      margin: 0 auto;
      padding: 14px 24px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .primary-action-btn:hover {
      background: #155a96;
    }

    /* Contact Form */
    .contact-form-page {
      background: #f0f4f8;
    }

    .form-container {
      padding: 20px 16px;
    }

    .form-section-title {
      font-size: 13px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    /* Manage Cards Page */
    .cards-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .cards-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .cards-logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .cards-logo-text {
      font-size: 16px;
      font-weight: 600;
    }

    .cards-page-title {
      font-size: 22px;
      font-weight: 600;
    }

    .cards-page-subtitle {
      font-size: 14px;
      opacity: 0.9;
      margin-top: 4px;
    }

    .cards-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cards-list {
      flex: 1;
      padding: 16px;
    }

    .saved-card {
      background: linear-gradient(135deg, #1a6bb3 0%, #0d4a7c 100%);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      color: white;
    }

    .saved-card-network {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      opacity: 0.9;
      margin-bottom: 12px;
    }

    .saved-card-number {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 2px;
      margin-bottom: 12px;
    }

    .saved-card-info {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .saved-card-name {
      text-transform: uppercase;
    }

    .saved-card-type {
      font-size: 11px;
      opacity: 0.8;
    }

    .selectable-card {
      background: white;
      border: 1px solid #e8ecf0;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: all 0.2s;
    }

    .selectable-card:hover {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .selectable-card-network {
      font-size: 12px;
      font-weight: 600;
      color: #1a6bb3;
    }

    .selectable-card-details {
      flex: 1;
      margin-left: 12px;
    }

    .selectable-card-type {
      font-size: 12px;
      color: #6b7280;
      text-transform: capitalize;
    }

    .selectable-card-number {
      font-size: 14px;
      font-weight: 500;
      color: #111827;
    }

    .card-item {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      cursor: pointer;
    }

    .card-item:hover {
      border-color: #1a6bb3;
    }

    .card-mini-preview {
      width: 60px;
      height: 38px;
      background: linear-gradient(135deg, #1a6bb3 0%, #0d4a7c 100%);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-mini-preview svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    .card-item-info {
      flex: 1;
    }

    .card-item-name {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
    }

    .card-item-number {
      font-size: 13px;
      color: #6b7280;
    }

    .card-item-type {
      font-size: 11px;
      padding: 2px 8px;
      background: #e5e7eb;
      border-radius: 4px;
      color: #374151;
      font-weight: 500;
    }

    .add-card-footer {
      padding: 16px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    .add-card-btn {
      width: 100%;
      padding: 14px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .add-card-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Add Card Page - Live Preview */
    .card-preview-section {
      padding: 24px 16px;
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
    }

    .live-card-preview {
      width: 100%;
      max-width: 340px;
      height: 200px;
      margin: 0 auto;
      border-radius: 16px;
      padding: 20px;
      position: relative;
      background: linear-gradient(135deg, #1e3a5f 0%, #0d4a7c 50%, #1a6bb3 100%);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card-preview-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .card-type-badge {
      padding: 4px 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .card-network-logo {
      width: 50px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }

    .card-network-logo svg {
      width: 50px;
      height: 32px;
    }

    .card-chip {
      width: 40px;
      height: 30px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 50%, #d4af37 100%);
      border-radius: 6px;
      margin: 16px 0;
    }

    .card-preview-number {
      font-size: 20px;
      font-weight: 500;
      color: white;
      letter-spacing: 2px;
      font-family: 'Courier New', monospace;
    }

    .card-preview-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .card-preview-name {
      font-size: 14px;
      font-weight: 500;
      color: white;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .card-preview-expiry {
      text-align: right;
    }

    .card-preview-expiry-label {
      font-size: 9px;
      color: rgba(255,255,255,0.7);
      text-transform: uppercase;
    }

    .card-preview-expiry-value {
      font-size: 14px;
      color: white;
      font-weight: 500;
    }

    /* Card Form */
    .card-form-section {
      padding: 20px 16px;
      background: white;
      flex: 1;
    }

    .toggle-group {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .toggle-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
    }

    .toggle-btn.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
      color: #1a6bb3;
    }

    /* Add Money Page */
    .amount-display {
      text-align: center;
      padding: 40px 20px;
      background: white;
    }

    .amount-value {
      font-size: 48px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .amount-label {
      font-size: 14px;
      color: #6b7280;
    }

    .numpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 16px;
      background: #f0f4f8;
    }

    .numpad-btn {
      padding: 20px;
      background: white;
      border: none;
      border-radius: 12px;
      font-size: 24px;
      font-weight: 500;
      color: #111827;
      cursor: pointer;
      transition: background 0.2s;
    }

    .numpad-btn:hover {
      background: #e5e7eb;
    }

    .numpad-btn.action {
      background: #1a6bb3;
      color: white;
    }

    .numpad-btn.delete {
      background: transparent;
    }

    .continue-btn-container {
      padding: 16px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    /* Error/Try Again Message */
    .error-message-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px;
      text-align: center;
    }

    .error-icon {
      width: 80px;
      height: 80px;
      background: #fef2f2;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
    }

    .error-icon svg {
      width: 40px;
      height: 40px;
      stroke: #dc2626;
    }

    .error-title {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .error-text {
      font-size: 14px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 32px;
    }

    /* Responsive */
    @media (min-width: 640px) {
      .header {
        padding: 20px 32px 90px;
      }

      .quick-actions-card {
        margin: 0 32px;
      }

      .main-content {
        padding: 0 32px;
      }
    }

    /* Pay Bills Styles */
    .bills-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .bills-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .bill-type-card {
      background: #fff;
      border-radius: 16px;
      padding: 24px 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .bill-type-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    .bill-type-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bill-type-icon svg {
      width: 28px;
      height: 28px;
    }

    .bill-type-icon.electric,
    .bill-type-icon.water,
    .bill-type-icon.internet,
    .bill-type-icon.phone,
    .bill-type-icon.gas,
    .bill-type-icon.tv,
    .bill-type-icon.insurance,
    .bill-type-icon.other {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(0, 82, 147, 0.2);
      color: #005293;
    }

    .bill-type-name {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
      text-align: center;
    }

    .bill-payment-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .bill-type-header {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .bill-type-header-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bill-type-header-icon svg {
      width: 24px;
      height: 24px;
    }

    .bill-type-header-text {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
    }

    .bill-form-section {
      background: #fff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .bill-form-title {
      font-size: 16px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 20px;
    }

    /* Lead Transfer Styles */
    .lead-transfer-content {
      padding: 20px 16px;
      flex: 1;
    }

    .glowing-balance-card {
      background: linear-gradient(135deg, rgba(26, 107, 179, 0.15) 0%, rgba(13, 74, 124, 0.25) 100%);
      border: 1px solid rgba(26, 107, 179, 0.3);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(26, 107, 179, 0.2), 0 0 40px rgba(26, 107, 179, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
      animation: glow-pulse 2s ease-in-out infinite alternate;
    }

    @keyframes glow-pulse {
      0% {
        box-shadow: 0 0 20px rgba(26, 107, 179, 0.2), 0 0 40px rgba(26, 107, 179, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
      }
      100% {
        box-shadow: 0 0 30px rgba(26, 107, 179, 0.4), 0 0 60px rgba(26, 107, 179, 0.2), inset 0 0 30px rgba(255, 255, 255, 0.08);
      }
    }

    .glowing-balance-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.1) 50%, transparent 60%);
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%) rotate(45deg); }
      100% { transform: translateX(100%) rotate(45deg); }
    }

    .glowing-balance-label {
      font-size: 12px;
      font-weight: 600;
      color: #1a6bb3;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 4px;
      position: relative;
      z-index: 1;
    }

    .glowing-balance-account {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }

    .glowing-balance-amount {
      font-size: 32px;
      font-weight: 700;
      color: #1a6bb3;
      position: relative;
      z-index: 1;
    }

    .transfer-form-section {
      background: white;
      border-radius: 16px;
      padding: 24px 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .transfer-form-title {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 20px;
    }

    .transfer-submit-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 8px;
    }

    .transfer-submit-btn:hover {
      background: #155a96;
    }

    /* Confirmation Page */
    .confirmation-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px;
    }

    .confirmation-card {
      background: white;
      border-radius: 12px;
      padding: 32px 24px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 420px;
    }

    .confirmation-header-section {
      text-align: center;
      margin-bottom: 24px;
      padding-bottom: 24px;
    }

    .confirmation-amount-label {
      font-size: 13px;
      color: #6b7280;
      font-weight: 500;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .confirmation-amount-value {
      font-size: 44px;
      font-weight: 700;
      color: #1a6bb3;
    }

    .confirmation-divider {
      height: 1px;
      background: #e5e7eb;
      margin: 20px 0;
    }

    .confirmation-details {
      display: flex;
      flex-direction: column;
      gap: 24px;
      align-items: center;
      margin-bottom: 24px;
    }

    .confirmation-detail-group {
      text-align: center;
      width: 100%;
    }

    .confirmation-detail-label {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .confirmation-detail-value {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .confirmation-detail-subtext {
      font-size: 13px;
      color: #6b7280;
      margin-top: 4px;
    }

    .confirmation-arrow {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #d1d5db;
    }

    .confirmation-arrow svg {
      width: 20px;
      height: 20px;
    }

    .confirmation-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .cancel-btn {
      flex: 1;
      padding: 14px 16px;
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cancel-btn:hover {
      background: #e5e7eb;
    }

    .confirm-btn {
      flex: 1;
      padding: 14px 16px;
      background: #16a34a;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .confirm-btn:hover {
      background: #15803d;
    }

    .confirm-btn:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }

    /* Receipt Page */
    .receipt-content {
      padding: 24px 16px;
      flex: 1;
    }

    .receipt-card {
      background: white;
      border-radius: 12px;
      padding: 32px 24px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .receipt-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .receipt-success-icon {
      width: 80px;
      height: 80px;
      background: #dcfce7;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      animation: scaleIn 0.4s ease-out;
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .receipt-success-icon svg {
      width: 40px;
      height: 40px;
      stroke: #16a34a;
      stroke-width: 2.5;
    }

    .receipt-title {
      font-size: 24px;
      font-weight: 700;
      color: #111827;
    }

    .receipt-amount-section {
      text-align: center;
      padding: 24px 0;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 24px;
    }

    .receipt-amount-label {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .receipt-amount {
      font-size: 42px;
      font-weight: 700;
      color: #16a34a;
    }

    .receipt-divider {
      height: 1px;
      background: #e5e7eb;
      margin: 20px 0;
    }

    .receipt-details {
      margin-bottom: 24px;
    }

    .receipt-detail-group {
      padding: 16px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .receipt-detail-group:last-child {
      border-bottom: none;
    }

    .receipt-detail-label {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .receipt-detail-value {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .receipt-detail-subtext {
      font-size: 13px;
      color: #6b7280;
      margin-top: 4px;
    }

    .receipt-footer {
      text-align: center;
      padding: 16px 0;
      background: #f9fafb;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .receipt-ref {
      font-size: 12px;
      color: #6b7280;
      font-family: 'Monaco', 'Courier New', monospace;
    }

    .done-btn {
      width: 100%;
      padding: 14px 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .done-btn:hover {
      background: #155a96;
    }

    .receipt-done-btn {
      width: 100%;
      padding: 16px;
      background: white;
      color: #16a34a;
      border: 2px solid #16a34a;
      border-radius: 50px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .receipt-done-btn:hover {
      background: #f0fdf4;
    }

    .receipt-done-btn:active {
      transform: scale(0.98);
    }

    .copied-notification {
      display: inline-block;
      background: #16a34a;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 8px;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Loading Screen */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      backdrop-filter: blur(4px);
    }

    .loading-overlay.show {
      display: flex;
    }

    .loading-spinner-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .loading-spinner {
      width: 64px;
      height: 64px;
      border: 4px solid #e5e7eb;
      border-top-color: #1a6bb3;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .loading-text {
      font-size: 16px;
      color: #374151;
      font-weight: 500;
    }

    /* ========== CRYPTO PAGE STYLES ========== */
    .crypto-list-page {
      background: #f0f4f8;
    }

    .crypto-list-content {
      padding: 16px;
    }

    .crypto-list-item {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
      cursor: pointer;
      transition: all 0.2s;
    }

    .crypto-list-item:hover {
      border-color: #f7931a;
      box-shadow: 0 2px 8px rgba(247, 147, 26, 0.15);
    }

    .crypto-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f7931a;
    }

    .crypto-icon svg {
      width: 28px;
      height: 28px;
      fill: white;
    }

    .crypto-info {
      flex: 1;
    }

    .crypto-name {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-symbol {
      font-size: 13px;
      color: #6b7280;
    }

    .crypto-price-info {
      text-align: right;
    }

    .crypto-price {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-change {
      font-size: 13px;
      color: #16a34a;
    }

    .crypto-change.negative {
      color: #dc2626;
    }

    /* BTC Detail Page */
    .crypto-detail-header {
      background: white;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .crypto-detail-title {
      flex: 1;
      text-align: center;
    }

    .crypto-detail-title h1 {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-detail-title span {
      font-size: 12px;
      color: #6b7280;
    }

    .crypto-detail-edit {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #6b7280;
    }

    .crypto-detail-edit svg {
      width: 20px;
      height: 20px;
    }

    .crypto-price-section {
      background: white;
      padding: 24px 20px;
      text-align: center;
    }

    .crypto-gas-fee {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #16a34a;
      margin-bottom: 16px;
    }

    .crypto-gas-fee svg {
      width: 14px;
      height: 14px;
    }

    .crypto-main-price {
      font-size: 42px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 8px;
    }

    .crypto-price-change {
      font-size: 15px;
      color: #16a34a;
    }

    .crypto-price-change.negative {
      color: #dc2626;
    }

    .crypto-chart-container {
      background: white;
      padding: 20px;
      height: 200px;
      position: relative;
    }

    .crypto-chart {
      width: 100%;
      height: 100%;
    }

    .chart-time-filters {
      display: flex;
      justify-content: space-around;
      background: white;
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .chart-time-btn {
      padding: 8px 16px;
      border: none;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .chart-time-btn.active {
      background: #f3f4f6;
      color: #111827;
    }

    .crypto-tabs {
      display: flex;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    .crypto-tab {
      flex: 1;
      padding: 14px 16px;
      border: none;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .crypto-tab.active {
      color: #111827;
      border-bottom-color: #111827;
    }

    .crypto-holdings-section {
      padding: 16px;
    }

    .crypto-holdings-title {
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .crypto-holdings-card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      border: 1px solid #e8ecf0;
    }

    .crypto-holdings-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: #f7931a;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .crypto-holdings-icon svg {
      width: 28px;
      height: 28px;
      fill: white;
    }

    .crypto-holdings-info {
      flex: 1;
    }

    .crypto-holdings-name {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-holdings-amount {
      font-size: 13px;
      color: #6b7280;
    }

    .crypto-holdings-value {
      text-align: right;
    }

    .crypto-holdings-usd {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
    }

    .crypto-holdings-pnl {
      font-size: 13px;
      color: #6b7280;
    }

    /* Crypto Action Bar */
    .crypto-action-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      display: flex;
      justify-content: center;
      gap: 24px;
      padding: 16px 24px 32px;
      border-top: 1px solid #e5e7eb;
      z-index: 100;
    }

    .crypto-action-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 8px 24px;
      border: none;
      background: transparent;
    }

    .crypto-action-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3f4f6;
      transition: all 0.2s;
    }

    .crypto-action-btn:hover .crypto-action-icon {
      background: #e5e7eb;
    }

    .crypto-action-icon svg {
      width: 24px;
      height: 24px;
      stroke: #111827;
    }

    .crypto-action-text {
      font-size: 12px;
      font-weight: 500;
      color: #374151;
    }

    .crypto-tab-content {
      display: none;
      padding-bottom: 100px;
    }

    .crypto-tab-content.active {
      display: block;
    }

    .crypto-history-empty,
    .crypto-about-content {
      padding: 40px 20px;
      text-align: center;
      color: #6b7280;
    }

    .crypto-about-content {
      text-align: left;
      padding: 20px;
    }

    .crypto-about-content h3 {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 12px;
    }

    .crypto-about-content p {
      font-size: 14px;
      line-height: 1.6;
      color: #6b7280;
      margin-bottom: 16px;
    }

    /* ========== CARD MANAGEMENT STYLES ========== */
    .manage-cards-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 20px;
    }

    .manage-cards-header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .manage-cards-logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .manage-cards-logo-icon {
      width: 28px;
      height: 28px;
      background: #dc2626;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .manage-cards-logo-icon svg {
      width: 16px;
      height: 16px;
      fill: white;
    }

    .manage-cards-logo-text {
      font-size: 14px;
      font-weight: 600;
    }

    .manage-cards-title {
      font-size: 24px;
      font-weight: 400;
      line-height: 1.3;
    }

    .manage-cards-title strong {
      font-weight: 700;
    }

    .manage-cards-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cards-empty-state {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 32px;
      text-align: center;
    }

    .cards-empty-icon {
      width: 80px;
      height: 50px;
      border: 3px solid #d1d5db;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
    }

    .cards-empty-icon-inner {
      width: 50px;
      height: 8px;
      background: #d1d5db;
      border-radius: 2px;
    }

    .cards-empty-title {
      font-size: 18px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .cards-empty-text {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 32px;
    }

    .saved-cards-list {
      padding: 16px;
      flex: 1;
    }

    .saved-card-item {
      background: linear-gradient(135deg, #1e3a5f 0%, #0d4a7c 50%, #1a6bb3 100%);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      color: white;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .saved-card-item:hover {
      transform: scale(1.02);
    }

    .saved-card-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .saved-card-chip {
      width: 35px;
      height: 26px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 50%, #d4af37 100%);
      border-radius: 4px;
    }

    .saved-card-type-badge {
      padding: 3px 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .saved-card-number-display {
      font-size: 16px;
      letter-spacing: 2px;
      font-family: 'Courier New', monospace;
      margin-bottom: 16px;
    }

    .saved-card-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .saved-card-holder {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .saved-card-network-display {
      font-size: 14px;
      font-weight: 700;
      font-style: italic;
    }

    .add-card-footer-btn {
      margin: 16px;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .add-card-footer-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Add Card Form Page */
    .add-card-preview-section {
      padding: 24px 16px;
      background: linear-gradient(180deg, #4a5568 0%, #2d3748 100%);
    }

    .add-card-live-preview {
      width: 100%;
      max-width: 340px;
      height: 200px;
      margin: 0 auto;
      border-radius: 16px;
      padding: 20px;
      position: relative;
      background: linear-gradient(135deg, #1e3a5f 0%, #0d4a7c 50%, #1a6bb3 100%);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .add-card-preview-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .add-card-preview-chip {
      width: 40px;
      height: 30px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 50%, #d4af37 100%);
      border-radius: 6px;
    }

    .add-card-preview-type {
      padding: 4px 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      color: white;
      text-transform: uppercase;
    }

    .add-card-preview-number {
      font-size: 18px;
      font-weight: 500;
      color: white;
      letter-spacing: 3px;
      font-family: 'Courier New', monospace;
      text-align: center;
      margin: 16px 0;
    }

    .add-card-preview-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .add-card-preview-holder-section {
      flex: 1;
    }

    .add-card-preview-label {
      font-size: 8px;
      color: rgba(255,255,255,0.6);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 2px;
    }

    .add-card-preview-holder-name {
      font-size: 13px;
      font-weight: 500;
      color: white;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .add-card-preview-expiry-section {
      text-align: right;
    }

    .add-card-preview-expiry {
      font-size: 13px;
      color: white;
      font-weight: 500;
    }

    .add-card-preview-network {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      font-weight: 700;
      color: white;
      font-style: italic;
    }

    .add-card-form-section {
      padding: 20px 16px;
      background: white;
      flex: 1;
    }

    .card-form-row {
      display: flex;
      gap: 12px;
    }

    .card-form-row .form-group {
      flex: 1;
    }

    .card-type-toggle {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .card-type-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
    }

    .card-type-btn.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
      color: #1a6bb3;
    }

    .card-network-toggle {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .card-network-btn {
      flex: 1;
      padding: 12px 8px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .card-network-btn.visa {
      color: #1a1f71;
    }

    .card-network-btn.mastercard {
      color: #eb001b;
    }

    .card-network-btn.amex {
      color: #006fcf;
    }

    .card-network-btn.active {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .save-card-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
    }

    .save-card-btn:hover {
      background: #155a96;
    }

    /* Add Money Card Selection */
    .add-money-card-select {
      padding: 20px 16px;
      flex: 1;
    }

    .add-money-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
      margin-bottom: 16px;
    }

    .add-money-card-option {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .add-money-card-option:hover {
      border-color: #1a6bb3;
      background: #f0f7ff;
    }

    .add-money-card-mini {
      width: 50px;
      height: 32px;
      background: linear-gradient(135deg, #1e3a5f 0%, #1a6bb3 100%);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .add-money-card-mini-chip {
      width: 12px;
      height: 9px;
      background: linear-gradient(135deg, #d4af37 0%, #f4d160 100%);
      border-radius: 2px;
    }

    .add-money-card-details {
      flex: 1;
    }

    .add-money-card-network {
      font-size: 12px;
      font-weight: 600;
      color: #1a6bb3;
      text-transform: uppercase;
    }

    .add-money-card-number {
      font-size: 14px;
      color: #374151;
    }

    .add-money-card-arrow {
      width: 20px;
      height: 20px;
      color: #9ca3af;
    }

    /* Amount Entry Page */
    .amount-entry-section {
      padding: 40px 20px;
      background: white;
      text-align: center;
    }

    .amount-entry-value {
      font-size: 48px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 8px;
    }

    .amount-entry-label {
      font-size: 14px;
      color: #6b7280;
    }

    .amount-numpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 16px;
      background: #f0f4f8;
      align-items: center;
      justify-items: stretch;
    }

    .numpad-key {
      padding: 20px;
      background: transparent;
      border: none;
      border-radius: 12px;
      font-size: 24px;
      font-weight: 500;
      color: #111827;
      cursor: pointer;
      transition: background 0.2s;
      touch-action: manipulation;
      -webkit-user-select: none;
      user-select: none;
    }

    .numpad-key:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .numpad-key.delete {
      background: transparent;
      font-size: 18px;
    }

    .amount-continue-section {
      padding: 16px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    .amount-continue-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .amount-continue-btn:hover {
      background: #155a96;
    }

    /* Error Banner */
    .error-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #dc2626;
      color: white;
      padding: 16px 20px;
      display: none;
      align-items: center;
      justify-content: center;
      gap: 12px;
      z-index: 500;
      animation: slideDown 0.3s ease;
    }

    .error-banner.show {
      display: flex;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }

    .error-banner-icon {
      width: 24px;
      height: 24px;
    }

    .error-banner-text {
      font-size: 15px;
      font-weight: 500;
    }

    .error-banner-close {
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      padding: 4px;
    }

    .error-banner-close svg {
      width: 20px;
      height: 20px;
    }

    /* ========== ZELLE STYLES ========== */
    .zelle-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 300;
      display: none;
      flex-direction: column;
    }

    .zelle-page.show {
      display: flex;
    }

    /* More Page Styles */
    .more-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 300;
      display: none;
      flex-direction: column;
    }

    .more-page.show {
      display: flex;
    }

    .more-header {
      background: linear-gradient(135deg, #0d4a7c 0%, #2d8fd4 100%);
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .more-back-btn {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .more-back-btn svg {
      width: 24px;
      height: 24px;
    }

    .more-header-title {
      color: white;
      font-size: 20px;
      font-weight: 600;
      margin: 0;
    }

    .more-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .more-menu-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .more-menu-item {
      background: white;
      border-radius: 12px;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      border: none;
      width: 100%;
      text-align: left;
      transition: background-color 0.2s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .more-menu-item:hover {
      background: #f8fafc;
    }

    .more-menu-item:active {
      background: #f0f4f8;
    }

    .more-menu-icon {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, #0d4a7c 0%, #2d8fd4 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .more-menu-icon svg {
      width: 22px;
      height: 22px;
      color: white;
    }

    .more-menu-text {
      flex: 1;
    }

    .more-menu-title {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a2e;
      margin: 0 0 4px 0;
    }

    .more-menu-subtitle {
      font-size: 13px;
      color: #6b7280;
      margin: 0;
    }

    .more-menu-arrow {
      color: #9ca3af;
    }

    .more-menu-arrow svg {
      width: 20px;
      height: 20px;
    }

    .zelle-header {
      background: #f0f4f8;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid #e5e7eb;
    }

    .zelle-back-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #6b21a8;
    }

    .zelle-back-btn svg {
      width: 28px;
      height: 28px;
    }

    .zelle-welcome-content {
      flex: 1;
      padding: 32px 24px;
      display: flex;
      flex-direction: column;
    }

    .zelle-title {
      font-size: 24px;
      font-weight: 400;
      color: #111827;
      margin-bottom: 32px;
    }

    .zelle-title-logo {
      font-weight: 700;
      font-style: italic;
      color: #6b21a8;
    }

    .zelle-info-card {
      background: white;
      border-radius: 12px;
      padding: 20px 24px;
      margin-bottom: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
    }

    .zelle-info-card p {
      font-size: 15px;
      line-height: 1.6;
      color: #374151;
    }

    .zelle-info-card p strong {
      color: #111827;
    }

    .zelle-get-started-btn {
      margin-top: auto;
      padding: 18px 32px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: background 0.2s;
    }

    .zelle-get-started-btn:hover {
      background: #155a96;
    }

    .zelle-messages-content {
      flex: 1;
      padding: 32px 24px;
      display: flex;
      flex-direction: column;
    }

    .zelle-messages-title {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
      text-align: center;
      margin-bottom: 32px;
    }

    .zelle-message-card {
      background: white;
      border-radius: 12px;
      padding: 28px 24px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      flex: 1;
    }

    .zelle-message-card p {
      font-size: 15px;
      line-height: 1.7;
      color: #374151;
      text-align: center;
      margin-bottom: 20px;
    }

    .zelle-message-card p:last-child {
      margin-bottom: 0;
    }

    .zelle-ok-btn {
      margin-top: auto;
      padding: 18px 32px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1px;
      width: 100%;
      transition: background 0.2s;
    }

    .zelle-ok-btn:hover {
      background: #155a96;
    }

    .zelle-error-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #dc2626;
      color: white;
      padding: 16px 20px;
      display: none;
      align-items: center;
      gap: 12px;
      z-index: 600;
      animation: slideDown 0.3s ease;
    }

    .zelle-error-banner.show {
      display: flex;
    }

    .zelle-error-banner-icon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }

    .zelle-error-banner-icon svg {
      width: 24px;
      height: 24px;
    }

    .zelle-error-banner-text {
      font-size: 15px;
      font-weight: 500;
      flex: 1;
    }

    .zelle-error-banner-close {
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      padding: 4px;
      flex-shrink: 0;
    }

    .zelle-error-banner-close svg {
      width: 20px;
      height: 20px;
    }

    /* Profile Page Styles */
    .profile-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 300;
      display: none;
      flex-direction: column;
      overflow-y: auto;
    }

    .profile-page.show {
      display: flex;
    }

    .profile-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .profile-header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .profile-back-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      color: white;
    }

    .profile-back-btn svg {
      width: 20px;
      height: 20px;
    }

    .profile-header-title {
      font-size: 18px;
      font-weight: 600;
    }

    .profile-edit-btn {
      padding: 8px 16px;
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .profile-edit-btn:hover {
      background: rgba(255,255,255,0.3);
    }

    .profile-content {
      padding: 20px 16px;
      flex: 1;
    }

    .profile-avatar-section {
      text-align: center;
      margin-bottom: 24px;
    }

    .profile-avatar {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #1a6bb3 0%, #0d4a7c 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 12px;
      font-size: 36px;
      font-weight: 700;
      color: white;
    }

    .profile-full-name {
      font-size: 24px;
      font-weight: 700;
      color: #111827;
    }

    .profile-info-card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .profile-info-title {
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    .profile-info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .profile-info-row:last-child {
      border-bottom: none;
    }

    .profile-info-label {
      font-size: 15px;
      color: #6b7280;
    }

    .profile-info-value {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
      text-align: right;
      max-width: 60%;
      word-break: break-word;
    }

    /* Edit Profile Page Styles */
    .edit-profile-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 350;
      display: none;
      flex-direction: column;
      overflow-y: auto;
    }

    .edit-profile-page.show {
      display: flex;
    }

    .edit-profile-content {
      padding: 20px 16px;
      flex: 1;
    }

    .edit-profile-card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .edit-profile-title {
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    .edit-field-group {
      margin-bottom: 20px;
    }

    .edit-field-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 8px;
    }

    .edit-field-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      font-size: 16px;
      color: #111827;
      transition: border-color 0.2s;
    }

    .edit-field-input:focus {
      outline: none;
      border-color: #1a6bb3;
    }

    .edit-field-input:disabled {
      background: #f3f4f6;
      color: #9ca3af;
      cursor: not-allowed;
    }

    .edit-field-hint {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 4px;
    }

    .edit-save-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px;
      background: #dcfce7;
      border-radius: 8px;
      margin-top: 20px;
      font-size: 14px;
      font-weight: 500;
      color: #16a34a;
    }

    .edit-save-indicator svg {
      width: 18px;
      height: 18px;
    }

    /* Login Page Styles */
    .login-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 1000;
      display: none;
      flex-direction: column;
    }

    .login-page.show {
      display: flex;
    }

    .login-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 50%, #2d8fd4 100%);
      color: white;
      padding: 24px 20px 40px;
    }

    .login-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .login-logo-text {
      font-size: 24px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .login-logo-icon {
      width: 36px;
      height: 36px;
      background: #dc2626;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .login-logo-icon svg {
      width: 22px;
      height: 22px;
      fill: white;
    }

    .login-tagline {
      font-size: 28px;
      font-weight: 300;
      line-height: 1.3;
    }

    .login-tagline-bold {
      color: #7dd3fc;
    }

    .login-form-card {
      background: white;
      margin: -20px 16px 0;
      border-radius: 16px;
      padding: 28px 24px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .login-field-group {
      margin-bottom: 20px;
    }

    .login-field-label {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 8px;
      display: block;
    }

    .login-field-row {
      display: flex;
      align-items: center;
      border-bottom: 2px solid #e5e7eb;
      padding-bottom: 8px;
    }

    .login-field-input {
      flex: 1;
      border: none;
      font-size: 16px;
      color: #111827;
      padding: 8px 0;
      background: transparent;
    }

    .login-field-input:focus {
      outline: none;
    }

    .login-field-input::placeholder {
      color: #9ca3af;
    }

    .login-field-link {
      font-size: 12px;
      color: #1a6bb3;
      font-weight: 600;
      text-decoration: none;
      white-space: nowrap;
    }

    .login-show-btn {
      font-size: 12px;
      color: #1a6bb3;
      font-weight: 600;
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px 8px;
    }

    .login-remember-row {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 12px;
      margin: 12px 0 28px;
    }

    .login-remember-text {
      font-size: 14px;
      color: #374151;
    }

    .login-toggle {
      width: 48px;
      height: 28px;
      background: #d1d5db;
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
    }

    .login-toggle.active {
      background: #1a6bb3;
    }

    .login-toggle::after {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      top: 3px;
      left: 3px;
      transition: transform 0.2s;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .login-toggle.active::after {
      transform: translateX(20px);
    }

    .login-buttons {
      margin-top: auto;
    }

    .login-btn {
      width: 100%;
      padding: 16px;
      border-radius: 30px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .login-btn-primary {
      background: #1a6bb3;
      color: white;
      border: none;
      margin-bottom: 12px;
    }

    .login-btn-primary:hover {
      background: #155a96;
    }

    .login-btn-secondary {
      background: white;
      color: #1a6bb3;
      border: 2px solid #1a6bb3;
    }

    .login-btn-secondary:hover {
      background: #f0f7ff;
    }

    .login-footer {
      display: flex;
      justify-content: center;
      gap: 40px;
      padding: 20px;
      margin-top: 16px;
    }

    .login-footer-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #1a6bb3;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s;
    }

    .login-footer-icon:hover {
      background: #f0f7ff;
    }

    .login-footer-icon svg {
      width: 20px;
      height: 20px;
      color: #1a6bb3;
    }

    .login-error {
      background: #fee2e2;
      border: 1px solid #fecaca;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 16px;
      display: none;
    }

    .login-error.show {
      display: block;
    }

    .login-error-text {
      font-size: 14px;
      color: #dc2626;
    }

    /* Register Page Styles */
    .register-page {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #f0f4f8;
      z-index: 1000;
      display: none;
      flex-direction: column;
      overflow-y: auto;
    }

    .register-page.show {
      display: flex;
    }

    .register-header {
      background: linear-gradient(180deg, #0d4a7c 0%, #1a6bb3 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .register-back-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      color: white;
    }

    .register-back-btn svg {
      width: 24px;
      height: 24px;
    }

    .register-title {
      font-size: 20px;
      font-weight: 600;
    }

    .register-content {
      padding: 24px 20px;
      flex: 1;
    }

    .register-form-card {
      background: white;
      border-radius: 16px;
      padding: 24px 20px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .register-section-title {
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 20px;
    }

    .register-field-group {
      margin-bottom: 20px;
    }

    .register-field-label {
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 8px;
      display: block;
    }

    .register-field-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      font-size: 16px;
      color: #111827;
      transition: border-color 0.2s;
    }

    .register-field-input:focus {
      outline: none;
      border-color: #1a6bb3;
    }

    .register-submit-btn {
      width: 100%;
      padding: 16px;
      background: #1a6bb3;
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 24px;
      transition: background 0.2s;
    }

    .register-submit-btn:hover {
      background: #155a96;
    }

    /* Loading Overlay Styles */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      z-index: 2000;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .loading-overlay.show {
      display: flex;
    }

    .loading-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 40px;
    }

    .loading-logo-text {
      font-size: 32px;
      font-weight: 700;
      color: #1a6bb3;
      letter-spacing: -0.5px;
    }

    .loading-logo-icon {
      width: 48px;
      height: 48px;
      background: #dc2626;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .loading-logo-icon svg {
      width: 30px;
      height: 30px;
      fill: white;
    }

    .loading-spinner {
      width: 80px;
      height: 80px;
      border: 4px solid #e5e7eb;
      border-top-color: #1a6bb3;
      border-radius: 50%;
      animation: loadingSpin 1s linear infinite;
    }

    @keyframes loadingSpin {
      to { transform: rotate(360deg); }
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-message {
      margin-top: 24px;
      font-size: 16px;
      font-weight: 500;
      color: #6b7280;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- LANDING PAGE -->
  <div class="landing-page" id="landingPage">
    <!-- Landing Header -->
    <header class="landing-header">
      <div class="landing-logo">
        <div class="landing-logo-icon">
          <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
          </svg>
        </div>
        <span class="landing-logo-text">LEADCU</span>
      </div>
      <button class="landing-signin-btn" onclick="showLoginFromLanding()" data-testid="button-landing-signin">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0110 0v4"/>
        </svg>
        SIGN IN
      </button>
      <button class="landing-menu-btn" data-testid="button-landing-menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
    </header>

    <!-- FDIC Notice -->
    <div class="landing-fdic">
      <div class="fdic-logo">
        <svg width="40" height="20" viewBox="0 0 60 24">
          <rect x="0" y="0" width="60" height="24" fill="#1a6bb3" rx="2"/>
          <text x="30" y="16" text-anchor="middle" fill="white" font-size="10" font-weight="bold">FDIC</text>
        </svg>
      </div>
      <span class="fdic-text">FDIC-Insured - Backed by the full faith and credit of the U.S. Government</span>
    </div>

    <!-- Hero Section with CSS illustration -->
    <div class="landing-hero">
      <div class="hero-illustration">
        <div class="hero-phone">
          <div class="phone-screen">
            <div class="phone-header">
              <div class="phone-greeting">LEADCU BANK</div>
              <div class="phone-user">Your Money, Secured</div>
            </div>
            <div class="phone-balance">
              <div class="balance-label">Available Balance</div>
              <div class="balance-amount">$12,450.00</div>
            </div>
            <div class="phone-accounts">
              <div class="phone-account">
                <span>Checking</span>
                <span>$8,200.00</span>
              </div>
              <div class="phone-account">
                <span>Savings</span>
                <span>$4,250.00</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="landing-content">
      <h1 class="landing-headline">Bank anywhere with LEADCU Digital Banking</h1>
      <p class="landing-subtext">Bank on-the-go anywhere, anytime with our app. Enjoy 20+ features that help you make real financial progress.</p>
      
      <div class="landing-signin-link">
        Have an account? <a href="#" onclick="showLoginFromLanding(); return false;" data-testid="link-landing-signin">Sign In</a>
      </div>
    </div>

    <!-- Features Section -->
    <div class="landing-features">
      <h2 class="features-title">LEADCU PERSONAL BANKING</h2>
      <h3 class="features-headline">What can we help you find today?</h3>
      
      <div class="feature-tabs">
        <div class="feature-tab active">Featured</div>
        <div class="feature-tab">Checking & Savings</div>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none" stroke="#1a6bb3" stroke-width="2">
            <rect x="8" y="12" width="32" height="24" rx="2"/>
            <line x1="8" y1="20" x2="40" y2="20"/>
            <line x1="14" y1="28" x2="22" y2="28"/>
          </svg>
        </div>
        <h4 class="feature-card-title">Special Offers</h4>
        <p class="feature-card-text">From everyday banking to credit cards, find ways to save money and make real financial progress.</p>
        <a href="#" class="feature-link">EXPLORE OFFERS</a>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none" stroke="#1a6bb3" stroke-width="2">
            <rect x="6" y="8" width="28" height="32" rx="2"/>
            <rect x="14" y="16" width="28" height="24" rx="2" fill="white"/>
            <line x1="20" y1="24" x2="36" y2="24"/>
            <line x1="20" y1="30" x2="32" y2="30"/>
          </svg>
        </div>
        <h4 class="feature-card-title">Online Support</h4>
        <p class="feature-card-text">Get the support you need using our online tools and resources available 24/7.</p>
        <a href="#" class="feature-link">GET SUPPORT</a>
      </div>
    </div>

    <!-- Footer -->
    <div class="landing-footer">
      <div class="footer-links">
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="#">Security</a>
      </div>
      <p class="footer-copyright">2024 LEADCU Bank. All rights reserved.</p>
    </div>
  </div>

  <!-- LOGIN PAGE -->
  <div class="login-page" id="loginPage" style="display: none;">
    <div class="login-header">
      <div class="login-logo">
        <span class="login-logo-text">LEADCU BANK</span>
        <div class="login-logo-icon">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
          </svg>
        </div>
      </div>
      <div class="login-tagline">
        Discover the benefits of banking <span class="login-tagline-bold">online.</span>
      </div>
    </div>

    <div class="login-form-card">
      <div class="login-error" id="loginError">
        <span class="login-error-text" id="loginErrorText">Invalid credentials</span>
      </div>

      <div class="login-field-group">
        <label class="login-field-label">User ID</label>
        <div class="login-field-row">
          <input type="text" class="login-field-input" id="loginUserId" placeholder="">
          <a href="#" class="login-field-link">FORGOT USER ID?</a>
        </div>
      </div>

      <div class="login-field-group">
        <label class="login-field-label">Password</label>
        <div class="login-field-row">
          <input type="password" class="login-field-input" id="loginPassword" placeholder="">
          <button class="login-show-btn" onclick="togglePasswordVisibility()">SHOW</button>
        </div>
        <div style="text-align: right; margin-top: 8px;">
          <a href="#" class="login-field-link">FORGOT PASSWORD?</a>
        </div>
      </div>

      <div class="login-remember-row">
        <span class="login-remember-text">Remember me</span>
        <div class="login-toggle" id="rememberMeToggle" onclick="toggleRememberMe()"></div>
      </div>

      <div class="login-buttons">
        <button class="login-btn login-btn-primary" onclick="handleLogin()">SIGN IN</button>
        <button class="login-btn login-btn-secondary" onclick="showRegisterPage()">REGISTER</button>
      </div>

      <div class="login-footer">
        <div class="login-footer-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
          </svg>
        </div>
        <div class="login-footer-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
        </div>
        <div class="login-footer-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- REGISTER PAGE -->
  <div class="register-page" id="registerPage">
    <div class="register-header">
      <button class="register-back-btn" onclick="closeRegisterPage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="register-header-title">Create Account</span>
    </div>

    <div class="register-content">
      <div class="register-form-card">
        <div class="register-section-title">Personal Information</div>

        <div class="register-field-group">
          <label class="register-field-label">First Name</label>
          <input type="text" class="register-field-input" id="registerFirstName" placeholder="">
        </div>

        <div class="register-field-group">
          <label class="register-field-label">Surname</label>
          <input type="text" class="register-field-input" id="registerSurname" placeholder="">
        </div>

        <div class="register-field-group">
          <label class="register-field-label">Email</label>
          <input type="email" class="register-field-input" id="registerEmail" placeholder="">
        </div>

        <div class="register-field-group">
          <label class="register-field-label">Phone Number</label>
          <input type="tel" class="register-field-input" id="registerPhone" placeholder="">
        </div>

        <div class="register-field-group">
          <label class="register-field-label">User ID</label>
          <input type="text" class="register-field-input" id="registerUserId" placeholder="">
        </div>

        <div class="register-field-group">
          <label class="register-field-label">Password</label>
          <input type="password" class="register-field-input" id="registerPassword" placeholder="">
        </div>

        <button class="register-submit-btn" onclick="handleRegister()">CREATE ACCOUNT</button>
      </div>
    </div>
  </div>

  <!-- LOADING OVERLAY -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-logo">
        <span class="loading-logo-text">LEADCU BANK</span>
        <div class="loading-logo-icon">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
          </svg>
        </div>
      </div>
      <div class="loading-spinner"></div>
      <div class="loading-message" id="loadingMessage"></div>
    </div>
  </div>

  <div id="app" style="display: none;">
    <!-- HOME PAGE -->
    <div class="page active" id="homePage">
      <!-- Header -->
      <header class="header">
        <div class="header-top">
          <div class="logo">
            <span class="logo-text">LEADCU BANK</span>
            <div class="logo-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
          </div>
          <div class="header-icons">
            <svg class="header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
            </svg>
            <svg class="header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
          </div>
        </div>

        <div class="greeting">
          <span class="greeting-text">Good <span id="timeOfDay">morning</span>, <span class="greeting-name" id="userName">Daniel</span></span>
        </div>

        <div class="date-time">
          <svg class="date-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          <span id="currentDateTime">Today is Tuesday, October 17, 2023.</span>
        </div>

        <div class="quick-actions-label">Quick Actions</div>

        <!-- Quick Actions Card -->
        <div class="quick-actions-card" id="quickActionsCard">
          <div class="overall-balance" style="text-align: center; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px;">Overall Balance</div>
            <div id="overallBalance" style="font-size: 28px; font-weight: 700; color: #1a6bb3;" data-testid="text-overall-balance">$0.00</div>
          </div>
          <div class="quick-actions">
            <div class="quick-action" data-testid="action-lead-transfer" onclick="openLeadTransferPage()">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                </svg>
              </div>
              <span class="quick-action-text">Lead Transfer</span>
            </div>

            <div class="quick-action" data-testid="action-send-money" onclick="openZelleWelcomePage()">
              <div class="quick-action-icon purple">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                </svg>
              </div>
              <span class="quick-action-text">Send money with<br><span class="quick-action-subtext">Zelle</span></span>
            </div>

            <div class="quick-action" data-testid="action-logout" onclick="handleLogout()">
              <div class="quick-action-icon gray">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
              </div>
              <span class="quick-action-text">Logout</span>
            </div>
          </div>

          <!-- Extra Quick Actions (Hidden by default) -->
          <div class="quick-actions-extra" id="quickActionsExtra">
            <div class="quick-action" onclick="openManageCardsPage()" data-testid="action-manage-cards">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                </svg>
              </div>
              <span class="quick-action-text">Manage cards</span>
            </div>

            <div class="quick-action" data-testid="action-pay-bills" onclick="openBillsPage()">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <span class="quick-action-text">Pay bills</span>
            </div>

            <div class="quick-action" onclick="openAddMoneyPage()" data-testid="action-add-money">
              <div class="quick-action-icon blue">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                </svg>
              </div>
              <span class="quick-action-text">Add money</span>
            </div>
          </div>

          <div class="expand-arrow">
            <button class="expand-arrow-btn" id="expandArrowBtn" onclick="toggleQuickActions()" data-testid="button-expand-actions">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <div class="main-content" id="mainContent">
        <!-- Deposits Section -->
        <div class="section-header" onclick="toggleSection('deposits')">
          <svg class="section-chevron expanded" id="depositsChevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
          <span class="section-title">Deposits</span>
        </div>

        <div id="depositsContent"></div>
      </div>
    </div>

    <!-- ACCOUNT DETAILS PAGE -->
    <div class="page" id="accountDetailsPage">
      <div class="details-header">
        <button class="back-btn" onclick="goBack()" data-testid="button-back">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="details-title">Account details</span>
      </div>

      <div class="account-details-card">
        <div class="details-account-name" id="detailsAccountName">Checking Account</div>
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
          <div class="details-account-number" id="detailsAccountNumber">Checking *6016</div>
          <button id="copyBtn" onclick="copyAccountNumber()" style="background: #1a6bb3; color: white; border: none; border-radius: 6px; padding: 6px 12px; font-size: 12px; cursor: pointer; font-weight: 500;" data-testid="button-copy-account">Copy</button>
          <span id="copiedNotification"></span>
        </div>

        <div class="account-nav">
          <button class="account-nav-btn" onclick="prevAccount()" data-testid="button-prev-account">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <div class="account-nav-indicator" id="detailsIndicator"></div>
          <button class="account-nav-btn" onclick="nextAccount()" data-testid="button-next-account">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </button>
        </div>

        <div class="details-balance" id="detailsBalance">$7,473.22</div>
        <div class="details-balance-label">Available Balance</div>
      </div>

      <div class="account-info-section">
        <div class="info-row">
          <span class="info-label">Routing number</span>
          <span class="info-value" id="routingNumber">071025661</span>
        </div>
        <div class="info-row">
          <span class="info-label">Current balance</span>
          <span class="info-value" id="currentBalance">$7,473.22</span>
        </div>
        <div class="info-row">
          <span class="info-label">Last business day balance</span>
          <span class="info-value" id="lastDayBalance">$7,473.22</span>
        </div>
      </div>

      <div class="details-actions">
        <div class="detail-action" data-testid="action-view-statements">
          <div class="detail-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
          </div>
          <span class="detail-action-text">View<br>statements</span>
        </div>

        <div class="detail-action" onclick="openTransferModal()" data-testid="action-transfer-money">
          <div class="detail-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
          </div>
          <span class="detail-action-text">Transfer<br>money</span>
        </div>

        <div class="detail-action" onclick="openBillsPage()" data-testid="action-pay-bills-detail">
          <div class="detail-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
          </div>
          <span class="detail-action-text">Pay<br>bills</span>
        </div>
      </div>

      <div class="transactions-section">
        <div class="transactions-header">
          <span class="transactions-title">Account transactions</span>
          <svg class="transactions-filter" onclick="openTransactionFilter()" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
          </svg>
        </div>
      </div>

      <div class="transactions-list" id="transactionsList">
      </div>
    </div>

    <!-- TRANSACTION FILTER MODAL -->
    <div class="filter-modal-overlay" id="filterModal" onclick="closeTransactionFilter(event)">
      <div class="filter-modal" onclick="event.stopPropagation()">
        <div class="filter-modal-title">Filter Transactions</div>
        
        <div class="filter-options">
          <div class="filter-option" onclick="toggleTransactionFilter('all')">
            <div class="filter-option-checkbox"></div>
            <div class="filter-option-label">All Transactions</div>
          </div>
          
          <div class="filter-option" onclick="toggleTransactionFilter('income')">
            <div class="filter-option-checkbox"></div>
            <div class="filter-option-label">Income (Deposits)</div>
          </div>
          
          <div class="filter-option" onclick="toggleTransactionFilter('expense')">
            <div class="filter-option-checkbox"></div>
            <div class="filter-option-label">Expenses (Withdrawals)</div>
          </div>
          
          <div class="filter-option" onclick="toggleTransactionFilter('pending')">
            <div class="filter-option-checkbox"></div>
            <div class="filter-option-label">Pending</div>
          </div>
        </div>

        <div class="filter-buttons">
          <button class="filter-btn reset" onclick="resetTransactionFilter()">Reset</button>
          <button class="filter-btn apply" onclick="applyTransactionFilter()">Apply</button>
        </div>
      </div>
    </div>

    <!-- TRANSFER MODAL -->
    <div class="modal-overlay" id="transferModal">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-title">Transfer Money</span>
          <button class="modal-close" onclick="closeTransferModal()" data-testid="button-close-modal">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <div class="modal-body" id="transferForm">
          <div class="form-group">
            <label class="form-label">From Account</label>
            <select class="form-select" id="fromAccount" onchange="updateTransferInfo()" data-testid="select-from-account">
            </select>
            <div class="account-balance-info" id="fromAccountBalance"></div>
          </div>

          <div class="form-group">
            <label class="form-label">To Account</label>
            <select class="form-select" id="toAccount" data-testid="select-to-account">
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <div class="amount-input-wrapper">
              <span class="amount-prefix">$</span>
              <input type="number" class="form-input amount-input" id="transferAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-transfer-amount">
            </div>
          </div>

          <button class="transfer-btn" onclick="executeTransfer()" data-testid="button-confirm-transfer">Transfer</button>
        </div>

        <div class="success-message" id="successMessage">
          <div class="success-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <div class="success-title">Transfer Complete</div>
          <div class="success-text" id="successText">Your money has been transferred successfully.</div>
          <button class="transfer-btn" onclick="closeTransferModal()" data-testid="button-done">Done</button>
        </div>
      </div>
    </div>

    <!-- PAY & TRANSFER BOTTOM SHEET -->
    <div class="bottom-sheet-overlay" id="payTransferSheet" onclick="closePayTransferSheet(event)">
      <div class="bottom-sheet" onclick="event.stopPropagation()">
        <div class="bottom-sheet-handle"></div>
        <div class="bottom-sheet-content">
          <div class="sheet-action-item" onclick="handleAccountTransfer()" data-testid="sheet-account-transfer">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
            </div>
            <span class="sheet-action-text">Account transfer</span>
          </div>

          <div class="sheet-action-item" onclick="handleGlobalTransfer()" data-testid="sheet-global-transfer">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
              </svg>
            </div>
            <span class="sheet-action-text">Global Money Transfer</span>
          </div>

          <div class="sheet-action-item" onclick="handleDepositCheque()" data-testid="sheet-deposit-cheque">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
            <span class="sheet-action-text">Deposit a cheque</span>
          </div>

          <div class="sheet-action-item" onclick="handleWithdraw()" data-testid="sheet-withdraw">
            <div class="sheet-action-icon">
              <svg viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v8m4-4l-4 4m-4-4l4 4M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
              </svg>
            </div>
            <span class="sheet-action-text">Withdraw</span>
          </div>

          <div class="sheet-divider"></div>

          <button class="sheet-cancel-btn" onclick="closePayTransferSheet()" data-testid="sheet-cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- GLOBAL MONEY TRANSFER PAGE -->
    <div class="full-page" id="globalTransferPage">
      <div class="full-page-header">
        <span class="full-page-title">Global money transfer</span>
        <button class="close-page-btn" onclick="closeGlobalTransferPage()" data-testid="button-close-global-transfer">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="tabs-container">
        <button class="tab-btn active" onclick="switchGlobalTab('overview', event)" data-testid="tab-overview">Overview</button>
        <button class="tab-btn" onclick="switchGlobalTab('history', event)" data-testid="tab-history">Global transfer history</button>
        <button class="tab-btn" onclick="switchGlobalTab('manage', event)" data-testid="tab-manage">Manage</button>
      </div>

      <!-- OVERVIEW TAB -->
      <div id="tabOverview" class="tab-panel" data-testid="panel-overview">
        <div class="watchlist-card">
          <div class="watchlist-header">
            <span class="watchlist-title">Your currency watchlist</span>
            <button class="edit-btn" data-testid="button-edit-watchlist">EDIT</button>
          </div>
          <div class="currency-item">
            <span class="currency-name">Euro <span class="currency-code">EUR</span></span>
            <span class="currency-rate">1 USD = 0.92 EUR</span>
          </div>
          <div class="currency-item">
            <span class="currency-name">British pound <span class="currency-code">GBP</span></span>
            <span class="currency-rate">1 USD = 0.79 GBP</span>
          </div>
          <div class="currency-item">
            <span class="currency-name">Japanese yen <span class="currency-code">JPY</span></span>
            <span class="currency-rate">1 USD = 149.50 JPY</span>
          </div>
        </div>

        <div class="empty-state" id="contactsEmptyState">
          <div class="empty-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
          </div>
          <div class="empty-text">You haven't added any contacts yet. Let's change that.</div>
          <button class="primary-action-btn" onclick="openAddContactPage()" data-testid="button-add-contact">ADD A CONTACT</button>
        </div>

        <div id="contactsList" style="display:none; padding: 16px;">
          <button class="primary-action-btn" onclick="openAddContactPage()" style="margin-bottom: 16px;" data-testid="button-add-another-contact">ADD A CONTACT</button>
          <div id="savedContactsList"></div>
        </div>
      </div>

      <!-- HISTORY TAB -->
      <div id="tabHistory" class="tab-panel" style="display:none;" data-testid="panel-history">
        <div id="globalTransferHistoryContainer" style="padding: 16px;">
          <div class="empty-state">
            <div class="empty-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="empty-text">No transfer history yet. Your global transfers will appear here.</div>
          </div>
        </div>
      </div>

      <!-- MANAGE TAB -->
      <div id="tabManage" class="tab-panel" style="display:none;" data-testid="panel-manage">
        <div class="manage-section" style="padding: 16px;">
          <div class="manage-card" style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e8ecf0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div style="font-size: 15px; font-weight: 600; color: #111827;">Transfer Limits</div>
                <div style="font-size: 13px; color: #6b7280;">Manage your daily transfer limits</div>
              </div>
              <svg style="width: 20px; height: 20px; color: #6b7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ADD CONTACT PAGE -->
    <div class="full-page" id="addContactPage">
      <div class="full-page-header">
        <span class="full-page-title">Add Recipient</span>
        <button class="close-page-btn" onclick="closeAddContactPage()" data-testid="button-close-add-contact">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <div class="form-group">
          <label class="form-label">Recipient Full Name</label>
          <input type="text" class="form-input" id="contactName" placeholder="Enter full name" data-testid="input-contact-name">
        </div>

        <div class="form-group">
          <label class="form-label">Bank Name</label>
          <input type="text" class="form-input" id="contactBankName" placeholder="Enter bank name" data-testid="input-contact-bank">
        </div>

        <div class="form-group">
          <label class="form-label">Bank Account Number</label>
          <input type="text" class="form-input" id="contactAccountNumber" placeholder="Enter account number" data-testid="input-contact-account">
        </div>

        <div class="form-group">
          <label class="form-label">Recipient Address</label>
          <input type="text" class="form-input" id="contactAddress" placeholder="Enter recipient address" data-testid="input-contact-address">
        </div>

        <div class="form-group">
          <label class="form-label">Bank Address</label>
          <input type="text" class="form-input" id="contactBankAddress" placeholder="Enter bank address" data-testid="input-contact-bank-address">
        </div>

        <div class="form-group">
          <label class="form-label">Routing Number / SWIFT Code</label>
          <input type="text" class="form-input" id="contactRoutingSwift" placeholder="Enter routing or SWIFT code" data-testid="input-contact-routing">
        </div>

        <div class="form-group">
          <label class="form-label">Country</label>
          <select class="form-select" id="contactCountry" data-testid="select-contact-country">
            <option value="">Select country</option>
            <option value="United States">United States</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="Canada">Canada</option>
            <option value="Germany">Germany</option>
            <option value="France">France</option>
            <option value="Japan">Japan</option>
            <option value="Australia">Australia</option>
            <option value="Mexico">Mexico</option>
            <option value="India">India</option>
            <option value="China">China</option>
            <option value="Brazil">Brazil</option>
            <option value="Nigeria">Nigeria</option>
            <option value="South Africa">South Africa</option>
            <option value="Philippines">Philippines</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <button onclick="saveContact()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-testid="button-save-contact">CONTINUE</button>
        <button onclick="closeAddContactPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-cancel-add-contact">CANCEL</button>
      </div>
    </div>

    <!-- GLOBAL TRANSFER AMOUNT PAGE -->
    <div class="full-page" id="globalTransferAmountPage">
      <div class="full-page-header">
        <span class="full-page-title">Send Money</span>
        <button class="close-page-btn" onclick="closeGlobalTransferAmountPage()" data-testid="button-close-global-amount">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <div style="background: #f0f7ff; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
          <div style="font-size: 14px; color: #6b7280; margin-bottom: 4px;">Sending to</div>
          <div style="font-size: 18px; font-weight: 600; color: #111827;" id="globalTransferRecipientName">Recipient Name</div>
          <div style="font-size: 14px; color: #6b7280;" id="globalTransferRecipientBank">Bank Name</div>
          <div style="font-size: 14px; color: #6b7280;" id="globalTransferRecipientCountry">Country</div>
        </div>

        <div class="form-group">
          <label class="form-label">Amount (USD)</label>
          <div class="amount-input-wrapper">
            <span class="amount-prefix">$</span>
            <input type="number" class="form-input amount-input" id="globalTransferAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-global-amount">
          </div>
        </div>

        <div class="glowing-balance-card" style="margin-top: 20px;">
          <div class="glowing-balance-label">Checking Account Balance</div>
          <div class="glowing-balance-account">Checking *<span id="globalTransferAccountLast4">6016</span></div>
          <div class="glowing-balance-amount" id="globalTransferAvailableBalance">$7,473.22</div>
        </div>

        <button onclick="showGlobalTransferConfirmation()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px;" data-testid="button-send-global">SEND MONEY</button>
        <button onclick="closeGlobalTransferAmountPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-cancel-global-send">CANCEL</button>
      </div>
    </div>

    <!-- VERIFICATION REQUIRED MODAL -->
    <div class="verification-modal-overlay" id="verificationModalOverlay">
      <div class="verification-modal">
        <div class="verification-modal-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
        </div>
        <h2 class="verification-modal-title">Account Verification Required</h2>
        <p class="verification-modal-text">Your account needs to be verified before you can send money internationally. Complete verification to continue.</p>
        <button onclick="closeVerificationModal()" class="verification-modal-close-btn" data-testid="button-close-verification">Not Now</button>
        <button onclick="goToVerification()" class="verification-modal-action-btn" data-testid="button-verify-account">Complete Verification</button>
      </div>
    </div>

    <!-- GLOBAL TRANSFER CONFIRMATION PAGE -->
    <div class="full-page" id="globalTransferConfirmPage">
      <div class="full-page-header">
        <span class="full-page-title">Confirm Transfer</span>
        <button class="close-page-btn" onclick="closeGlobalTransferConfirmPage()" data-testid="button-close-global-confirm">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px); display: flex; flex-direction: column;">
        <div style="flex: 1;">
          <div style="text-align: center; margin-bottom: 32px;">
            <div style="font-size: 44px; font-weight: 700; color: #1a6bb3; margin-bottom: 8px;" id="globalConfirmAmount">$0.00</div>
            <div style="font-size: 15px; color: #6b7280;">will be sent</div>
          </div>

          <div style="background: #f0f7ff; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
            <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px; text-transform: uppercase;">From</div>
            <div style="font-size: 16px; font-weight: 600; color: #111827;" id="globalConfirmFromAccount">Checking *6016</div>
          </div>

          <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
            <svg style="width: 24px; height: 24px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
            </svg>
          </div>

          <div style="background: #f0f7ff; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
            <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px; text-transform: uppercase;">To</div>
            <div style="font-size: 16px; font-weight: 600; color: #111827;" id="globalConfirmToName">Recipient Name</div>
            <div style="font-size: 14px; color: #6b7280;" id="globalConfirmToBank">Bank Name</div>
            <div style="font-size: 14px; color: #6b7280;" id="globalConfirmToCountry">Country</div>
          </div>
        </div>

        <div>
          <button onclick="executeGlobalTransferWithLoading()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 8px;" data-testid="button-confirm-global-send">CONFIRM</button>
          <button onclick="closeGlobalTransferConfirmPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer;" data-testid="button-cancel-global-confirm">CANCEL</button>
        </div>
      </div>
    </div>

    <!-- GLOBAL TRANSFER LOADING OVERLAY -->
    <div id="globalTransferLoadingOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(4px); display: none; align-items: center; justify-content: center; z-index: 300;">
      <div style="background: white; border-radius: 16px; padding: 40px 32px; text-align: center; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);">
        <div style="width: 60px; height: 60px; margin: 0 auto 24px; border: 4px solid #e5e7eb; border-top-color: #1a6bb3; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        <div style="font-size: 18px; font-weight: 600; color: #111827;">Processing Transfer...</div>
      </div>
    </div>

    <!-- GLOBAL TRANSFER SUCCESS PAGE -->
    <div class="full-page" id="globalTransferSuccessPage">
      <div style="background: white; min-height: 100vh; display: flex; flex-direction: column;">
        <!-- Header with Blue Background -->
        <div style="background: linear-gradient(180deg, #1e40af 0%, #1e3a8a 100%); padding: 40px 20px 60px; display: flex; justify-content: space-between; align-items: flex-start; position: relative;">
          <button onclick="closeGlobalTransferSuccessPage()" style="background: transparent; border: none; color: white; font-size: 28px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;" data-testid="button-back-global-success">
            <svg fill="none" stroke="white" viewBox="0 0 24 24" style="width: 24px; height: 24px; stroke-width: 2;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          
          <!-- Green Checkmark (centered) -->
          <div style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);">
            <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid white;">
              <svg fill="none" stroke="white" viewBox="0 0 24 24" style="width: 48px; height: 48px; stroke-width: 2.5;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
          </div>

          <button style="background: transparent; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">
            <svg fill="none" stroke="white" viewBox="0 0 24 24" style="width: 24px; height: 24px; stroke-width: 2;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H15v-3.172l8.586-8.586z"/>
            </svg>
          </button>
        </div>

        <!-- White Message Section -->
        <div style="background: white; text-align: center; padding: 20px 16px; border-bottom: 1px solid #e5e7eb;">
          <div style="font-size: 24px; font-weight: 700; color: #111827;">Successful transaction</div>
        </div>

        <!-- Content -->
        <div style="flex: 1; padding: 20px 16px; display: flex; flex-direction: column; overflow-y: auto;">
          <!-- Transfer To Section -->
          <div style="margin-bottom: 20px;">
            <div style="font-size: 14px; color: #6b7280; margin-bottom: 12px;">Transfer to</div>
            <div style="background: white; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; display: flex; align-items: center; gap: 12px;">
              <div style="width: 56px; height: 56px; background: #e0e7ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <div style="font-size: 24px; font-weight: 700; color: #1e40af;">R</div>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 600; color: #111827;" id="receiptToName">Ryan Green</div>
                <div style="font-size: 14px; color: #6b7280;" id="receiptToPhone">(614) 878-1487</div>
              </div>
              <svg fill="none" stroke="#d1d5db" viewBox="0 0 24 24" style="width: 24px; height: 24px; flex-shrink: 0;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
          </div>

          <!-- Details Card -->
          <div style="background: white; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px;">
            <div style="padding: 12px 0; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between;">
              <span style="font-size: 14px; color: #6b7280;">Amount</span>
              <span style="font-size: 16px; font-weight: 600; color: #111827;" id="receiptAmount">$150.00</span>
            </div>
            <div style="padding: 12px 0; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between;">
              <span style="font-size: 14px; color: #6b7280;">Transfer method</span>
              <span style="font-size: 15px; color: #111827;" id="receiptMethod">Transfer Wallet</span>
            </div>
            <div style="padding: 12px 0; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between;">
              <span style="font-size: 14px; color: #6b7280;">Time</span>
              <span style="font-size: 15px; color: #111827;" id="receiptTime">12:30 21/08/23</span>
            </div>
            <div style="padding: 12px 0; display: flex; justify-content: space-between;">
              <span style="font-size: 14px; color: #6b7280;">Transaction ID</span>
              <span style="font-size: 14px; color: #111827; font-weight: 500;" id="receiptConfirmNum">56472</span>
            </div>
          </div>
        </div>

        <!-- Back to Home Button (sticky at bottom) -->
        <div style="padding: 16px; border-top: 1px solid #e5e7eb; background: white;">
          <button style="width: 100%; padding: 14px; background: linear-gradient(180deg, #1e40af 0%, #1e3a8a 100%); color: white; border: none; border-radius: 24px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onclick="closeGlobalTransferSuccessPage()" data-testid="button-done-global-success">Back to home</button>
        </div>
      </div>
    </div>

    <!-- BILLS PAGE -->
    <div class="full-page" id="billsPage">
      <div class="full-page-header">
        <span class="full-page-title">Pay Bills</span>
        <button class="close-page-btn" onclick="closeBillsPage()" data-testid="button-close-bills">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="bills-content">
        <div class="bills-grid">
          <div class="bill-type-card" onclick="openBillPaymentPage('electric')">
            <div class="bill-type-icon electric">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </div>
            <span class="bill-type-name">Electric</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('water')">
            <div class="bill-type-icon water">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c0 4.5-6 7.5-6 12a6 6 0 1012 0c0-4.5-6-7.5-6-12z"/></svg>
            </div>
            <span class="bill-type-name">Water</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('internet')">
            <div class="bill-type-icon internet">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/></svg>
            </div>
            <span class="bill-type-name">Internet</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('phone')">
            <div class="bill-type-icon phone">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>
            </div>
            <span class="bill-type-name">Phone</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('gas')">
            <div class="bill-type-icon gas">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/></svg>
            </div>
            <span class="bill-type-name">Gas</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('tv')">
            <div class="bill-type-icon tv">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
            </div>
            <span class="bill-type-name">TV/Cable</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('insurance')">
            <div class="bill-type-icon insurance">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
            </div>
            <span class="bill-type-name">Insurance</span>
          </div>
          <div class="bill-type-card" onclick="openBillPaymentPage('other')">
            <div class="bill-type-icon other">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
            </div>
            <span class="bill-type-name">Other</span>
          </div>
        </div>
      </div>
    </div>

    <!-- BILL PAYMENT PAGE -->
    <div class="full-page" id="billPaymentPage">
      <div class="full-page-header">
        <span class="full-page-title" id="billPaymentTitle">Pay Electric Bill</span>
        <button class="close-page-btn" onclick="closeBillPaymentPage()" data-testid="button-close-bill-payment">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="bill-payment-content">
        <div class="bill-type-header">
          <div class="bill-type-header-icon bill-type-icon electric" id="billPaymentIcon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
          </div>
          <span class="bill-type-header-text" id="billPaymentType">Electric Bill</span>
        </div>

        <div class="bill-form-section">
          <div class="bill-form-title">Payment Details</div>

          <div class="form-group">
            <label class="form-label">Company/Biller Name</label>
            <input type="text" class="form-input" id="billCompanyName" placeholder="Enter company name" data-testid="input-bill-company">
          </div>

          <div class="form-group">
            <label class="form-label">Account Number</label>
            <input type="text" class="form-input" id="billAccountNumber" placeholder="Enter account number" data-testid="input-bill-account">
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <div class="amount-input-wrapper">
              <span class="amount-prefix">$</span>
              <input type="number" class="form-input amount-input" id="billPaymentAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-bill-amount">
            </div>
          </div>

          <button class="transfer-submit-btn" onclick="proceedToBillConfirmation()" data-testid="button-proceed-bill">Continue</button>
        </div>

        <div class="glowing-balance-card">
          <div class="glowing-balance-label">Checking Account Balance</div>
          <div class="glowing-balance-account">Checking *<span id="billPaymentAccountLast4">6016</span></div>
          <div class="glowing-balance-amount" id="billPaymentBalance">$7,473.22</div>
        </div>
      </div>
    </div>

    <!-- BILL CONFIRMATION PAGE -->
    <div class="full-page" id="billConfirmPage">
      <div class="full-page-header">
        <span class="full-page-title">Confirm Payment</span>
        <button class="close-page-btn" onclick="closeBillConfirmPage()" data-testid="button-close-bill-confirm">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="confirmation-content">
        <div class="confirmation-card">
          <div class="confirmation-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
          </div>
          <div class="confirmation-title">Confirm Payment</div>
          <div class="confirmation-subtitle">Please review the payment details below</div>

          <div class="confirmation-details">
            <div class="confirmation-row">
              <span class="confirmation-label">Bill Type</span>
              <span class="confirmation-value" id="confirmBillType">Electric</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Company</span>
              <span class="confirmation-value" id="confirmBillCompany">Company Name</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Account Number</span>
              <span class="confirmation-value" id="confirmBillAccount">****1234</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">From Account</span>
              <span class="confirmation-value" id="confirmBillFromAccount">Checking *6016</span>
            </div>
            <div class="confirmation-row">
              <span class="confirmation-label">Amount</span>
              <span class="confirmation-value amount" id="confirmBillAmount">$0.00</span>
            </div>
          </div>

          <div class="confirmation-buttons">
            <button class="cancel-btn" onclick="cancelBillPayment()" data-testid="button-cancel-bill">Cancel</button>
            <button class="confirm-btn" onclick="executeBillPayment()" data-testid="button-confirm-bill">Confirm</button>
          </div>
        </div>
      </div>
    </div>

    <!-- BILL PAYMENT RECEIPT PAGE -->
    <div class="full-page" id="billReceiptPage">
      <div class="full-page-header">
        <span class="full-page-title">Payment Complete</span>
        <button class="close-page-btn" onclick="closeBillReceiptPage()" data-testid="button-close-bill-receipt">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="receipt-content">
        <div class="receipt-card">
          <div class="receipt-success-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <div class="receipt-title">Payment Successful!</div>
          <div class="receipt-amount" id="billReceiptAmount">$0.00</div>
          <div class="receipt-subtitle">has been paid successfully</div>

          <div class="receipt-details">
            <div class="receipt-row">
              <span class="receipt-label">Bill Type</span>
              <span class="receipt-value" id="billReceiptType">Electric</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Company</span>
              <span class="receipt-value" id="billReceiptCompany">Company Name</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Account Number</span>
              <span class="receipt-value" id="billReceiptAccount">****1234</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">From Account</span>
              <span class="receipt-value" id="billReceiptFromAccount">Checking *6016</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">Date & Time</span>
              <span class="receipt-value" id="billReceiptDateTime">Dec 8, 2024 10:30 AM</span>
            </div>
            <div class="receipt-row">
              <span class="receipt-label">New Balance</span>
              <span class="receipt-value" id="billReceiptNewBalance">$0.00</span>
            </div>
          </div>

          <div class="receipt-ref" id="billReceiptRef">Reference: BP-1234567890</div>

          <button class="done-btn" onclick="closeBillReceiptPage()" data-testid="button-done-bill-receipt">Done</button>
        </div>
      </div>
    </div>

    <!-- CHECK DEPOSIT AGREEMENT PAGE -->
    <div class="full-page" id="checkDepositAgreementPage">
      <div class="full-page-header">
        <span class="full-page-title">Mobile Check Deposit</span>
        <button class="close-page-btn" onclick="closeCheckDepositAgreementPage()" data-testid="button-close-check-agreement">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="agreement-content" style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          You agree that your use of Mobile Check Deposit is subject to the LEADCU BANK Mobile Check Deposit Terms and Conditions (terms and conditions) set out in your account agreement (current version: the <a href="#" style="color: #1a6bb3; text-decoration: underline;">Electronic Banking Services Agreement</a> and <a href="#" style="color: #1a6bb3; text-decoration: underline;">Better Banking Guide for Business</a>).
        </p>

        <p style="font-size: 15px; font-weight: 600; color: #111827; margin-bottom: 12px;">
          The following is a reminder of important information:
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          You agree to use the service to deposit a digital representation (image) of any of the following original paper items (each an eligible item): checks, certified checks and travelers checks, money orders and bank drafts issued by a United States financial institution or provincial or United States government, in United States dollars, and addressed to you (and/or to your joint accountholder in the case of a joint account). You must provide an image of the front and back of the original eligible item. You agree to only deposit eligible items while you are physically located in United States through cellular or Wi-Fi networks in United States.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          You will not use mobile check deposit to deposit any items that:
        </p>

        <ul style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px; padding-left: 20px;">
          <li style="margin-bottom: 8px;">Are payable to any person or entity other than you</li>
          <li style="margin-bottom: 8px;">Are drawn on a financial institution located outside of the United States</li>
          <li style="margin-bottom: 8px;">Are not payable in United States dollars</li>
          <li style="margin-bottom: 8px;">Are dated more than 6 months prior to the date of deposit</li>
          <li style="margin-bottom: 8px;">Have been previously deposited</li>
        </ul>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          Deposits received on or before 11:59 p.m. Eastern Time (ET) on a business day will have that day as a transaction date, and otherwise will have the next business day as a transaction date.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          Amounts you deposit through this service are subject to the limits set out in your account agreement. We may impose limits on the dollar amount of items and/or number of items which can be deposited and may reject any item. You are liable for any error and your account may be adjusted accordingly.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 16px;">
          There is no charge to deposit items into a personal deposit account. Per-item deposit content fees may apply when you deposit items into a business banking account.
        </p>

        <p style="font-size: 15px; color: #374151; line-height: 1.6; margin-bottom: 24px;">
          The parties expressly request that these terms and conditions and any related documents be drafted in English.
        </p>

        <button onclick="agreeAndProceedToCheckDeposit()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 12px;" data-testid="button-agree-deposit">I AGREE</button>
        <button onclick="closeCheckDepositAgreementPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer;" data-testid="button-cancel-agreement">CANCEL</button>
      </div>
    </div>

    <!-- CHECK DEPOSIT PAGE -->
    <div class="full-page" id="checkDepositPage">
      <div class="full-page-header">
        <span class="full-page-title">Deposit a check</span>
        <button class="close-page-btn" onclick="closeCheckDepositPage()" data-testid="button-close-check-deposit">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <p style="font-size: 14px; color: #6b7280; margin-bottom: 20px;">Step 1 of 3 - Enter details</p>

        <div class="form-group">
          <label class="form-label">Amount</label>
          <div class="amount-input-wrapper">
            <span class="amount-prefix">$</span>
            <input type="number" class="form-input amount-input" id="checkDepositAmount" placeholder="0.00" step="0.01" min="0.01" oninput="validateCheckDepositForm()" data-testid="input-check-amount">
          </div>
          <p style="font-size: 12px; color: #6b7280; margin-top: 4px;">Format: 0.00</p>
        </div>

        <div class="form-group">
          <label class="form-label">To</label>
          <select class="form-select" id="checkDepositAccount" onchange="validateCheckDepositForm()" data-testid="select-check-account">
            <option value="">Choose an account</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Photo of front</label>
          <input type="file" id="checkFrontInput" accept="image/*" style="display: none;" onchange="handleCheckFrontUpload(event)" data-testid="input-check-front">
          <div id="checkFrontUploadArea" onclick="document.getElementById('checkFrontInput').click()" style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: #1a6bb3; font-weight: 600; padding: 12px; border: 2px dashed #d1d5db; border-radius: 8px; transition: all 0.2s;">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            <span id="checkFrontLabel">TAKE PHOTO / UPLOAD</span>
          </div>
          <div id="checkFrontPreview" style="display: none; margin-top: 8px; position: relative;">
            <img id="checkFrontImage" style="width: 100%; max-height: 120px; object-fit: cover; border-radius: 8px; border: 1px solid #e5e7eb;">
            <button onclick="removeCheckFrontImage(event)" style="position: absolute; top: 4px; right: 4px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center;">
              <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Photo of back</label>
          <input type="file" id="checkBackInput" accept="image/*" style="display: none;" onchange="handleCheckBackUpload(event)" data-testid="input-check-back">
          <div id="checkBackUploadArea" onclick="document.getElementById('checkBackInput').click()" style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: #1a6bb3; font-weight: 600; padding: 12px; border: 2px dashed #d1d5db; border-radius: 8px; transition: all 0.2s;">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            <span id="checkBackLabel">TAKE PHOTO / UPLOAD</span>
          </div>
          <div id="checkBackPreview" style="display: none; margin-top: 8px; position: relative;">
            <img id="checkBackImage" style="width: 100%; max-height: 120px; object-fit: cover; border-radius: 8px; border: 1px solid #e5e7eb;">
            <button onclick="removeCheckBackImage(event)" style="position: absolute; top: 4px; right: 4px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center;">
              <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
          </div>
        </div>

        <button id="checkDepositBtn" onclick="openCheckDepositConfirmPage()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: not-allowed; margin-top: 20px; opacity: 0.5; pointer-events: none;" data-testid="button-deposit-check" disabled>CONTINUE</button>
        <button onclick="closeCheckDepositPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-cancel-deposit">CANCEL</button>
      </div>
    </div>

    <!-- CHECK DEPOSIT CONFIRMATION PAGE (Step 2 of 3) -->
    <div class="full-page" id="checkDepositConfirmPage">
      <div class="full-page-header">
        <span class="full-page-title">Review Deposit</span>
        <button class="close-page-btn" onclick="closeCheckDepositConfirmPage()" data-testid="button-close-check-confirm">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <p style="font-size: 14px; color: #6b7280; margin-bottom: 20px;">Step 2 of 3 - Confirm details</p>

        <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
          <h3 style="font-size: 16px; font-weight: 600; color: #111827; margin-bottom: 16px;">Check Deposit Summary</h3>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">Deposit Amount</span>
            <span style="font-size: 16px; font-weight: 700; color: #1a6bb3;" id="checkConfirmAmount">$0.00</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">Deposit To</span>
            <span style="font-size: 14px; font-weight: 600; color: #111827;" id="checkConfirmAccount">Checking *6016</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">Check Front</span>
            <span style="font-size: 14px; font-weight: 500; color: #16a34a;">Uploaded</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0;">
            <span style="font-size: 14px; color: #6b7280;">Check Back</span>
            <span style="font-size: 14px; font-weight: 500; color: #16a34a;">Uploaded</span>
          </div>
        </div>

        <div style="background: #fef3c7; border-radius: 8px; padding: 12px 16px; margin-bottom: 20px; display: flex; align-items: flex-start; gap: 10px;">
          <svg width="20" height="20" fill="none" stroke="#d97706" viewBox="0 0 24 24" style="flex-shrink: 0; margin-top: 2px;">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <p style="font-size: 13px; color: #92400e; line-height: 1.5;">Please review your deposit details carefully. By continuing, you confirm that the check images are clear and the amount is correct.</p>
        </div>

        <div style="background: #f0f9ff; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
          <p style="font-size: 13px; color: #0369a1; line-height: 1.5; margin-bottom: 8px;"><strong>Processing Time:</strong> Deposits submitted before 11:59 PM ET on business days will typically be processed within 1-2 business days.</p>
          <p style="font-size: 13px; color: #0369a1; line-height: 1.5;"><strong>Important:</strong> Do not destroy or dispose of the original check until the deposit has been confirmed and credited to your account.</p>
        </div>

        <button onclick="processCheckDeposit()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer;" data-testid="button-confirm-check-deposit">CONTINUE</button>
        <button onclick="closeCheckDepositConfirmPage()" style="width: 100%; padding: 12px; background: transparent; color: #1a6bb3; border: none; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 8px;" data-testid="button-back-check-deposit">GO BACK</button>
      </div>
    </div>

    <!-- CHECK DEPOSIT LOADING SCREEN -->
    <div class="loading-overlay" id="checkDepositLoadingOverlay">
      <div class="loading-spinner-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Processing Check Deposit...</div>
      </div>
    </div>

    <!-- CHECK DEPOSIT PENDING PAGE (Step 3 of 3) -->
    <div class="full-page" id="checkDepositPendingPage">
      <div class="full-page-header" style="background: #1a6bb3; color: white;">
        <span class="full-page-title" style="color: white;">Check Deposit</span>
        <button class="close-page-btn" onclick="closeCheckDepositPendingPage()" data-testid="button-close-check-pending" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
        <div style="text-align: center; padding: 20px 0;">
          <div style="width: 80px; height: 80px; background: #dcfce7; border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;">
            <svg width="40" height="40" fill="none" stroke="#16a34a" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <h2 style="font-size: 22px; font-weight: 700; color: #111827; margin-bottom: 8px;">Check Deposit Pending</h2>
          <p style="font-size: 14px; color: #6b7280;">Your deposit is being processed</p>
        </div>

        <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
          <h3 style="font-size: 14px; font-weight: 600; color: #6b7280; margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1px;">Deposit Details</h3>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">Amount</span>
            <span style="font-size: 18px; font-weight: 700; color: #1a6bb3;" id="checkPendingAmount">$0.00</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">To Account</span>
            <span style="font-size: 14px; font-weight: 600; color: #111827;" id="checkPendingAccount">Checking *6016</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">Date & Time</span>
            <span style="font-size: 14px; font-weight: 500; color: #111827;" id="checkPendingDateTime">Dec 8, 2024 10:30 AM</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e5e7eb;">
            <span style="font-size: 14px; color: #6b7280;">Transaction ID</span>
            <span style="font-size: 14px; font-weight: 500; color: #111827;" id="checkPendingId">CD-1234567890</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; padding: 12px 0;">
            <span style="font-size: 14px; color: #6b7280;">Status</span>
            <span style="font-size: 14px; font-weight: 600; color: #f59e0b; display: flex; align-items: center; gap: 6px;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg>
              Pending
            </span>
          </div>
        </div>

        <div style="background: #f0f9ff; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
          <p style="font-size: 13px; color: #0369a1; line-height: 1.5;"><strong>What's Next?</strong> Your check deposit will be reviewed and typically processed within 1-2 business days. You'll receive a notification once the funds are available in your account.</p>
        </div>

        <button onclick="closeCheckDepositPendingPage()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer;" data-testid="button-done-check-pending">DONE</button>
      </div>
    </div>

    <!-- LEAD TRANSFER PAGE -->
    <div class="full-page" id="leadTransferPage">
      <div class="full-page-header">
        <span class="full-page-title">Lead Transfer</span>
        <button class="close-page-btn" onclick="closeLeadTransferPage()" data-testid="button-close-lead-transfer">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="lead-transfer-content">
        <div class="transfer-form-section">
          <div class="transfer-form-title">Transfer to Another User</div>

          <div class="form-group">
            <label class="form-label">Recipient Account Number</label>
            <input type="text" class="form-input" id="leadTransferAccount" placeholder="Enter 12-character account number" maxlength="12" oninput="onAccountNumberInput(this.value)" data-testid="input-lead-account" style="text-transform: uppercase;">
            <div id="recipientLookupStatus" style="margin-top: 8px; font-size: 13px; display: none;"></div>
            <div id="recipientNameDisplay" style="margin-top: 8px; padding: 12px; background: #dcfce7; border-radius: 8px; display: none;">
              <div style="font-size: 12px; color: #166534; font-weight: 500;">Recipient Found</div>
              <div style="font-size: 16px; color: #166534; font-weight: 700;" id="recipientName"></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <div class="amount-input-wrapper">
              <span class="amount-prefix">$</span>
              <input type="number" class="form-input amount-input" id="leadTransferAmount" placeholder="0.00" step="0.01" min="0.01" data-testid="input-lead-amount">
            </div>
          </div>

          <button class="transfer-submit-btn" onclick="proceedToConfirmation()" data-testid="button-proceed-transfer">Continue</button>
        </div>

        <div class="glowing-balance-card">
          <div class="glowing-balance-label">Checking Account Balance</div>
          <div class="glowing-balance-account">Checking *<span id="leadTransferAccountLast4">6016</span></div>
          <div class="glowing-balance-amount" id="leadTransferBalance">$7,473.22</div>
        </div>
      </div>
    </div>

    <!-- LEAD TRANSFER CONFIRMATION PAGE -->
    <div class="full-page" id="leadTransferConfirmPage">
      <div class="full-page-header">
        <span class="full-page-title">Review Transfer</span>
        <button class="close-page-btn" onclick="closeLeadTransferConfirmPage()" data-testid="button-close-confirm">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="confirmation-content">
        <div class="confirmation-card">
          <div class="confirmation-header-section">
            <div class="confirmation-amount-display">
              <div class="confirmation-amount-label">Transfer Amount</div>
              <div class="confirmation-amount-value" id="confirmAmount">$0.00</div>
            </div>
          </div>

          <div class="confirmation-divider"></div>

          <div class="confirmation-details">
            <div class="confirmation-detail-group">
              <div class="confirmation-detail-label">From</div>
              <div class="confirmation-detail-value" id="confirmFromAccount">Checking *6016</div>
              <div class="confirmation-detail-subtext">Your account</div>
            </div>
            
            <div class="confirmation-arrow">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
              </svg>
            </div>

            <div class="confirmation-detail-group">
              <div class="confirmation-detail-label">To</div>
              <div class="confirmation-detail-value" id="confirmRecipientName" style="color: #16a34a; font-weight: 700;">Recipient Name</div>
              <div class="confirmation-detail-subtext" id="confirmToAccount">****1234</div>
            </div>
          </div>

          <div class="confirmation-divider"></div>

          <div class="confirmation-buttons">
            <button class="cancel-btn" onclick="cancelLeadTransfer()" data-testid="button-cancel-transfer">Cancel</button>
            <button class="confirm-btn" onclick="executeLeadTransfer()" data-testid="button-confirm-transfer">Confirm Transfer</button>
          </div>
        </div>
      </div>
    </div>

    <!-- LOADING SCREEN -->
    <div class="loading-overlay" id="transferLoadingOverlay">
      <div class="loading-spinner-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Processing Transfer...</div>
      </div>
    </div>

    <!-- LEAD TRANSFER RECEIPT PAGE -->
    <div class="full-page" id="leadTransferReceiptPage">
      <div class="full-page-header">
        <span class="full-page-title">Transfer Complete</span>
        <button class="close-page-btn" onclick="closeLeadTransferReceiptPage()" data-testid="button-close-receipt">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="receipt-content">
        <div class="receipt-card">
          <div class="receipt-header">
            <div class="receipt-success-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <div class="receipt-title">Transfer Successful</div>
          </div>

          <div class="receipt-amount-section">
            <div class="receipt-amount-label">Amount Sent</div>
            <div class="receipt-amount" id="leadReceiptAmount">$0.00</div>
          </div>

          <div class="receipt-divider"></div>

          <div class="receipt-details">
            <div class="receipt-detail-group">
              <div class="receipt-detail-label">From Account</div>
              <div class="receipt-detail-value" id="receiptFromAccount">Checking *6016</div>
            </div>

            <div class="receipt-detail-group">
              <div class="receipt-detail-label">To Recipient</div>
              <div class="receipt-detail-value" id="receiptRecipientName" style="color: #16a34a; font-weight: 700;">Recipient Name</div>
              <div class="receipt-detail-subtext" id="receiptToAccount">****1234</div>
            </div>

            <div class="receipt-detail-group">
              <div class="receipt-detail-label">New Balance</div>
              <div class="receipt-detail-value" id="receiptNewBalance">$0.00</div>
            </div>

            <div class="receipt-detail-group">
              <div class="receipt-detail-label">Date & Time</div>
              <div class="receipt-detail-value" id="receiptDateTime">Dec 8, 2024 10:30 AM</div>
            </div>
          </div>

          <div class="receipt-divider"></div>

          <div class="receipt-footer">
            <div class="receipt-ref" id="receiptRef">Reference Number: LT-1234567890</div>
          </div>

          <button class="done-btn" onclick="closeLeadTransferReceiptPage()" data-testid="button-done-receipt">Done</button>
        </div>
      </div>
    </div>

    <!-- MANAGE CARDS PAGE -->
    <div class="full-page" id="manageCardsPage">
      <div class="manage-cards-header">
        <div class="manage-cards-header-top">
          <div class="manage-cards-logo">
            <div class="manage-cards-logo-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
            <span class="manage-cards-logo-text">LEADCU BANK</span>
          </div>
          <button class="close-page-btn" onclick="closeManageCardsPage()" data-testid="button-close-manage-cards">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
        <div class="manage-cards-title">
          Manage your <strong>debit or<br>ATM card.</strong>
        </div>
      </div>

      <div class="manage-cards-content">
        <!-- Empty State (shown when no cards) -->
        <div class="cards-empty-state" id="cardsEmptyState">
          <div class="cards-empty-icon">
            <div class="cards-empty-icon-inner"></div>
          </div>
          <div class="cards-empty-title">No cards added yet</div>
          <div class="cards-empty-text">Tap "Add Card" to add your first card</div>
        </div>

        <!-- Saved Cards List (shown when cards exist) -->
        <div class="saved-cards-list" id="savedCardsList" style="display: none;"></div>

        <button class="add-card-footer-btn" onclick="openAddCardPage()" data-testid="button-add-card">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
          </svg>
          Add Card
        </button>
      </div>
    </div>

    <!-- ADD CARD PAGE -->
    <div class="full-page" id="addCardPage">
      <div class="full-page-header">
        <button class="back-btn" onclick="closeAddCardPage()" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="full-page-title">Add Card</span>
        <div style="width: 40px;"></div>
      </div>

      <!-- Live Card Preview -->
      <div class="add-card-preview-section">
        <div class="add-card-live-preview">
          <div class="add-card-preview-top">
            <div class="add-card-preview-chip"></div>
            <div class="add-card-preview-type" id="previewCardType">DEBIT</div>
          </div>
          <div class="add-card-preview-number" id="previewCardNumber">**** **** **** ****</div>
          <div class="add-card-preview-bottom">
            <div class="add-card-preview-holder-section">
              <div class="add-card-preview-label">CARD HOLDER</div>
              <div class="add-card-preview-holder-name" id="previewCardHolder">YOUR NAME</div>
            </div>
            <div class="add-card-preview-expiry-section">
              <div class="add-card-preview-label">EXPIRES</div>
              <div class="add-card-preview-expiry" id="previewCardExpiry">MM/YY</div>
            </div>
          </div>
          <div class="add-card-preview-network" id="previewCardNetwork">VISA</div>
        </div>
      </div>

      <!-- Card Form -->
      <div class="add-card-form-section">
        <div class="form-group">
          <label class="form-label">Cardholder Name</label>
          <input type="text" class="form-input" id="cardHolderName" placeholder="Enter name on card" oninput="updateCardPreview()" data-testid="input-cardholder-name">
        </div>

        <div class="form-group">
          <label class="form-label">Card Number</label>
          <input type="text" class="form-input" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this); updateCardPreview()" data-testid="input-card-number">
        </div>

        <div class="card-form-row">
          <div class="form-group">
            <label class="form-label">Expiry Date</label>
            <input type="text" class="form-input" id="cardExpiry" placeholder="MM/YY" maxlength="5" oninput="formatExpiry(this); updateCardPreview()" data-testid="input-card-expiry">
          </div>
          <div class="form-group">
            <label class="form-label">CVV</label>
            <input type="text" class="form-input" id="cardCvv" placeholder="123" maxlength="4" data-testid="input-card-cvv">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Card Type</label>
          <div class="card-type-toggle">
            <button class="card-type-btn active" onclick="selectCardType('debit')" id="btnDebit" data-testid="button-debit">Debit</button>
            <button class="card-type-btn" onclick="selectCardType('credit')" id="btnCredit" data-testid="button-credit">Credit</button>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Card Network</label>
          <div class="card-network-toggle">
            <button class="card-network-btn visa active" onclick="selectCardNetwork('visa')" id="btnVisa" data-testid="button-visa">VISA</button>
            <button class="card-network-btn mastercard" onclick="selectCardNetwork('mastercard')" id="btnMastercard" data-testid="button-mastercard">Mastercard</button>
            <button class="card-network-btn amex" onclick="selectCardNetwork('amex')" id="btnAmex" data-testid="button-amex">AMEX</button>
          </div>
        </div>

        <button class="save-card-btn" onclick="saveCard()" data-testid="button-save-card">Save Card</button>
      </div>
    </div>

    <!-- ADD MONEY - SELECT CARD PAGE -->
    <div class="full-page" id="addMoneySelectCardPage">
      <div class="full-page-header">
        <span class="full-page-title">Add Money</span>
        <button class="close-page-btn" onclick="closeAddMoneySelectCardPage()" data-testid="button-close-add-money-select">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="add-money-card-select">
        <div class="add-money-section-title">Select a card to add money from</div>
        <div id="addMoneyCardsList"></div>

        <!-- Empty state if no cards -->
        <div id="addMoneyNoCards" style="display: none; text-align: center; padding: 40px 20px;">
          <div class="cards-empty-icon" style="margin: 0 auto 20px;">
            <div class="cards-empty-icon-inner"></div>
          </div>
          <div class="cards-empty-title">No cards available</div>
          <div class="cards-empty-text">Please add a card first to add money</div>
          <button class="add-card-footer-btn" onclick="closeAddMoneySelectCardPage(); openManageCardsPage();" style="margin-top: 20px;">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            Add Card
          </button>
        </div>
      </div>
    </div>

    <!-- ADD MONEY - AMOUNT ENTRY PAGE -->
    <div class="full-page" id="addMoneyAmountPage">
      <div class="full-page-header">
        <button class="back-btn" onclick="closeAddMoneyAmountPage()" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="full-page-title">Add Money</span>
        <div style="width: 40px;"></div>
      </div>

      <div class="amount-entry-section">
        <div class="amount-entry-value" id="addMoneyAmountDisplay">$0</div>
        <div class="amount-entry-label">Enter amount to add</div>
      </div>

      <div class="amount-numpad">
        <button class="numpad-key" onclick="addMoneyNumpadPress('1')">1</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('2')">2</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('3')">3</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('4')">4</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('5')">5</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('6')">6</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('7')">7</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('8')">8</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('9')">9</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('.')">.</button>
        <button class="numpad-key" onclick="addMoneyNumpadPress('0')">0</button>
        <button class="numpad-key delete" onclick="addMoneyNumpadDelete()">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z"/>
          </svg>
        </button>
      </div>

      <div class="amount-continue-section">
        <button class="amount-continue-btn" onclick="processAddMoney()" data-testid="button-add-money-continue">Add Money</button>
      </div>
    </div>

    <!-- WITHDRAW METHOD PAGE -->
    <div class="full-page" id="withdrawMethodPage">
      <div class="full-page-header">
        <span class="full-page-title">Withdraw Method</span>
        <button class="close-page-btn" onclick="closeWithdrawMethodPage()" data-testid="button-close-withdraw-method">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div style="padding: 20px; display: flex; flex-direction: column; gap: 16px;">
        <div class="withdraw-method-card" onclick="openWithdrawSelectCardPage()" data-testid="method-withdraw-card" style="background: white; border-radius: 16px; padding: 20px; border: 2px solid #1a6bb3; cursor: pointer; display: flex; align-items: center; gap: 16px; transition: all 0.2s;">
          <div style="width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; background: #f0f7ff; border-radius: 12px;">
            <svg viewBox="0 0 24 24" stroke-width="2" fill="none" stroke="#1a6bb3" style="width: 24px; height: 24px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h10m4 0a1 1 0 011 1v3a1 1 0 01-1 1H3a1 1 0 01-1-1v-3a1 1 0 011-1h18z"/>
            </svg>
          </div>
          <div style="flex: 1;">
            <div style="font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 4px;">Withdraw to Card</div>
            <div style="font-size: 14px; color: #6b7280;">Transfer funds directly to your debit or credit card.</div>
          </div>
        </div>

        <div class="withdraw-method-card" onclick="alert('Withdraw to bank account coming soon!')" data-testid="method-withdraw-bank" style="background: #f3f4f6; border-radius: 16px; padding: 20px; border: 2px solid #e5e7eb; cursor: pointer; display: flex; align-items: center; gap: 16px; transition: all 0.2s; opacity: 0.6;">
          <div style="width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; background: white; border-radius: 12px;">
            <svg viewBox="0 0 24 24" stroke-width="2" fill="none" stroke="#9ca3af" style="width: 24px; height: 24px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-6-6h12M3 9h18a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1v-8a1 1 0 011-1z"/>
            </svg>
          </div>
          <div style="flex: 1;">
            <div style="font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 4px;">Withdraw to bank account</div>
            <div style="font-size: 14px; color: #6b7280;">Transfer funds to your bank account.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- WITHDRAW - SELECT CARD PAGE -->
    <div class="full-page" id="withdrawSelectCardPage">
      <div class="full-page-header">
        <button class="back-btn" onclick="closeWithdrawSelectCardPage()" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="full-page-title">Select Card</span>
        <div style="width: 40px;"></div>
      </div>

      <div class="add-money-card-select">
        <div class="add-money-section-title">Select a card to withdraw to</div>
        <div id="withdrawCardsList"></div>

        <!-- Empty state if no cards -->
        <div id="withdrawNoCards" style="display: none; text-align: center; padding: 40px 20px;">
          <div class="cards-empty-icon" style="margin: 0 auto 20px;">
            <div class="cards-empty-icon-inner"></div>
          </div>
          <div class="cards-empty-title">No cards available</div>
          <div class="cards-empty-text">Please add a card first to withdraw</div>
          <button class="add-card-footer-btn" onclick="closeWithdrawSelectCardPage(); openManageCardsPage();" style="margin-top: 20px;">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            Add Card
          </button>
        </div>
      </div>
    </div>

    <!-- WITHDRAW - AMOUNT ENTRY PAGE -->
    <div class="full-page" id="withdrawAmountPage">
      <div class="full-page-header">
        <button class="back-btn" onclick="closeWithdrawAmountPage()" style="color: white;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="full-page-title">Withdraw</span>
        <div style="width: 40px;"></div>
      </div>

      <div class="amount-entry-section">
        <div class="amount-entry-value" id="withdrawAmountDisplay">$0</div>
        <div class="amount-entry-label">Enter amount to withdraw</div>
      </div>

      <div class="amount-numpad">
        <button class="numpad-key" onclick="withdrawNumpadPress('1')">1</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('2')">2</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('3')">3</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('4')">4</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('5')">5</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('6')">6</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('7')">7</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('8')">8</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('9')">9</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('.')">.</button>
        <button class="numpad-key" onclick="withdrawNumpadPress('0')">0</button>
        <button class="numpad-key delete" onclick="withdrawNumpadDelete()">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z"/>
          </svg>
        </button>
      </div>

      <div class="amount-continue-section">
        <button class="amount-continue-btn" onclick="processWithdraw()" data-testid="button-withdraw-continue">Withdraw</button>
      </div>
    </div>

    <!-- ERROR BANNER -->
    <div class="error-banner" id="errorBanner">
      <svg class="error-banner-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
      </svg>
      <span class="error-banner-text">Try again later</span>
      <button class="error-banner-close" onclick="closeErrorBanner()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- ZELLE ERROR BANNER -->
    <div class="zelle-error-banner" id="zelleErrorBanner">
      <div class="zelle-error-banner-icon">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
        </svg>
      </div>
      <span class="zelle-error-banner-text">Complete account verification to use Zelle</span>
      <button class="zelle-error-banner-close" onclick="closeZelleErrorBanner()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- ZELLE WELCOME PAGE -->
    <div class="zelle-page" id="zelleWelcomePage">
      <div class="zelle-header">
        <button class="zelle-back-btn" onclick="closeZelleWelcomePage()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
      </div>
      <div class="zelle-welcome-content">
        <h1 class="zelle-title">Welcome to <span class="zelle-title-logo">Zelle</span><sup style="font-size: 12px;">Â®</sup></h1>

        <div class="zelle-info-card">
          <p>Welcome to ZelleÂ®, the new way to send money directly between bank accounts in the U.S.</p>
        </div>

        <div class="zelle-info-card">
          <p>By using just your recipient's email address or U.S. mobile number, you can easily, quickly and safely send money to more people.</p>
        </div>

        <div class="zelle-info-card">
          <p>Just follow a few simple steps to activate your profile and get started!</p>
        </div>

        <button class="zelle-get-started-btn" onclick="openZelleMessagesPage()">
          GET <strong>STARTED</strong>
        </button>
      </div>
    </div>

    <!-- ZELLE MESSAGES PAGE -->
    <div class="zelle-page" id="zelleMessagesPage">
      <div class="zelle-header">
        <button class="zelle-back-btn" onclick="closeZelleMessagesPage()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
      </div>
      <div class="zelle-messages-content">
        <h2 class="zelle-messages-title">Messages</h2>

        <div class="zelle-message-card">
          <p>By providing us with your telephone number (including a mobile telephone number) you consent to receiving calls and/or text ("SMS") messages from us or our service providers at that number, including those made by use of an automatic telephone dialing system ("ATDS"), for our everyday business purposes (including notices regarding your account or account activity, identity verification, or to prevent fraud). Please review our Privacy Policy for more information.</p>
          <p>Standard text messaging rates may apply based on your plan with your mobile phone carrier.</p>
        </div>

        <button class="zelle-ok-btn" onclick="handleZelleOk()">OK</button>
      </div>
    </div>

    <!-- ZELLE ACCOUNT LINKING PAGE -->
    <div class="zelle-page" id="zelleAccountLinkingPage">
      <div class="zelle-header">
        <button class="zelle-back-btn" onclick="closeZelleAccountLinkingPage()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
      </div>
      <div class="zelle-messages-content" style="padding: 24px 20px;">
        <h2 style="font-size: 18px; font-weight: 600; color: #1a6bb3; margin-bottom: 24px;">Link Account to Zelle</h2>

        <div class="form-group" style="margin-bottom: 20px;">
          <label style="display: block; font-size: 14px; font-weight: 500; color: #1a6bb3; margin-bottom: 8px;">Mobile Number</label>
          <input type="tel" class="form-input" id="zelleMobileNumber" placeholder="(987) 123-4567" data-testid="input-zelle-phone">
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
          <label style="display: block; font-size: 14px; font-weight: 500; color: #1a6bb3; margin-bottom: 8px;">Email</label>
          <input type="email" class="form-input" id="zelleEmail" placeholder="nickjones@email.com" data-testid="input-zelle-email">
        </div>

        <div class="form-group" style="margin-bottom: 24px;">
          <label style="display: block; font-size: 14px; font-weight: 500; color: #1a6bb3; margin-bottom: 8px;">Primary Account</label>
          <select class="form-input" id="zelleLinkedAccount" data-testid="select-zelle-account" style="cursor: pointer;">
            <option value="">Select an account</option>
            <option value="checking">Checking, ****6016</option>
            <option value="savings">Savings, ****2513</option>
          </select>
          <p style="font-size: 12px; color: #6b7280; margin-top: 8px;">Incoming payments are deposited here.</p>
        </div>

        <button class="zelle-ok-btn" onclick="handleZelleAccountLinkingDone()" style="width: 100%; padding: 14px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer;" data-testid="button-zelle-all-done">ALL DONE</button>
      </div>
    </div>

    <!-- ZELLE MAIN PAGE -->
    <div class="zelle-page" id="zelleMainPage">
      <div class="zelle-header" style="padding: 16px 20px; display: flex; justify-content: space-between; align-items: center;">
        <button class="zelle-back-btn" onclick="closeZelleMainPage()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <h1 style="flex: 1; text-align: center; font-size: 18px; font-weight: 600; color: #111827;">Send Money with Zelle<sup style="font-size: 12px;">Â®</sup></h1>
        <button style="width: 32px; height: 32px; background: transparent; border: none; cursor: pointer;">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
        </button>
      </div>

      <div class="zelle-messages-content" style="padding: 20px;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
          <div style="background: white; border-radius: 12px; padding: 20px; text-align: center; box-shadow: 0 1px 4px rgba(0,0,0,0.08); border: 1px solid #e8ecf0;">
            <svg style="width: 40px; height: 40px; margin: 0 auto 12px; color: #1a6bb3; stroke-width: 1.5;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            <div style="font-size: 16px; font-weight: 600; color: #111827;">Send</div>
          </div>
          <div style="background: white; border-radius: 12px; padding: 20px; text-align: center; box-shadow: 0 1px 4px rgba(0,0,0,0.08); border: 1px solid #e8ecf0;">
            <svg style="width: 40px; height: 40px; margin: 0 auto 12px; color: #1a6bb3; stroke-width: 1.5;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m0 0v6m0-6H6m6 0h6"/>
            </svg>
            <div style="font-size: 16px; font-weight: 600; color: #111827;">Request</div>
          </div>
        </div>

        <div style="margin-bottom: 24px;">
          <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Quick Send</h3>
          <div style="background: #f8fafc; border-radius: 12px; padding: 20px; text-align: center; color: #6b7280;">
            <p>No recent recipients yet. Send money to get started!</p>
          </div>
        </div>

        <div style="border-top: 1px solid #e5e7eb; padding-top: 16px;">
          <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Activity</h3>
          <p style="font-size: 13px; color: #6b7280; margin-bottom: 8px;">No activity yet</p>
        </div>

        <div style="border-top: 1px solid #e5e7eb; padding-top: 16px; margin-top: 16px;">
          <button style="width: 100%; padding: 12px; background: transparent; border: none; color: #1a6bb3; font-size: 14px; font-weight: 600; cursor: pointer; text-align: left;">Manage Recipients</button>
        </div>
      </div>
    </div>

    <!-- TRY AGAIN LATER PAGE -->
    <div class="full-page" id="tryAgainPage">
      <div class="full-page-header">
        <span class="full-page-title">Add money</span>
        <button class="close-page-btn" onclick="closeTryAgainPage()" data-testid="button-close-try-again">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="error-message-page">
        <div class="error-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
          </svg>
        </div>
        <div class="error-title">Try again later</div>
        <div class="error-text">We're unable to process your request at this time. Please try again later.</div>
        <button class="primary-action-btn" onclick="closeTryAgainPage()" data-testid="button-ok-try-again">OK</button>
      </div>
    </div>

    <!-- CRYPTO LIST PAGE -->
    <div class="full-page crypto-list-page" id="cryptoListPage">
      <div class="full-page-header">
        <span class="full-page-title">Crypto</span>
        <button class="close-page-btn" onclick="closeCryptoListPage()" data-testid="button-close-crypto-list">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="crypto-list-content">
        <div class="crypto-list-item" onclick="openBTCDetailPage()">
          <div class="crypto-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13h-2v1H9v2h1.5v4H9v2h1.5v1h2v-1h.5c1.38 0 2.5-1.12 2.5-2.5 0-.89-.47-1.67-1.17-2.11.42-.39.67-.94.67-1.54 0-1.1-.9-1.85-2-1.85zm0 6h-.5v-2h.5c.55 0 1 .45 1 1s-.45 1-1 1zm0-4h-.5V8h.5c.55 0 1 .35 1 .75s-.45.75-1 .75z"/>
            </svg>
          </div>
          <div class="crypto-info">
            <div class="crypto-name">Bitcoin</div>
            <div class="crypto-symbol">BTC</div>
          </div>
          <div class="crypto-price-info">
            <div class="crypto-price" id="btcListPrice">$91,257.58</div>
            <div class="crypto-change" id="btcListChange">+2.02%</div>
          </div>
        </div>
      </div>
    </div>

    <!-- BTC DETAIL PAGE -->
    <div class="full-page" id="btcDetailPage" style="padding-bottom: 100px;">
      <div class="crypto-detail-header">
        <button class="back-btn" onclick="closeBTCDetailPage()" data-testid="button-back-btc">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <div class="crypto-detail-title">
          <h1>BTC</h1>
          <span>COIN | Bitcoin</span>
        </div>
        <div class="crypto-detail-edit">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
          </svg>
        </div>
      </div>

      <div class="crypto-price-section">
        <div class="crypto-gas-fee">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 10H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"/>
          </svg>
          $1.82
        </div>
        <div class="crypto-main-price" id="btcMainPrice">$91,257.58</div>
        <div class="crypto-price-change" id="btcPriceChange">â†‘ $1,815.20 (+2.02%)</div>
      </div>

      <div class="crypto-chart-container">
        <canvas id="btcChart" class="crypto-chart"></canvas>
      </div>

      <div class="chart-time-filters">
        <button class="chart-time-btn" onclick="setChartTimeframe('1H')">1H</button>
        <button class="chart-time-btn active" onclick="setChartTimeframe('1D')">1D</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('1W')">1W</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('1M')">1M</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('1Y')">1Y</button>
        <button class="chart-time-btn" onclick="setChartTimeframe('All')">All</button>
      </div>

      <div class="crypto-tabs">
        <button class="crypto-tab active" onclick="switchCryptoTab('holdings')">Holdings</button>
        <button class="crypto-tab" onclick="switchCryptoTab('history')">History</button>
        <button class="crypto-tab" onclick="switchCryptoTab('about')">About</button>
      </div>

      <div id="cryptoHoldingsTab" class="crypto-tab-content active">
        <div class="crypto-holdings-section">
          <div class="crypto-holdings-title">My Balance</div>
          <div class="crypto-holdings-card">
            <div class="crypto-holdings-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13h-2v1H9v2h1.5v4H9v2h1.5v1h2v-1h.5c1.38 0 2.5-1.12 2.5-2.5 0-.89-.47-1.67-1.17-2.11.42-.39.67-.94.67-1.54 0-1.1-.9-1.85-2-1.85zm0 6h-.5v-2h.5c.55 0 1 .45 1 1s-.45 1-1 1zm0-4h-.5V8h.5c.55 0 1 .35 1 .75s-.45.75-1 .75z"/>
              </svg>
            </div>
            <div class="crypto-holdings-info">
              <div class="crypto-holdings-name">Bitcoin</div>
              <div class="crypto-holdings-amount" id="btcHoldingsAmount">0.00 BTC</div>
            </div>
            <div class="crypto-holdings-value">
              <div class="crypto-holdings-usd" id="btcHoldingsUsd">$0.00</div>
              <div class="crypto-holdings-pnl">-</div>
            </div>
          </div>
        </div>
      </div>

      <div id="cryptoHistoryTab" class="crypto-tab-content">
        <div class="crypto-history-empty">
          <p>No transaction history yet</p>
        </div>
      </div>

      <div id="cryptoAboutTab" class="crypto-tab-content">
        <div class="crypto-about-content">
          <h3>About Bitcoin</h3>
          <p>Bitcoin is a decentralized digital currency that can be transferred on the peer-to-peer bitcoin network. Bitcoin transactions are verified by network nodes through cryptography and recorded in a public distributed ledger called a blockchain.</p>
          <p>Bitcoin was invented in 2008 by an unknown person or group of people using the name Satoshi Nakamoto. The currency began use in 2009, when its implementation was released as open-source software.</p>
        </div>
      </div>

      <div class="crypto-action-bar">
        <button class="crypto-action-btn" onclick="handleCryptoReceive()">
          <div class="crypto-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
            </svg>
          </div>
          <span class="crypto-action-text">Receive</span>
        </button>
        <button class="crypto-action-btn" onclick="handleCryptoSell()">
          <div class="crypto-action-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
          </div>
          <span class="crypto-action-text">Sell</span>
        </button>
      </div>
    </div>

    <!-- Bitcoin Receive Page -->
    <div class="btc-receive-page" id="btcReceivePage">
      <div class="receive-page-header">
        <button class="receive-close-btn" onclick="closeBtcReceivePage()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
        <h1 class="receive-page-title">Receive</h1>
        <button class="receive-info-btn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </button>
      </div>

      <div class="receive-page-content">
        <div class="receive-warning-box">
          <svg class="warning-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <p class="warning-text">Only send Bitcoin (BTC) assets to this address. Other assets will be lost forever.</p>
        </div>

        <div class="receive-crypto-header">
          <div class="receive-crypto-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13h-2v1H9v2h1.5v4H9v2h1.5v1h2v-1h.5c1.38 0 2.5-1.12 2.5-2.5 0-.89-.47-1.67-1.17-2.11.42-.39.67-.94.67-1.54 0-1.1-.9-1.85-2-1.85zm0 6h-.5v-2h.5c.55 0 1 .45 1 1s-.45 1-1 1zm0-4h-.5V8h.5c.55 0 1 .35 1 .75s-.45.75-1 .75z"/>
            </svg>
          </div>
          <p class="receive-crypto-name">BTC Bitcoin</p>
        </div>

        <div class="qr-code-container">
          <canvas id="btcQrCode" class="qr-code-canvas"></canvas>
        </div>

        <div class="receive-address-box">
          <p class="receive-address-label">Your Bitcoin Address</p>
          <p class="receive-address-text" id="btcAddressDisplay">bc1q4nw59uzhdlp5vg8rxp2v0ar6d7d60kaygzhwdyq5ar7h84k57jvqyv7gqs</p>
        </div>

        <div class="receive-actions">
          <button class="receive-copy-btn" onclick="copyBtcAddress()">
            <svg fill="currentColor" viewBox="0 0 24 24">
              <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
            </svg>
            <span id="copyBtnText">Copy Address</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" id="bottomNav" style="display: none;">
      <div class="nav-item active" onclick="goHome()" data-testid="nav-home">
        <svg fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        <span>Home</span>
      </div>

      <div class="nav-item" onclick="openPayTransferSheet()" data-testid="nav-pay-transfer">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span>Pay & Transfer</span>
      </div>

      <div class="nav-item" onclick="handleDepositCheque()" data-testid="nav-deposit">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
        </svg>
        <span>Deposit a check</span>
      </div>

      <div class="nav-item" onclick="openMorePage()" data-testid="nav-more">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <span>More</span>
      </div>
    </nav>
  </div>

  <!-- More Page -->
  <div class="more-page" id="morePage">
    <div class="more-header">
      <button class="more-back-btn" onclick="closeMorePage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <h1 class="more-header-title">More</h1>
    </div>
    <div class="more-content">
      <div class="more-menu-list">
        <!-- Profile -->
        <button class="more-menu-item" onclick="handleMoreOption('profile')">
          <div class="more-menu-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </div>
          <div class="more-menu-text">
            <p class="more-menu-title">Profile</p>
            <p class="more-menu-subtitle">View and edit your profile</p>
          </div>
          <div class="more-menu-arrow">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        </button>

        <!-- Security -->
        <button class="more-menu-item" onclick="handleMoreOption('security')">
          <div class="more-menu-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
          </div>
          <div class="more-menu-text">
            <p class="more-menu-title">Security</p>
            <p class="more-menu-subtitle">Password and security settings</p>
          </div>
          <div class="more-menu-arrow">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        </button>

        <!-- Help & Support -->
        <button class="more-menu-item" onclick="handleMoreOption('help')">
          <div class="more-menu-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div class="more-menu-text">
            <p class="more-menu-title">Help & Support</p>
            <p class="more-menu-subtitle">Get help and contact us</p>
          </div>
          <div class="more-menu-arrow">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        </button>

        <!-- Verification -->
        <button class="more-menu-item" onclick="handleMoreOption('verification')">
          <div class="more-menu-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
          </div>
          <div class="more-menu-text">
            <p class="more-menu-title">Verification</p>
            <p class="more-menu-subtitle">Verify your account</p>
          </div>
          <div class="more-menu-arrow">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        </button>
      </div>
    </div>
  </div>

  <!-- SECURITY PAGE -->
  <div class="full-page" id="securityPage">
    <div class="full-page-header">
      <button class="back-btn" onclick="closeSecurityPage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="full-page-title">Security Settings</span>
    </div>
    <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
      <h2 style="font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 20px;">Reset Password</h2>
      
      <div class="login-error" id="resetPasswordError">
        <span class="login-error-text" id="resetPasswordErrorText">Error message</span>
      </div>
      
      <div class="form-group">
        <label class="form-label">Current Password</label>
        <input type="password" class="form-input" id="oldPassword" placeholder="Enter your current password" data-testid="input-old-password">
      </div>

      <div class="form-group">
        <label class="form-label">New Password</label>
        <input type="password" class="form-input" id="newPassword" placeholder="Enter your new password" data-testid="input-new-password">
      </div>

      <div class="form-group">
        <label class="form-label">Confirm New Password</label>
        <input type="password" class="form-input" id="confirmPassword" placeholder="Confirm your new password" data-testid="input-confirm-password">
      </div>

      <button onclick="handlePasswordReset()" style="width: 100%; padding: 16px; background: #1a6bb3; color: white; border: none; border-radius: 30px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 24px;" data-testid="button-reset-password">UPDATE PASSWORD</button>
    </div>
  </div>

  <!-- HELP & SUPPORT PAGE -->
  <div class="full-page" id="helpSupportPage">
    <div class="full-page-header">
      <button class="back-btn" onclick="closeHelpSupportPage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="full-page-title">Help & Support</span>
    </div>
    <div style="padding: 20px; background: white; min-height: calc(100vh - 60px);">
      <p style="font-size: 15px; color: #6b7280; margin-bottom: 24px; line-height: 1.6;">Get in touch with our support team through any of these channels:</p>

      <button onclick="handleContactOption('chat')" style="width: 100%; padding: 18px 16px; background: white; border: 2px solid #1a6bb3; border-radius: 12px; margin-bottom: 12px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: all 0.2s;" data-testid="button-live-chat">
        <svg style="width: 24px; height: 24px; color: #1a6bb3; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
        <div style="text-align: left;">
          <div style="font-size: 16px; font-weight: 600; color: #111827;">Live Chat</div>
          <div style="font-size: 13px; color: #6b7280;">Chat with us online</div>
        </div>
      </button>

      <button onclick="handleContactOption('call')" style="width: 100%; padding: 18px 16px; background: white; border: 2px solid #1a6bb3; border-radius: 12px; margin-bottom: 12px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: all 0.2s;" data-testid="button-call-support">
        <svg style="width: 24px; height: 24px; color: #1a6bb3; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        <div style="text-align: left;">
          <div style="font-size: 16px; font-weight: 600; color: #111827;">Call Us</div>
          <div style="font-size: 13px; color: #6b7280;">1-800-LEADCU-1</div>
        </div>
      </button>

      <button onclick="handleContactOption('email')" style="width: 100%; padding: 18px 16px; background: white; border: 2px solid #1a6bb3; border-radius: 12px; margin-bottom: 12px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: all 0.2s;" data-testid="button-email-support">
        <svg style="width: 24px; height: 24px; color: #1a6bb3; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        <div style="text-align: left;">
          <div style="font-size: 16px; font-weight: 600; color: #111827;">Email Us</div>
          <div style="font-size: 13px; color: #6b7280;">support@leadcubank.com</div>
        </div>
      </button>
    </div>
  </div>

  <!-- VERIFICATION PAGE -->
  <div class="full-page" id="verificationPageFull">
    <div class="full-page-header">
      <button class="back-btn" onclick="closeVerificationPage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="full-page-title">Account Verification</span>
    </div>
    <div style="padding: 20px; background: #f8fafc; min-height: calc(100vh - 60px);">
      <div style="text-align: center; margin-bottom: 32px;">
        <div style="width: 80px; height: 80px; background: #f0f7ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
          <svg style="width: 44px; height: 44px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
          </svg>
        </div>
        <h2 style="font-size: 22px; font-weight: 700; color: #111827; margin-bottom: 8px;">Verify Your Account</h2>
        <p style="font-size: 14px; color: #6b7280; line-height: 1.5;">Complete the steps below to fully verify your account and unlock all features.</p>
      </div>

      <!-- Step 1: ID Verification -->
      <div id="verificationStep1" style="background: white; border-radius: 16px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); border: 2px solid #e5e7eb;">
        <div style="display: flex; align-items: flex-start; gap: 16px;">
          <div id="step1StatusIcon" style="width: 48px; height: 48px; background: #f0f7ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
            <svg style="width: 24px; height: 24px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/>
            </svg>
          </div>
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
              <span style="font-size: 11px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">Step 1</span>
              <span id="step1Badge" style="display: none; font-size: 10px; font-weight: 600; color: #16a34a; background: #dcfce7; padding: 2px 8px; border-radius: 10px;">COMPLETED</span>
            </div>
            <h3 style="font-size: 17px; font-weight: 600; color: #111827; margin-bottom: 6px;">ID Verification</h3>
            <p style="font-size: 13px; color: #6b7280; line-height: 1.5; margin-bottom: 16px;">Upload a photo of your government-issued ID (front and back) to verify your identity.</p>
            <button id="step1Button" onclick="openIdVerificationPage()" style="width: 100%; padding: 14px 20px; background: #1a6bb3; color: white; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background 0.2s;" data-testid="button-id-verification">
              Verify ID
            </button>
          </div>
        </div>
      </div>

      <!-- Step 2: Deposit Verification -->
      <div id="verificationStep2" style="background: white; border-radius: 16px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); border: 2px solid #e5e7eb;">
        <div style="display: flex; align-items: flex-start; gap: 16px;">
          <div id="step2StatusIcon" style="width: 48px; height: 48px; background: #f0f7ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
            <svg style="width: 24px; height: 24px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
              <span style="font-size: 11px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">Step 2</span>
              <span id="step2Badge" style="display: none; font-size: 10px; font-weight: 600; color: #16a34a; background: #dcfce7; padding: 2px 8px; border-radius: 10px;">COMPLETED</span>
            </div>
            <h3 style="font-size: 17px; font-weight: 600; color: #111827; margin-bottom: 6px;">Deposit Verification</h3>
            <p style="font-size: 13px; color: #6b7280; line-height: 1.5; margin-bottom: 16px;">Complete your verification by making an initial deposit to your crypto wallet.</p>
            <button id="step2Button" onclick="openDepositVerificationPage()" style="width: 100%; padding: 14px 20px; background: #1a6bb3; color: white; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background 0.2s;" data-testid="button-deposit-verification">
              Complete Deposit
            </button>
          </div>
        </div>
      </div>

      <!-- Verification Status Footer -->
      <div style="margin-top: 24px; text-align: center;">
        <p style="font-size: 12px; color: #9ca3af;">Need help? <a onclick="openHelpSupportPage()" style="color: #1a6bb3; font-weight: 600; cursor: pointer;">Contact Support</a></p>
      </div>
    </div>
  </div>

  <!-- ID VERIFICATION UPLOAD PAGE -->
  <div class="full-page" id="idVerificationPageFull">
    <div class="full-page-header">
      <button class="back-btn" onclick="closeIdVerificationPage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="full-page-title">ID Verification</span>
    </div>
    <div style="padding: 20px; background: #f8fafc; min-height: calc(100vh - 60px);">
      <!-- Loading Overlay -->
      <div id="idUploadLoading" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.95); z-index: 1000; align-items: center; justify-content: center; flex-direction: column;">
        <div style="width: 60px; height: 60px; border: 4px solid #e5e7eb; border-top-color: #1a6bb3; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px;"></div>
        <p style="font-size: 16px; font-weight: 600; color: #111827;">Uploading your documents...</p>
        <p style="font-size: 14px; color: #6b7280; margin-top: 8px;">Please wait while we process your ID</p>
      </div>

      <div style="text-align: center; margin-bottom: 28px;">
        <div style="width: 64px; height: 64px; background: #f0f7ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
          <svg style="width: 32px; height: 32px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/>
          </svg>
        </div>
        <h2 style="font-size: 20px; font-weight: 700; color: #111827; margin-bottom: 8px;">Upload Your ID</h2>
        <p style="font-size: 14px; color: #6b7280; line-height: 1.5;">Please upload clear photos of the front and back of your government-issued ID.</p>
      </div>

      <!-- ID Front Upload -->
      <div style="background: white; border-radius: 16px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); border: 2px dashed #d1d5db;" id="idFrontContainer">
        <div style="text-align: center;">
          <div style="width: 48px; height: 48px; background: #f0f7ff; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px;">
            <svg style="width: 24px; height: 24px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
          </div>
          <h3 style="font-size: 15px; font-weight: 600; color: #111827; margin-bottom: 4px;">Front of ID</h3>
          <p style="font-size: 13px; color: #6b7280; margin-bottom: 16px;">Upload the front side of your ID</p>
          <input type="file" id="idFrontInput" accept="image/*" style="display: none;" onchange="handleIdFrontUpload(this)">
          <button onclick="document.getElementById('idFrontInput').click()" style="padding: 12px 24px; background: #f0f7ff; color: #1a6bb3; border: 2px solid #1a6bb3; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;" data-testid="button-upload-id-front">
            Choose File
          </button>
          <p id="idFrontFileName" style="font-size: 12px; color: #16a34a; margin-top: 12px; display: none;"></p>
        </div>
      </div>

      <!-- ID Back Upload -->
      <div style="background: white; border-radius: 16px; padding: 20px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); border: 2px dashed #d1d5db;" id="idBackContainer">
        <div style="text-align: center;">
          <div style="width: 48px; height: 48px; background: #f0f7ff; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px;">
            <svg style="width: 24px; height: 24px; color: #1a6bb3;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
          </div>
          <h3 style="font-size: 15px; font-weight: 600; color: #111827; margin-bottom: 4px;">Back of ID</h3>
          <p style="font-size: 13px; color: #6b7280; margin-bottom: 16px;">Upload the back side of your ID</p>
          <input type="file" id="idBackInput" accept="image/*" style="display: none;" onchange="handleIdBackUpload(this)">
          <button onclick="document.getElementById('idBackInput').click()" style="padding: 12px 24px; background: #f0f7ff; color: #1a6bb3; border: 2px solid #1a6bb3; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;" data-testid="button-upload-id-back">
            Choose File
          </button>
          <p id="idBackFileName" style="font-size: 12px; color: #16a34a; margin-top: 12px; display: none;"></p>
        </div>
      </div>

      <!-- Submit Button -->
      <button id="submitIdVerification" onclick="submitIdVerification()" style="width: 100%; padding: 16px 20px; background: #d1d5db; color: #6b7280; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: not-allowed;" disabled data-testid="button-submit-id-verification">
        Submit for Verification
      </button>

      <p style="font-size: 12px; color: #9ca3af; text-align: center; margin-top: 16px; line-height: 1.5;">Your documents are encrypted and securely stored. We will review your ID within 24-48 hours.</p>
    </div>
  </div>

  <!-- DEPOSIT VERIFICATION INSTRUCTIONS PAGE -->
  <div class="full-page" id="depositVerificationPageFull">
    <div class="full-page-header">
      <button class="back-btn" onclick="closeDepositVerificationPage()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <span class="full-page-title">Deposit Verification</span>
    </div>
    <div style="padding: 20px; background: #f8fafc; min-height: calc(100vh - 60px);">
      <div style="text-align: center; margin-bottom: 28px;">
        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);">
          <svg style="width: 40px; height: 40px; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <h2 style="font-size: 22px; font-weight: 700; color: #111827; margin-bottom: 8px;">Final Verification Step</h2>
        <p style="font-size: 15px; color: #6b7280; line-height: 1.5;">This is the final step on your verification process</p>
      </div>

      <!-- Instructions Card -->
      <div style="background: white; border-radius: 16px; padding: 24px 20px; margin-bottom: 20px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;">
          <div style="width: 44px; height: 44px; background: #fef3c7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
            <svg style="width: 24px; height: 24px; color: #d97706;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div>
            <h3 style="font-size: 16px; font-weight: 600; color: #111827;">Deposit Requirement</h3>
            <p style="font-size: 14px; color: #6b7280;">Deposit <span style="font-weight: 700; color: #1a6bb3;">$2,500 USD</span> to your crypto wallet</p>
          </div>
        </div>

        <h4 style="font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 16px; text-transform: uppercase; letter-spacing: 0.5px;">How to Complete</h4>

        <div style="display: flex; flex-direction: column; gap: 16px;">
          <!-- Step 1 -->
          <div style="display: flex; gap: 12px;">
            <div style="width: 28px; height: 28px; background: #1a6bb3; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <span style="font-size: 13px; font-weight: 700; color: white;">1</span>
            </div>
            <div>
              <p style="font-size: 14px; color: #111827; line-height: 1.6;">Go to the <strong>Crypto & Verification</strong> page from your dashboard</p>
            </div>
          </div>

          <!-- Step 2 -->
          <div style="display: flex; gap: 12px;">
            <div style="width: 28px; height: 28px; background: #1a6bb3; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <span style="font-size: 13px; font-weight: 700; color: white;">2</span>
            </div>
            <div>
              <p style="font-size: 14px; color: #111827; line-height: 1.6;">Choose <strong>BTC</strong> as your cryptocurrency</p>
            </div>
          </div>

          <!-- Step 3 -->
          <div style="display: flex; gap: 12px;">
            <div style="width: 28px; height: 28px; background: #1a6bb3; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <span style="font-size: 13px; font-weight: 700; color: white;">3</span>
            </div>
            <div>
              <p style="font-size: 14px; color: #111827; line-height: 1.6;">Click on the <strong>Receive</strong> button</p>
            </div>
          </div>

          <!-- Step 4 -->
          <div style="display: flex; gap: 12px;">
            <div style="width: 28px; height: 28px; background: #1a6bb3; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <span style="font-size: 13px; font-weight: 700; color: white;">4</span>
            </div>
            <div>
              <p style="font-size: 14px; color: #111827; line-height: 1.6;">You will see your <strong>BTC verification wallet address</strong> where your deposit will be sent to</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Info Box -->
      <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px; padding: 16px; margin-bottom: 24px;">
        <div style="display: flex; gap: 12px;">
          <svg style="width: 20px; height: 20px; color: #16a34a; flex-shrink: 0; margin-top: 2px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <p style="font-size: 14px; color: #166534; line-height: 1.6;">The deposited amount will reflect in your crypto balance once the transaction is confirmed on the blockchain.</p>
        </div>
      </div>

      <!-- Go to Crypto Page Button -->
      <button onclick="goToCryptoFromVerification()" style="width: 100%; padding: 16px 20px; background: #1a6bb3; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 12px; transition: background 0.2s;" data-testid="button-go-to-crypto">
        Go to Crypto & Verification
      </button>

      <button onclick="closeDepositVerificationPage()" style="width: 100%; padding: 14px 20px; background: transparent; color: #6b7280; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 14px; font-weight: 600; cursor: pointer;" data-testid="button-back-to-verification">
        Back to Verification
      </button>
    </div>
  </div>

  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <script>
    // ===== LOGIN/LOGOUT FUNCTIONS =====

    // Show/hide login page
    function showLoginPage() {
      document.getElementById('loginPage').classList.add('show');
      document.getElementById('loginPage').style.display = 'block';
      document.getElementById('app').style.display = 'none';
      document.getElementById('loginError').style.display = 'none';
      document.getElementById('loginUserId').value = '';
      document.getElementById('loginPassword').value = '';
    }

    // Show login page from landing page
    function showLoginFromLanding() {
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('loginPage').style.display = 'block';
      document.getElementById('loginPage').classList.add('show');
      document.getElementById('loginError').style.display = 'none';
    }

    // Show register page from landing page
    function showRegisterFromLanding() {
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('loginPage').style.display = 'block';
      document.getElementById('loginPage').classList.add('show');
      // Show register page
      document.getElementById('registerPage').classList.add('show');
      // Clear register form
      document.getElementById('firstName').value = '';
      document.getElementById('surname').value = '';
      document.getElementById('registerEmail').value = '';
      document.getElementById('registerPassword').value = '';
      document.getElementById('registerPhone').value = '';
    }

    // Go back to landing page
    function showLandingPage() {
      document.getElementById('landingPage').style.display = 'block';
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('loginPage').classList.remove('show');
      document.getElementById('registerPage').classList.remove('show');
    }

    function hideLoginPage() {
      document.getElementById('loginPage').classList.remove('show');
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('app').style.display = 'block';
      document.getElementById('bottomNav').style.display = 'flex';
    }

    // Toggle password visibility
    function togglePasswordVisibility() {
      const passwordInput = document.getElementById('loginPassword');
      const showBtn = document.querySelector('.login-show-btn');
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        showBtn.textContent = 'HIDE';
      } else {
        passwordInput.type = 'password';
        showBtn.textContent = 'SHOW';
      }
    }

    // Toggle remember me
    function toggleRememberMe() {
      const toggle = document.getElementById('rememberMeToggle');
      toggle.classList.toggle('active');
    }

    // Handle login
    async function handleLogin() {
      const userId = document.getElementById('loginUserId').value.trim();
      const password = document.getElementById('loginPassword').value;

      if (!userId || !password) {
        showLoginError('Please enter both User ID and Password');
        return;
      }

      // Show loading overlay during login
      showLoadingOverlay('Signing in...');

      try {
        // Use email for Firebase Auth (userId is treated as email)
        const email = userId.includes('@') ? userId : userId + '@leadcubank.com';
        await auth.signInWithEmailAndPassword(email, password);
        // Auth state listener will handle the rest
      } catch (error) {
        hideLoadingOverlay();
        console.error('Login error:', error);
        let errorMessage = 'Login failed. Please try again.';
        if (error.code === 'auth/user-not-found') {
          errorMessage = 'User not found. Please check your User ID.';
        } else if (error.code === 'auth/wrong-password') {
          errorMessage = 'Incorrect password. Please try again.';
        } else if (error.code === 'auth/invalid-email') {
          errorMessage = 'Invalid User ID format.';
        } else if (error.code === 'auth/too-many-requests') {
          errorMessage = 'Too many attempts. Please try again later.';
        }
        showLoginError(errorMessage);
      }
    }

    function showLoginError(message) {
      const errorDiv = document.getElementById('loginError');
      const errorText = document.getElementById('loginErrorText');
      errorText.textContent = message;
      errorDiv.style.display = 'block';
    }

    // Show/hide register page
    function showRegisterPage() {
      document.getElementById('registerPage').classList.add('show');
      document.getElementById('loginPage').classList.remove('show');
    }

    function closeRegisterPage() {
      document.getElementById('registerPage').classList.remove('show');
      document.getElementById('loginPage').classList.add('show');
    }

    // Handle registration
    async function handleRegister() {
      const firstName = document.getElementById('registerFirstName').value.trim();
      const surname = document.getElementById('registerSurname').value.trim();
      const email = document.getElementById('registerEmail').value.trim();
      const phone = document.getElementById('registerPhone').value.trim();
      const userId = document.getElementById('registerUserId').value.trim();
      const password = document.getElementById('registerPassword').value;

      if (!firstName || !surname || !email || !userId || !password) {
        alert('Please fill in all required fields');
        return;
      }

      if (password.length < 6) {
        alert('Password must be at least 6 characters');
        return;
      }

      // Show loading overlay during registration
      showLoadingOverlay('Creating account...');

      try {
        // Create user with Firebase Auth using email
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const user = userCredential.user;

        // Create user profile in Firestore
        await createNewUserInFirestore(user.uid, firstName, surname, email, phone);

        // Load the new user's data from Firestore immediately
        await loadUserDataFromFirestore(user.uid);
        updateUIWithUserData();

        // Close register page
        document.getElementById('registerPage').classList.remove('show');
        hideLoadingOverlay();
        goHome();
      } catch (error) {
        hideLoadingOverlay();
        console.error('Registration error:', error);
        let errorMessage = 'Registration failed. Please try again.';
        if (error.code === 'auth/email-already-in-use') {
          errorMessage = 'This email is already registered. Please login instead.';
        } else if (error.code === 'auth/invalid-email') {
          errorMessage = 'Please enter a valid email address.';
        } else if (error.code === 'auth/weak-password') {
          errorMessage = 'Password is too weak. Please use at least 6 characters.';
        }
        alert(errorMessage);
      }
    }

    // Loading overlay functions
    function showLoadingOverlay(message = '') {
      const loadingMessage = document.getElementById('loadingMessage');
      if (loadingMessage) {
        loadingMessage.textContent = message;
      }
      document.getElementById('loadingOverlay').classList.add('show');
    }

    function hideLoadingOverlay() {
      document.getElementById('loadingOverlay').classList.remove('show');
      const loadingMessage = document.getElementById('loadingMessage');
      if (loadingMessage) {
        loadingMessage.textContent = '';
      }
    }

    // Close more menu if open
    function closeMoreMenu() {
      const morePage = document.getElementById('morePage');
      if (morePage) {
        morePage.classList.remove('show');
      }
    }

    // Handle logout
    async function handleLogout() {
      // Close more menu if open
      closeMoreMenu();

      // Hide the app immediately
      document.getElementById('app').style.display = 'none';

      // Show loading overlay with logout message
      showLoadingOverlay('Logging out...');

      try {
        // Sign out from Firebase
        if (auth) {
          await auth.signOut();
        }
        currentUser = null;
      } catch (error) {
        console.error('Logout error:', error);
      }

      // After 2.5 seconds, hide loading and show landing page
      setTimeout(() => {
        hideLoadingOverlay();
        // Clear login form
        document.getElementById('loginUserId').value = '';
        document.getElementById('loginPassword').value = '';
        // Show landing page instead of login page
        document.getElementById('bottomNav').style.display = 'none';
        document.getElementById('landingPage').style.display = 'block';
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('loginPage').classList.remove('show');
      }, 2500);
    }

    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCzwIDItibgBp3WguYiky_wFYGIfZz6MQ8",
      authDomain: "soskid.firebaseapp.com",
      databaseURL: "https://soskid-default-rtdb.firebaseio.com",
      projectId: "soskid",
      storageBucket: "soskid.firebasestorage.app",
      messagingSenderId: "409630630158",
      appId: "1:409630630158:web:1dff37026e08de2f76b75f",
      measurementId: "G-E4S7PL93N2"
    };

    // Initialize Firebase
    let db = null;
    let auth = null;
    let currentUser = null;

    function initFirebase() {
      try {
        firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();
        auth = firebase.auth();
        
        // Enable session persistence so users stay logged in across page reloads
        auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
          .catch(error => console.log('Persistence error:', error));
        
        console.log('Firebase initialized successfully');

        // Listen for auth state changes
        auth.onAuthStateChanged(async (user) => {
          if (user) {
            currentUser = user;
            console.log('User logged in:', user.email);
            await loadUserDataFromFirestore(user.uid);
            hideLoadingOverlay();
            hideLoginPage();
          } else {
            currentUser = null;
            console.log('User logged out');
          }
        });
      } catch (error) {
        console.log('Firebase initialization error:', error);
      }
    }

    // Load all user data from Firestore
    async function loadUserDataFromFirestore(uid) {
      try {
        // Load user profile
        const userDoc = await db.collection('users').doc(uid).get();
        if (userDoc.exists) {
          const data = userDoc.data();
          userData.name = data.name || userData.name;
          userData.surname = data.surname || userData.surname;
          userData.email = data.email || userData.email;
          userData.phone = data.phone || userData.phone;
          userData.age = data.age || userData.age;
          userData.address = data.address || userData.address;
          userData.isVerified = data.isVerified || false;
          document.getElementById('userName').textContent = userData.name;
        }

        // Load accounts and sort by order (Checking=1, Savings=2, Crypto=3)
        const accountsSnapshot = await db.collection('users').doc(uid).collection('accounts').get();
        if (!accountsSnapshot.empty) {
          userData.accounts = [];
          accountsSnapshot.forEach(doc => {
            userData.accounts.push({ id: doc.id, ...doc.data() });
          });
          // Sort accounts by order field (Checking first, Savings second, Crypto last)
          userData.accounts.sort((a, b) => (a.order || 99) - (b.order || 99));
        }

        // Load transactions - always clear mock data first
        userData.transactions = [];
        const transactionsSnapshot = await db.collection('users').doc(uid).collection('transactions').orderBy('createdAt', 'desc').limit(50).get();
        if (!transactionsSnapshot.empty) {
          transactionsSnapshot.forEach(doc => {
            const trans = doc.data();
            userData.transactions.push({
              id: doc.id,
              name: trans.name,
              date: trans.date,
              amount: trans.amount,
              type: trans.type
            });
          });
        }

        // Load cards
        const cardsSnapshot = await db.collection('users').doc(uid).collection('cards').get();
        if (!cardsSnapshot.empty) {
          userData.cards = [];
          cardsSnapshot.forEach(doc => {
            userData.cards.push({ id: doc.id, ...doc.data() });
          });
        }

        // Load contacts
        const contactsSnapshot = await db.collection('users').doc(uid).collection('contacts').get();
        if (!contactsSnapshot.empty) {
          userData.contacts = [];
          contactsSnapshot.forEach(doc => {
            userData.contacts.push({ id: doc.id, ...doc.data() });
          });
        }

        // Load crypto data
        const cryptoDoc = await db.collection('users').doc(uid).collection('crypto').doc('holdings').get();
        if (cryptoDoc.exists) {
          userData.crypto = cryptoDoc.data();
        }

        // Update UI with loaded data
        updateUIWithUserData();
        console.log('User data loaded from Firestore');
      } catch (error) {
        console.error('Error loading user data:', error);
      }
    }

    // Save user profile to Firestore
    async function saveUserProfileToFirestore() {
      if (!currentUser) return;
      try {
        await db.collection('users').doc(currentUser.uid).set({
          name: userData.name,
          surname: userData.surname,
          email: userData.email,
          phone: userData.phone,
          age: userData.age,
          address: userData.address,
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        }, { merge: true });
        console.log('User profile saved');
      } catch (error) {
        console.error('Error saving user profile:', error);
      }
    }

    // Save accounts to Firestore
    async function saveAccountsToFirestore() {
      if (!currentUser) return;
      try {
        for (const account of userData.accounts) {
          await db.collection('users').doc(currentUser.uid).collection('accounts').doc(account.id).set(account);
        }
        console.log('Accounts saved');
      } catch (error) {
        console.error('Error saving accounts:', error);
      }
    }

    // Add transaction to Firestore
    async function addTransactionToFirestore(transaction) {
      if (!currentUser) return;
      try {
        const docRef = await db.collection('users').doc(currentUser.uid).collection('transactions').add({
          ...transaction,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        return docRef.id;
      } catch (error) {
        console.error('Error adding transaction:', error);
      }
    }

    // Save card to Firestore
    async function saveCardToFirestore(card) {
      if (!currentUser) return;
      try {
        const cardId = card.id || db.collection('users').doc(currentUser.uid).collection('cards').doc().id;
        await db.collection('users').doc(currentUser.uid).collection('cards').doc(cardId).set({
          ...card,
          id: cardId,
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        return cardId;
      } catch (error) {
        console.error('Error saving card:', error);
      }
    }

    // Save crypto holdings to Firestore
    async function saveCryptoToFirestore() {
      if (!currentUser) return;
      try {
        await db.collection('users').doc(currentUser.uid).collection('crypto').doc('holdings').set({
          ...userData.crypto,
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        console.log('Crypto data saved');
      } catch (error) {
        console.error('Error saving crypto:', error);
      }
    }

    // Update UI with user data
    function updateUIWithUserData() {
      document.getElementById('userName').textContent = userData.name;
      // Sync globalContacts with userData.contacts
      globalContacts = userData.contacts || [];
      // Trigger account display refresh
      if (typeof renderAccounts === 'function') {
        renderAccounts();
      }
      if (typeof renderAccountCards === 'function') {
        renderAccountCards();
      }
      if (typeof renderTransactions === 'function') {
        renderTransactions();
      }
      if (typeof updateOverallBalance === 'function') {
        updateOverallBalance();
      }
      if (typeof updateContactsDisplay === 'function') {
        updateContactsDisplay();
      }
      // Update verification banners
      if (typeof updateVerificationBanners === 'function') {
        updateVerificationBanners();
      }
    }

    // Generate a unique 12-character alphanumeric account number
    // Uses timestamp + random chars = virtually zero collision chance
    function generateAccountNumber() {
      const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
      const timestamp = Date.now().toString(36).toUpperCase().slice(-4);
      let random = '';
      for (let i = 0; i < 8; i++) {
        random += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return timestamp + random;
    }

    // Reserve account number - simple write with alphanumeric (collision virtually impossible)
    async function reserveUniqueAccountNumber(uid, accountIdPrefix, accountName, ownerName) {
      const accountNumber = generateAccountNumber();
      const finalAccountId = accountIdPrefix + accountNumber.slice(-4);
      
      await db.collection('accountNumbers').doc(accountNumber).set({
        uid: uid,
        accountId: finalAccountId,
        accountName: accountName,
        ownerName: ownerName,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      
      return { accountNumber, accountId: finalAccountId };
    }

    // Create new user in Firestore with default data
    async function createNewUserInFirestore(uid, firstName, surname, email, phone) {
      try {
        // Clear verification state for new user
        localStorage.removeItem('idVerificationCompleted');
        localStorage.removeItem('depositVerificationCompleted');
        idVerificationCompleted = false;
        depositVerificationCompleted = false;

        // Create user profile
        await db.collection('users').doc(uid).set({
          name: firstName,
          surname: surname,
          email: email,
          phone: phone || '',
          age: 0,
          address: '',
          isVerified: false,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        const ownerName = firstName + ' ' + surname;

        // Clear any residual data from test/previous users
        const contactsRef = db.collection('users').doc(uid).collection('contacts');
        const contactsSnapshot = await contactsRef.get();
        for (const doc of contactsSnapshot.docs) {
          await doc.ref.delete();
        }

        // Create accounts in order: Checking, Savings, Crypto & Verification
        // 1. CHECKING ACCOUNT (first)
        const checking = await reserveUniqueAccountNumber(
          uid,
          'checking-',
          'Checking Account',
          ownerName
        );
        await db.collection('users').doc(uid).collection('accounts').doc(checking.accountId).set({
          id: checking.accountId,
          name: 'Checking Account',
          type: 'Checking',
          accountNumber: checking.accountNumber,
          lastFour: checking.accountNumber.slice(-4),
          routingNumber: '071025661',
          availableBalance: 0,
          currentBalance: 0,
          lastDayBalance: 0,
          order: 1
        });

        // 2. SAVINGS ACCOUNT (second)
        const savings = await reserveUniqueAccountNumber(
          uid, 
          'savings-',
          'Savings Account', 
          ownerName
        );
        await db.collection('users').doc(uid).collection('accounts').doc(savings.accountId).set({
          id: savings.accountId,
          name: 'Savings Account',
          type: 'Savings',
          accountNumber: savings.accountNumber,
          lastFour: savings.accountNumber.slice(-4),
          routingNumber: '071025661',
          availableBalance: 0,
          currentBalance: 0,
          lastDayBalance: 0,
          order: 2
        });

        // 3. CRYPTO & VERIFICATION ACCOUNT (third/last)
        const crypto = await reserveUniqueAccountNumber(
          uid,
          'crypto-verification-',
          'Crypto & Verification',
          ownerName
        );
        await db.collection('users').doc(uid).collection('accounts').doc(crypto.accountId).set({
          id: crypto.accountId,
          name: 'Crypto & Verification',
          type: 'Checking',
          accountNumber: crypto.accountNumber,
          lastFour: crypto.accountNumber.slice(-4),
          routingNumber: '071025661',
          availableBalance: 0,
          currentBalance: 0,
          lastDayBalance: 0,
          isCrypto: true,
          order: 3
        });

        console.log('New user created in Firestore with Checking, Savings and Crypto accounts');
      } catch (error) {
        console.error('Error creating user in Firestore:', error);
        throw error;
      }
    }

    // Look up account holder by account number
    async function lookupAccountByNumber(accountNumber) {
      try {
        const accountDoc = await db.collection('accountNumbers').doc(accountNumber).get();
        if (accountDoc.exists) {
          const data = accountDoc.data();
          return {
            found: true,
            ownerName: data.ownerName,
            accountName: data.accountName,
            uid: data.uid,
            accountId: data.accountId
          };
        }
        return { found: false };
      } catch (error) {
        console.error('Error looking up account:', error);
        return { found: false, error: error.message };
      }
    }

    // User data (initialized empty - will be loaded from Firebase)
    let userData = {
      name: '',
      surname: '',
      email: '',
      phone: '',
      age: 0,
      address: '',
      isVerified: false,
      accounts: [],
      transactions: [],
      contacts: [],
      cards: [],
      crypto: {
        btc: {
          balance: 0,
          usdValue: 0
        }
      }
    };

    // Crypto data (will be updated with live data)
    let cryptoData = {
      btc: {
        price: 0,
        change24h: 0,
        changePercent: 0,
        chartData: [],
        lastFetched: null
      }
    };

    // CoinGecko API endpoints (free, no key required)
    const COINGECKO_API = {
      price: 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true',
      chart: 'https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd'
    };

    let btcPriceInterval = null;

    // Fetch live BTC price
    async function fetchBtcPrice() {
      try {
        const response = await fetch(COINGECKO_API.price);
        if (!response.ok) throw new Error('API error');
        const data = await response.json();

        const price = data.bitcoin.usd;
        const changePercent = data.bitcoin.usd_24h_change || 0;
        const change24h = price * (changePercent / 100);

        cryptoData.btc.price = price;
        cryptoData.btc.changePercent = changePercent;
        cryptoData.btc.change24h = change24h;
        cryptoData.btc.lastFetched = Date.now();

        // Update UI if crypto pages are visible
        if (document.getElementById('cryptoListPage').classList.contains('show')) {
          updateCryptoPrices();
        }
        if (document.getElementById('btcDetailPage').classList.contains('show')) {
          updateBTCDetail();
        }

        console.log('BTC price updated:', formatCurrency(price));
        return true;
      } catch (error) {
        console.error('Failed to fetch BTC price:', error);
        // Use fallback values if first fetch fails
        if (cryptoData.btc.price === 0) {
          cryptoData.btc.price = 91257.58;
          cryptoData.btc.changePercent = 2.02;
          cryptoData.btc.change24h = 1815.20;
        }
        return false;
      }
    }

    // Fetch chart data based on timeframe
    async function fetchBtcChartData(timeframe) {
      try {
        let days = '1';
        switch(timeframe) {
          case '1H': days = '1'; break;
          case '1D': days = '1'; break;
          case '1W': days = '7'; break;
          case '1M': days = '30'; break;
          case '1Y': days = '365'; break;
          case 'All': days = 'max'; break;
        }

        const url = COINGECKO_API.chart + '&days=' + days;
        const response = await fetch(url);
        if (!response.ok) throw new Error('Chart API error');
        const data = await response.json();

        let prices = data.prices.map(p => p[1]);

        // For 1H, take last ~12 points (5 min intervals from hourly data)
        if (timeframe === '1H') {
          prices = prices.slice(-12);
        }

        cryptoData.btc.chartData = prices;
        return prices;
      } catch (error) {
        console.error('Failed to fetch chart data:', error);
        return null;
      }
    }

    // Start/stop price refresh interval
    function startBtcPriceRefresh() {
      if (btcPriceInterval) clearInterval(btcPriceInterval);
      fetchBtcPrice();
      btcPriceInterval = setInterval(fetchBtcPrice, 60000); // Refresh every 60 seconds
    }

    function stopBtcPriceRefresh() {
      if (btcPriceInterval) {
        clearInterval(btcPriceInterval);
        btcPriceInterval = null;
      }
    }

    // Current state
    let currentAccountIndex = 0;
    let quickActionsExpanded = false;

    // Toggle quick actions panel
    function toggleQuickActions() {
      quickActionsExpanded = !quickActionsExpanded;

      const card = document.getElementById('quickActionsCard');
      const extra = document.getElementById('quickActionsExtra');
      const btn = document.getElementById('expandArrowBtn');
      const mainContent = document.getElementById('mainContent');

      if (quickActionsExpanded) {
        card.classList.add('expanded');
        extra.classList.add('show');
        btn.classList.add('expanded');
        mainContent.classList.add('expanded');
      } else {
        card.classList.remove('expanded');
        extra.classList.remove('show');
        btn.classList.remove('expanded');
        mainContent.classList.remove('expanded');
      }
    }

    // Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
    }

    function goHome() {
      showPage('homePage');
      updateUI();
    }

    function goBack() {
      goHome();
    }

    function openAccountDetails(accountIndex) {
      const account = userData.accounts[accountIndex];
      if (account.isCrypto) {
        openCryptoListPage();
      } else {
        currentAccountIndex = accountIndex;
        showPage('accountDetailsPage');
        updateAccountDetails();
      }
    }

    // Copy account number to clipboard
    function copyAccountNumber() {
      const account = userData.accounts[currentAccountIndex];
      if (account && account.accountNumber) {
        navigator.clipboard.writeText(account.accountNumber).then(() => {
          const notification = document.getElementById('copiedNotification');
          notification.textContent = 'Copied';
          notification.className = 'copied-notification';
          setTimeout(() => {
            notification.textContent = '';
            notification.className = '';
          }, 2000);
        }).catch(() => {
          const notification = document.getElementById('copiedNotification');
          notification.textContent = 'Copy failed';
          notification.className = 'copied-notification';
          setTimeout(() => {
            notification.textContent = '';
            notification.className = '';
          }, 2000);
        });
      }
    }

    function prevAccount() {
      // Only cycle between checking (0) and savings (1), exclude crypto
      currentAccountIndex = currentAccountIndex === 0 ? 1 : 0;
      updateAccountDetails();
    }

    function nextAccount() {
      // Only cycle between checking (0) and savings (1), exclude crypto
      currentAccountIndex = currentAccountIndex === 0 ? 1 : 0;
      updateAccountDetails();
    }

    function updateAccountDetails() {
      const account = userData.accounts[currentAccountIndex];

      document.getElementById('detailsAccountName').textContent = account.name;
      document.getElementById('detailsAccountNumber').textContent = `${account.type} *${account.lastFour}`;
      document.getElementById('detailsBalance').textContent = formatCurrency(account.availableBalance);
      document.getElementById('routingNumber').textContent = account.routingNumber;
      document.getElementById('currentBalance').textContent = formatCurrency(account.currentBalance);
      document.getElementById('lastDayBalance').textContent = formatCurrency(account.lastDayBalance);

      const indicator = document.getElementById('detailsIndicator');
      if (account.type === 'Savings') {
        indicator.classList.add('savings');
      } else {
        indicator.classList.remove('savings');
      }

      renderTransactions();
    }

    let transactionFilter = 'all';

    function renderTransactions() {
      const list = document.getElementById('transactionsList');
      let filteredTransactions = userData.transactions;

      if (transactionFilter !== 'all') {
        filteredTransactions = userData.transactions.filter(tx => {
          if (transactionFilter === 'pending') {
            return tx.type === 'pending' || tx.status === 'pending';
          } else if (transactionFilter === 'income') {
            return tx.amount >= 0 && tx.type !== 'pending' && tx.status !== 'pending';
          } else if (transactionFilter === 'expense') {
            return tx.amount < 0 && tx.type !== 'pending' && tx.status !== 'pending';
          }
          return true;
        });
      }

      list.innerHTML = filteredTransactions.map(tx => {
        let amountClass = 'negative';
        if (tx.type === 'pending' || tx.status === 'pending') {
          amountClass = 'pending';
        } else if (tx.amount >= 0) {
          amountClass = 'positive';
        }
        return `
        <div class="transaction-item">
          <div class="transaction-info">
            <div class="transaction-name">${tx.name}</div>
            <div class="transaction-date">${tx.date}</div>
          </div>
          <div class="transaction-amount ${amountClass}">
            ${(tx.type === 'pending' || tx.status === 'pending') ? '+' : (tx.amount >= 0 ? '+' : '')}${formatCurrency(Math.abs(tx.amount))}
          </div>
        </div>
      `;
      }).join('');
    }

    // Transaction Filter Functions
    function openTransactionFilter() {
      document.getElementById('filterModal').classList.add('show');
      updateFilterUI();
    }

    function closeTransactionFilter(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('filterModal').classList.remove('show');
    }

    function updateFilterUI() {
      const options = document.querySelectorAll('.filter-option');
      options.forEach(option => {
        const filterType = option.getAttribute('onclick').match(/'([^']+)'/)[1];
        if (filterType === transactionFilter) {
          option.classList.add('active');
        } else {
          option.classList.remove('active');
        }
      });
    }

    function toggleTransactionFilter(type) {
      transactionFilter = type;
      updateFilterUI();
    }

    function resetTransactionFilter() {
      transactionFilter = 'all';
      updateFilterUI();
    }

    function applyTransactionFilter() {
      renderTransactions();
      closeTransactionFilter();
    }

    // Transfer Modal
    function openTransferModal() {
      const modal = document.getElementById('transferModal');
      const fromSelect = document.getElementById('fromAccount');
      const toSelect = document.getElementById('toAccount');
      const form = document.getElementById('transferForm');
      const success = document.getElementById('successMessage');

      // Reset modal state
      form.style.display = 'block';
      success.classList.remove('show');
      document.getElementById('transferAmount').value = '';

      // Populate account dropdowns (exclude crypto accounts)
      const nonCryptoAccounts = userData.accounts.filter(acc => !acc.isCrypto);
      fromSelect.innerHTML = nonCryptoAccounts.map((acc, idx) => 
        `<option value="${userData.accounts.indexOf(acc)}" ${userData.accounts.indexOf(acc) === currentAccountIndex ? 'selected' : ''}>${acc.name} (*${acc.lastFour})</option>`
      ).join('');

      toSelect.innerHTML = nonCryptoAccounts.map((acc, idx) => 
        `<option value="${userData.accounts.indexOf(acc)}" ${userData.accounts.indexOf(acc) !== currentAccountIndex ? 'selected' : ''} ${userData.accounts.indexOf(acc) === currentAccountIndex ? 'disabled' : ''}>${acc.name} (*${acc.lastFour})</option>`
      ).join('');

      // Select first non-current account for "to"
      const firstOther = nonCryptoAccounts.find((acc) => userData.accounts.indexOf(acc) !== currentAccountIndex);
      if (firstOther) {
        toSelect.value = userData.accounts.indexOf(firstOther);
      }

      updateTransferInfo();
      modal.classList.add('show');
    }

    function closeTransferModal() {
      document.getElementById('transferModal').classList.remove('show');
    }

    // Pay & Transfer Bottom Sheet
    function openPayTransferSheet() {
      document.getElementById('payTransferSheet').classList.add('show');
    }

    function closePayTransferSheet(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('payTransferSheet').classList.remove('show');
    }

    function handleAccountTransfer() {
      closePayTransferSheet();
      openTransferModal();
    }

    function handleBillPayment() {
      closePayTransferSheet();
      alert('Bill payment feature coming soon!');
    }

    function handleGlobalTransfer() {
      closePayTransferSheet();
      openGlobalTransferPage();
    }

    function handleDepositCheque() {
      closePayTransferSheet();
      document.getElementById('checkDepositAgreementPage').classList.add('show');
    }

    function handleWithdraw() {
      openWithdrawMethodPage();
    }

    function closeCheckDepositAgreementPage() {
      document.getElementById('checkDepositAgreementPage').classList.remove('show');
    }

    function agreeAndProceedToCheckDeposit() {
      document.getElementById('checkDepositAgreementPage').classList.remove('show');
      // Populate account dropdown
      const select = document.getElementById('checkDepositAccount');
      select.innerHTML = '<option value="">Choose an account</option>';
      userData.accounts.forEach((acc, idx) => {
        if (!acc.isCrypto) {
          select.innerHTML += `<option value="${idx}">${acc.name} *${acc.lastFour}</option>`;
        }
      });
      document.getElementById('checkDepositPage').classList.add('show');
    }

    function closeCheckDepositPage() {
      document.getElementById('checkDepositPage').classList.remove('show');
      resetCheckDepositForm();
    }

    // Check deposit image upload state
    let checkFrontUploaded = false;
    let checkBackUploaded = false;

    function handleCheckFrontUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('checkFrontImage').src = e.target.result;
          document.getElementById('checkFrontPreview').style.display = 'block';
          document.getElementById('checkFrontUploadArea').style.display = 'none';
          checkFrontUploaded = true;
          validateCheckDepositForm();
        };
        reader.readAsDataURL(file);
      }
    }

    function handleCheckBackUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('checkBackImage').src = e.target.result;
          document.getElementById('checkBackPreview').style.display = 'block';
          document.getElementById('checkBackUploadArea').style.display = 'none';
          checkBackUploaded = true;
          validateCheckDepositForm();
        };
        reader.readAsDataURL(file);
      }
    }

    function removeCheckFrontImage(event) {
      event.stopPropagation();
      document.getElementById('checkFrontInput').value = '';
      document.getElementById('checkFrontPreview').style.display = 'none';
      document.getElementById('checkFrontUploadArea').style.display = 'flex';
      checkFrontUploaded = false;
      validateCheckDepositForm();
    }

    function removeCheckBackImage(event) {
      event.stopPropagation();
      document.getElementById('checkBackInput').value = '';
      document.getElementById('checkBackPreview').style.display = 'none';
      document.getElementById('checkBackUploadArea').style.display = 'flex';
      checkBackUploaded = false;
      validateCheckDepositForm();
    }

    function validateCheckDepositForm() {
      const amount = parseFloat(document.getElementById('checkDepositAmount').value);
      const account = document.getElementById('checkDepositAccount').value;
      const btn = document.getElementById('checkDepositBtn');
      
      if (amount > 0 && account && checkFrontUploaded && checkBackUploaded) {
        btn.disabled = false;
        btn.style.opacity = '1';
        btn.style.cursor = 'pointer';
        btn.style.pointerEvents = 'auto';
      } else {
        btn.disabled = true;
        btn.style.opacity = '0.5';
        btn.style.cursor = 'not-allowed';
        btn.style.pointerEvents = 'none';
      }
    }

    function resetCheckDepositForm() {
      document.getElementById('checkDepositAmount').value = '';
      document.getElementById('checkDepositAccount').value = '';
      document.getElementById('checkFrontInput').value = '';
      document.getElementById('checkBackInput').value = '';
      document.getElementById('checkFrontPreview').style.display = 'none';
      document.getElementById('checkBackPreview').style.display = 'none';
      document.getElementById('checkFrontUploadArea').style.display = 'flex';
      document.getElementById('checkBackUploadArea').style.display = 'flex';
      checkFrontUploaded = false;
      checkBackUploaded = false;
      validateCheckDepositForm();
    }

    function openCheckDepositConfirmPage() {
      const amount = parseFloat(document.getElementById('checkDepositAmount').value);
      const accountIdx = parseInt(document.getElementById('checkDepositAccount').value);
      const account = userData.accounts[accountIdx];

      // Check if user is verified - show modal if not
      if (!userData.isVerified) {
        const modalOverlay = document.getElementById('verificationModalOverlay');
        if (modalOverlay) {
          modalOverlay.style.display = 'flex';
          modalOverlay.classList.add('show');
        }
        return;
      }
      
      document.getElementById('checkConfirmAmount').textContent = formatCurrency(amount);
      document.getElementById('checkConfirmAccount').textContent = `${account.name} *${account.lastFour}`;
      
      document.getElementById('checkDepositConfirmPage').classList.add('show');
    }

    function closeCheckDepositConfirmPage() {
      document.getElementById('checkDepositConfirmPage').classList.remove('show');
    }

    async function processCheckDeposit() {
      document.getElementById('checkDepositConfirmPage').classList.remove('show');
      document.getElementById('checkDepositLoadingOverlay').classList.add('show');
      
      setTimeout(async function() {
        document.getElementById('checkDepositLoadingOverlay').classList.remove('show');
        await showCheckDepositPendingPage();
      }, 2000);
    }

    async function showCheckDepositPendingPage() {
      const amount = parseFloat(document.getElementById('checkDepositAmount').value);
      const accountIdx = parseInt(document.getElementById('checkDepositAccount').value);
      const account = userData.accounts[accountIdx];
      
      const now = new Date();
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
      const transactionId = 'CD-' + Date.now().toString().slice(-10);
      
      document.getElementById('checkPendingAmount').textContent = formatCurrency(amount);
      document.getElementById('checkPendingAccount').textContent = `${account.name} *${account.lastFour}`;
      document.getElementById('checkPendingDateTime').textContent = `${dateStr} ${timeStr}`;
      document.getElementById('checkPendingId').textContent = transactionId;
      
      // Add pending transaction to userData.transactions
      const pendingTransaction = {
        id: Date.now(),
        name: 'Check Deposit',
        date: dateStr,
        amount: amount,
        type: 'pending',
        status: 'pending',
        accountIdx: accountIdx
      };
      userData.transactions.unshift(pendingTransaction);
      
      // Save to Firestore
      await addTransactionToFirestore(pendingTransaction);
      
      document.getElementById('checkDepositPage').classList.remove('show');
      document.getElementById('checkDepositPendingPage').classList.add('show');
      
      resetCheckDepositForm();
    }

    function closeCheckDepositPendingPage() {
      document.getElementById('checkDepositPendingPage').classList.remove('show');
    }

    function updateTransferInfo() {
      const fromIdx = parseInt(document.getElementById('fromAccount').value);
      const account = userData.accounts[fromIdx];
      document.getElementById('fromAccountBalance').textContent = 
        `Available: ${formatCurrency(account.availableBalance)}`;

      // Update "to" dropdown to disable same account
      const toSelect = document.getElementById('toAccount');
      Array.from(toSelect.options).forEach((opt) => {
        opt.disabled = parseInt(opt.value) === fromIdx;
      });

      // If current "to" selection is same as "from", change it
      if (parseInt(toSelect.value) === fromIdx) {
        const firstOther = userData.accounts.findIndex((acc, idx) => idx !== fromIdx && !acc.isCrypto);
        if (firstOther >= 0) {
          toSelect.value = firstOther;
        }
      }
    }

    let transferInProgress = false;

    async function executeTransfer() {
      // Prevent double-clicks
      if (transferInProgress) {
        return;
      }

      const fromIdx = parseInt(document.getElementById('fromAccount').value);
      const toIdx = parseInt(document.getElementById('toAccount').value);
      const amount = parseFloat(document.getElementById('transferAmount').value);

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > userData.accounts[fromIdx].availableBalance) {
        alert('Insufficient funds');
        return;
      }

      if (fromIdx === toIdx) {
        alert('Cannot transfer to the same account');
        return;
      }

      // Set loading state and disable button
      transferInProgress = true;
      const transferBtn = document.querySelector('.transfer-btn');
      if (transferBtn) {
        transferBtn.disabled = true;
        transferBtn.textContent = 'Processing...';
      }

      try {
      // Execute transfer
      userData.accounts[fromIdx].availableBalance -= amount;
      userData.accounts[fromIdx].currentBalance -= amount;
      userData.accounts[toIdx].availableBalance += amount;
      userData.accounts[toIdx].currentBalance += amount;

      // Add transactions
      const today = new Date();
      const dateStr = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

      const transaction = {
        id: Date.now(),
        name: `Transfer to ${userData.accounts[toIdx].name}`,
        date: dateStr,
        amount: -amount,
        type: 'debit',
        accountIdx: fromIdx
      };
      userData.transactions.unshift(transaction);

      // Save to Firestore
      await saveAccountsToFirestore();
      await addTransactionToFirestore(transaction);

      // Show success
      document.getElementById('transferForm').style.display = 'none';
      document.getElementById('successMessage').classList.add('show');
      document.getElementById('successText').textContent = 
        `${formatCurrency(amount)} has been transferred to ${userData.accounts[toIdx].name}.`;

      // Update UI to reflect new balances
      renderAccountCards();
      updateOverallBalance();
      } catch (error) {
        console.error('Transfer error:', error);
        alert('Transfer failed. Please try again.');
      } finally {
        // Reset transfer state
        transferInProgress = false;
        const transferBtn = document.querySelector('.transfer-btn');
        if (transferBtn) {
          transferBtn.disabled = false;
          transferBtn.textContent = 'Transfer';
        }
      }
    }

    // Global transfer
    function openGlobalTransferPage() {
      document.getElementById('globalTransferPage').classList.add('show');
    }

    function closeGlobalTransferPage() {
      document.getElementById('globalTransferPage').classList.remove('show');
    }

    function switchGlobalTab(tabName, event) {
      // Update active tab button
      document.querySelectorAll('#globalTransferPage .tab-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      // Show selected tab panel
      document.getElementById('tabOverview').style.display = tabName === 'overview' ? 'block' : 'none';
      document.getElementById('tabHistory').style.display = tabName === 'history' ? 'block' : 'none';
      document.getElementById('tabManage').style.display = tabName === 'manage' ? 'block' : 'none';
    }

    // Global contacts and transfers storage
    let globalContacts = [];
    let selectedGlobalContact = null;
    let globalTransfers = [];
    let pendingTransferData = {};

    function openAddContactPage() {
      // Clear form
      document.getElementById('contactName').value = '';
      document.getElementById('contactBankName').value = '';
      document.getElementById('contactAccountNumber').value = '';
      document.getElementById('contactAddress').value = '';
      document.getElementById('contactBankAddress').value = '';
      document.getElementById('contactRoutingSwift').value = '';
      document.getElementById('contactCountry').value = '';
      document.getElementById('addContactPage').classList.add('show');
    }

    function closeAddContactPage() {
      document.getElementById('addContactPage').classList.remove('show');
    }

    async function saveContact() {
      const name = document.getElementById('contactName').value.trim();
      const bankName = document.getElementById('contactBankName').value.trim();
      const accountNumber = document.getElementById('contactAccountNumber').value.trim();
      const address = document.getElementById('contactAddress').value.trim();
      const bankAddress = document.getElementById('contactBankAddress').value.trim();
      const routingSwift = document.getElementById('contactRoutingSwift').value.trim();
      const country = document.getElementById('contactCountry').value;

      if (!name || !bankName || !accountNumber || !country) {
        alert('Please fill in all required fields (Name, Bank Name, Account Number, Country)');
        return;
      }

      const contact = {
        id: 'contact-' + Date.now(),
        name,
        bankName,
        accountNumber,
        address,
        bankAddress,
        routingSwift,
        country
      };

      globalContacts.push(contact);
      userData.contacts.push(contact);

      // Save contact to Firestore
      await saveContactToFirestore(contact);

      closeAddContactPage();
      updateContactsDisplay();
    }

    // Save contact to Firestore
    async function saveContactToFirestore(contact) {
      if (!currentUser) return;
      try {
        await db.collection('users').doc(currentUser.uid).collection('contacts').doc(contact.id).set({
          ...contact,
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        console.log('Contact saved to Firestore');
      } catch (error) {
        console.error('Error saving contact:', error);
      }
    }

    function updateContactsDisplay() {
      const emptyState = document.getElementById('contactsEmptyState');
      const contactsList = document.getElementById('contactsList');
      const savedContactsList = document.getElementById('savedContactsList');

      if (globalContacts.length === 0) {
        emptyState.style.display = 'block';
        contactsList.style.display = 'none';
      } else {
        emptyState.style.display = 'none';
        contactsList.style.display = 'block';

        savedContactsList.innerHTML = globalContacts.map(contact => `
          <div onclick="selectContactForTransfer('${contact.id}')" style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e8ecf0; cursor: pointer; transition: all 0.2s;" data-testid="contact-card-${contact.id}">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div style="font-size: 16px; font-weight: 600; color: #111827;">${contact.name}</div>
                <div style="font-size: 14px; color: #6b7280;">${contact.bankName}</div>
                <div style="font-size: 13px; color: #9ca3af;">${contact.country}</div>
              </div>
              <svg style="width: 20px; height: 20px; color: #6b7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </div>
        `).join('');
      }
    }

    function selectContactForTransfer(contactId) {
      selectedGlobalContact = globalContacts.find(c => c.id === contactId);
      if (!selectedGlobalContact) return;

      // Update transfer page with contact info
      document.getElementById('globalTransferRecipientName').textContent = selectedGlobalContact.name;
      document.getElementById('globalTransferRecipientBank').textContent = selectedGlobalContact.bankName;
      document.getElementById('globalTransferRecipientCountry').textContent = selectedGlobalContact.country;

      // Update balance display
      const checkingAccount = userData.accounts[0];
      document.getElementById('globalTransferAccountLast4').textContent = checkingAccount.lastFour;
      document.getElementById('globalTransferAvailableBalance').textContent = formatCurrency(checkingAccount.availableBalance);

      // Clear amount
      document.getElementById('globalTransferAmount').value = '';

      document.getElementById('globalTransferAmountPage').classList.add('show');
    }

    function closeGlobalTransferAmountPage() {
      document.getElementById('globalTransferAmountPage').classList.remove('show');
    }

    function closeVerificationModal() {
      const modalOverlay = document.getElementById('verificationModalOverlay');
      if (modalOverlay) {
        modalOverlay.style.display = 'none';
        modalOverlay.classList.remove('show');
      }
    }

    function goToVerification() {
      const modalOverlay = document.getElementById('verificationModalOverlay');
      if (modalOverlay) {
        modalOverlay.style.display = 'none';
        modalOverlay.classList.remove('show');
      }
      document.getElementById('globalTransferAmountPage').classList.remove('show');
      document.getElementById('verificationPageFull').classList.add('show');
      updateVerificationStepUI();
    }

    function showGlobalTransferConfirmation() {
      const amount = parseFloat(document.getElementById('globalTransferAmount').value);
      const checkingAccount = userData.accounts[0];

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (!userData.isVerified) {
        const modalOverlay = document.getElementById('verificationModalOverlay');
        if (modalOverlay) {
          modalOverlay.style.display = 'flex';
          modalOverlay.classList.add('show');
        }
        return;
      }

      if (amount > checkingAccount.availableBalance) {
        alert('Insufficient funds. Your available balance is ' + formatCurrency(checkingAccount.availableBalance));
        return;
      }

      // Store pending transfer data
      pendingTransferData = { amount, checkingAccount };

      // Populate confirmation page
      document.getElementById('globalConfirmAmount').textContent = formatCurrency(amount);
      document.getElementById('globalConfirmFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('globalConfirmToName').textContent = selectedGlobalContact.name;
      document.getElementById('globalConfirmToBank').textContent = selectedGlobalContact.bankName;
      document.getElementById('globalConfirmToCountry').textContent = selectedGlobalContact.country;

      // Show confirmation page
      document.getElementById('globalTransferConfirmPage').classList.add('show');
    }

    function closeGlobalTransferConfirmPage() {
      document.getElementById('globalTransferConfirmPage').classList.remove('show');
    }

    async function executeGlobalTransferWithLoading() {
      const { amount, checkingAccount } = pendingTransferData;

      // Show loading overlay
      document.getElementById('globalTransferLoadingOverlay').style.display = 'flex';
      closeGlobalTransferConfirmPage();

      // Simulate processing
      await new Promise(resolve => setTimeout(resolve, 2000));

      // Hide loading overlay
      document.getElementById('globalTransferLoadingOverlay').style.display = 'none';

      // Process transfer
      checkingAccount.availableBalance -= amount;
      checkingAccount.currentBalance -= amount;

      // Add transaction
      const today = new Date();
      const dateStr = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = today.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
      const refNum = 'GT-' + Date.now();

      const transaction = {
        id: Date.now(),
        name: `Global Transfer to ${selectedGlobalContact.name}`,
        date: dateStr,
        amount: -amount,
        type: 'debit'
      };
      userData.transactions.unshift(transaction);

      // Store in global transfers history
      const transfer = {
        id: Date.now(),
        recipient: selectedGlobalContact.name,
        bank: selectedGlobalContact.bankName,
        country: selectedGlobalContact.country,
        amount: amount,
        date: dateStr,
        time: timeStr,
        reference: refNum,
        fromAccount: 'Checking *' + checkingAccount.lastFour,
        status: 'completed'
      };
      globalTransfers.unshift(transfer);

      // Save to Firestore
      await saveAccountsToFirestore();
      await addTransactionToFirestore(transaction);
      await saveGlobalTransferToFirestore(transfer);

      // Show success page with new receipt fields
      document.getElementById('receiptAmount').textContent = formatCurrency(amount);
      document.getElementById('receiptToName').textContent = selectedGlobalContact.name;
      document.getElementById('receiptToPhone').textContent = selectedGlobalContact.phone || '(614) 878-1487';
      document.getElementById('receiptMethod').textContent = 'Transfer Wallet';
      document.getElementById('receiptTime').textContent = dateStr + ' ' + timeStr;
      document.getElementById('receiptConfirmNum').textContent = refNum;

      closeGlobalTransferAmountPage();
      document.getElementById('globalTransferSuccessPage').classList.add('show');

      // Update UI
      renderAccounts();
      updateGlobalTransfersHistory();
    }

    async function saveGlobalTransferToFirestore(transfer) {
      if (!currentUser) return;
      try {
        await db.collection('users').doc(currentUser.uid).collection('globalTransfers').doc(transfer.id.toString()).set({
          ...transfer,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        console.log('Global transfer saved to Firestore');
      } catch (error) {
        console.error('Error saving global transfer:', error);
      }
    }

    function updateGlobalTransfersHistory() {
      const container = document.getElementById('globalTransferHistoryContainer');
      if (globalTransfers.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="empty-text">No transfer history yet. Your global transfers will appear here.</div>
          </div>
        `;
      } else {
        container.innerHTML = globalTransfers.map(transfer => `
          <div style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e8ecf0;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
              <div>
                <div style="font-size: 15px; font-weight: 600; color: #111827;">${transfer.recipient}</div>
                <div style="font-size: 13px; color: #6b7280;">${transfer.bank}, ${transfer.country}</div>
              </div>
              <div style="text-align: right;">
                <div style="font-size: 15px; font-weight: 600; color: #111827;">-${formatCurrency(transfer.amount)}</div>
                <div style="font-size: 12px; color: #6b7280;">${transfer.date}</div>
              </div>
            </div>
            <div style="border-top: 1px solid #e5e7eb; padding-top: 12px; font-size: 12px; color: #6b7280;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                <span>Reference:</span>
                <span style="font-family: monospace; background: #f3f4f6; padding: 2px 6px; border-radius: 4px;">${transfer.reference}</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span>From:</span>
                <span>${transfer.fromAccount}</span>
              </div>
            </div>
          </div>
        `).join('');
      }
    }

    function closeGlobalTransferSuccessPage() {
      document.getElementById('globalTransferSuccessPage').classList.remove('show');
      closeGlobalTransferPage();
    }

    // Currency formatting
    function formatCurrency(amount) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD'
      }).format(amount);
    }

    // Update overall balance display
    function updateOverallBalance() {
      const total = userData.accounts.reduce((sum, acc) => sum + acc.availableBalance, 0);
      document.getElementById('overallBalance').textContent = formatCurrency(total);
    }

    // Update date display
    function updateDateTime() {
      const now = new Date();
      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

      const dayName = days[now.getDay()];
      const monthName = months[now.getMonth()];
      const date = now.getDate();
      const year = now.getFullYear();

      document.getElementById('currentDateTime').textContent = `Today is ${dayName}, ${monthName} ${date}, ${year}.`;
    }

    // Update greeting based on time
    function updateGreeting() {
      const hour = new Date().getHours();
      let greeting = 'morning';
      if (hour >= 12 && hour < 17) greeting = 'afternoon';
      else if (hour >= 17) greeting = 'evening';
      document.getElementById('timeOfDay').textContent = greeting;
    }

    // Update UI
    function updateUI() {
      document.getElementById('userName').textContent = userData.name;
      renderAccountCards();
      updateOverallBalance();
    }

    // Render account cards
    function renderAccountCards() {
      const container = document.getElementById('depositsContent');
      container.innerHTML = userData.accounts.map((account, index) => `
        <div class="account-card" onclick="openAccountDetails(${index})" data-testid="account-card-${index}">
          <div class="account-header">
            <div class="account-info">
              <div class="account-name">${account.name}</div>
              <div class="account-indicator ${account.type === 'Savings' ? 'savings' : ''}"></div>
              ${account.isCrypto ? '' : `<div class="account-number">${account.type} *${account.lastFour}</div>`}
            </div>
            <div class="account-balance-section">
              <div class="account-balance-label">Available</div>
              <div class="account-balance">${formatCurrency(account.availableBalance)}</div>
            </div>
            <div class="account-menu">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
              </svg>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Toggle section
    function toggleSection(section) {
      // Could add collapse functionality here
    }

    // ========== CARD MANAGEMENT ==========
    let savedCards = [];
    let selectedCardType = 'debit';
    let selectedCardNetwork = 'visa';
    let selectedCardForAddMoney = null;
    let addMoneyAmountValue = '';

    // Load saved cards from storage (localStorage fallback, Firestore when available)
    async function loadSavedCards() {
      // Try Firestore first if configured
      if (db && auth && auth.currentUser) {
        try {
          const snapshot = await db.collection('users').doc(auth.currentUser.uid).collection('cards').get();
          savedCards = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
          console.log('Cards loaded from Firestore:', savedCards.length);
          return;
        } catch (error) {
          console.error('Error loading cards from Firestore:', error);
        }
      }

      // Fallback to localStorage
      try {
        const stored = localStorage.getItem('leadcu_saved_cards');
        if (stored) {
          savedCards = JSON.parse(stored);
          console.log('Cards loaded from localStorage:', savedCards.length);
        }
      } catch (error) {
        console.error('Error loading cards from localStorage:', error);
        savedCards = [];
      }
    }

    // Save cards to storage
    async function persistCards() {
      // Save to localStorage as backup
      try {
        localStorage.setItem('leadcu_saved_cards', JSON.stringify(savedCards));
      } catch (error) {
        console.error('Error saving to localStorage:', error);
      }
    }

    // Save a single card to Firestore
    async function saveCardToFirestore(card) {
      if (db && auth && auth.currentUser) {
        try {
          await db.collection('users').doc(auth.currentUser.uid).collection('cards').doc(card.id.toString()).set({
            holderName: card.holderName,
            number: card.number,
            expiry: card.expiry,
            type: card.type,
            network: card.network,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
          console.log('Card saved to Firestore');
          return true;
        } catch (error) {
          console.error('Error saving card to Firestore:', error);
          return false;
        }
      }
      return false;
    }

    // Manage Cards Page
    function openManageCardsPage() {
      document.getElementById('manageCardsPage').classList.add('show');
      updateSavedCardsDisplay();
    }

    function closeManageCardsPage() {
      document.getElementById('manageCardsPage').classList.remove('show');
    }

    function updateSavedCardsDisplay() {
      const emptyState = document.getElementById('cardsEmptyState');
      const cardsList = document.getElementById('savedCardsList');

      if (savedCards.length === 0) {
        emptyState.style.display = 'flex';
        cardsList.style.display = 'none';
      } else {
        emptyState.style.display = 'none';
        cardsList.style.display = 'block';
        cardsList.innerHTML = savedCards.map(card => `
          <div class="saved-card-item">
            <div class="saved-card-top">
              <div class="saved-card-chip"></div>
              <div class="saved-card-type-badge">${card.type}</div>
            </div>
            <div class="saved-card-number-display">${maskCardNumber(card.number)}</div>
            <div class="saved-card-bottom">
              <div class="saved-card-holder">${card.holderName}</div>
              <div class="saved-card-network-display">${card.network.toUpperCase()}</div>
            </div>
          </div>
        `).join('');
      }
    }

    function maskCardNumber(number) {
      const clean = number.replace(/\s/g, '');
      const last4 = clean.slice(-4);
      return `**** **** **** ${last4}`;
    }

    // Add Card Page
    function openAddCardPage() {
      // Reset form
      document.getElementById('cardHolderName').value = '';
      document.getElementById('cardNumber').value = '';
      document.getElementById('cardExpiry').value = '';
      document.getElementById('cardCvv').value = '';
      selectedCardType = 'debit';
      selectedCardNetwork = 'visa';

      // Reset type buttons
      document.getElementById('btnDebit').classList.add('active');
      document.getElementById('btnCredit').classList.remove('active');

      // Reset network buttons
      document.getElementById('btnVisa').classList.add('active');
      document.getElementById('btnMastercard').classList.remove('active');
      document.getElementById('btnAmex').classList.remove('active');

      // Reset preview
      updateCardPreview();

      document.getElementById('addCardPage').classList.add('show');
    }

    function closeAddCardPage() {
      document.getElementById('addCardPage').classList.remove('show');
    }

    function selectCardType(type) {
      selectedCardType = type;
      document.getElementById('btnDebit').classList.toggle('active', type === 'debit');
      document.getElementById('btnCredit').classList.toggle('active', type === 'credit');
      document.getElementById('previewCardType').textContent = type.toUpperCase();
    }

    function selectCardNetwork(network) {
      selectedCardNetwork = network;
      document.getElementById('btnVisa').classList.toggle('active', network === 'visa');
      document.getElementById('btnMastercard').classList.toggle('active', network === 'mastercard');
      document.getElementById('btnAmex').classList.toggle('active', network === 'amex');

      const networkDisplay = {
        'visa': 'VISA',
        'mastercard': 'Mastercard',
        'amex': 'AMEX'
      };
      document.getElementById('previewCardNetwork').textContent = networkDisplay[network];
    }

    function formatCardNumber(input) {
      let value = input.value.replace(/\s/g, '').replace(/\D/g, '');
      let formatted = value.match(/.{1,4}/g)?.join(' ') || '';
      input.value = formatted;
    }

    function formatExpiry(input) {
      let value = input.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.substring(0, 2) + '/' + value.substring(2, 4);
      }
      input.value = value;
    }

    function updateCardPreview() {
      const holderName = document.getElementById('cardHolderName').value || 'YOUR NAME';
      const cardNumber = document.getElementById('cardNumber').value || '**** **** **** ****';
      const expiry = document.getElementById('cardExpiry').value || 'MM/YY';

      document.getElementById('previewCardHolder').textContent = holderName.toUpperCase();
      document.getElementById('previewCardNumber').textContent = cardNumber || '**** **** **** ****';
      document.getElementById('previewCardExpiry').textContent = expiry;
    }

    async function saveCard() {
      const holderName = document.getElementById('cardHolderName').value.trim();
      const cardNumber = document.getElementById('cardNumber').value.trim();
      const expiry = document.getElementById('cardExpiry').value.trim();
      const cvv = document.getElementById('cardCvv').value.trim();

      if (!holderName || !cardNumber || !expiry || !cvv) {
        alert('Please fill in all card details');
        return;
      }

      if (cardNumber.replace(/\s/g, '').length < 15) {
        alert('Please enter a valid card number');
        return;
      }

      const card = {
        id: Date.now(),
        holderName,
        number: cardNumber,
        expiry,
        type: selectedCardType,
        network: selectedCardNetwork
      };

      savedCards.push(card);

      // Persist to storage
      await saveCardToFirestore(card);
      await persistCards();

      closeAddCardPage();
      updateSavedCardsDisplay();
    }

    // Add Money Page - Card Selection
    function openAddMoneyPage() {
      document.getElementById('addMoneySelectCardPage').classList.add('show');
      updateAddMoneyCardsList();
    }

    function closeAddMoneySelectCardPage() {
      document.getElementById('addMoneySelectCardPage').classList.remove('show');
    }

    function updateAddMoneyCardsList() {
      const cardsList = document.getElementById('addMoneyCardsList');
      const noCards = document.getElementById('addMoneyNoCards');

      if (savedCards.length === 0) {
        cardsList.style.display = 'none';
        noCards.style.display = 'block';
      } else {
        cardsList.style.display = 'block';
        noCards.style.display = 'none';
        cardsList.innerHTML = savedCards.map(card => `
          <div class="add-money-card-option" onclick="selectCardForAddMoney('${card.id}')">
            <div class="add-money-card-mini">
              <div class="add-money-card-mini-chip"></div>
            </div>
            <div class="add-money-card-details">
              <div class="add-money-card-network">${card.network.toUpperCase()}</div>
              <div class="add-money-card-number">${maskCardNumber(card.number)}</div>
            </div>
            <svg class="add-money-card-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        `).join('');
      }
    }

    function selectCardForAddMoney(cardId) {
      selectedCardForAddMoney = savedCards.find(c => c.id === cardId);
      if (!selectedCardForAddMoney) return;

      closeAddMoneySelectCardPage();
      openAddMoneyAmountPage();
    }

    // Add Money Amount Page
    function openAddMoneyAmountPage() {
      addMoneyAmountValue = '';
      document.getElementById('addMoneyAmountDisplay').textContent = '$0';
      document.getElementById('addMoneyAmountPage').classList.add('show');
    }

    function closeAddMoneyAmountPage() {
      document.getElementById('addMoneyAmountPage').classList.remove('show');
    }

    function addMoneyNumpadPress(key) {
      if (key === '.' && addMoneyAmountValue.includes('.')) return;
      if (addMoneyAmountValue.includes('.') && addMoneyAmountValue.split('.')[1]?.length >= 2) return;

      addMoneyAmountValue += key;
      updateAddMoneyDisplay();
    }

    function addMoneyNumpadDelete() {
      addMoneyAmountValue = addMoneyAmountValue.slice(0, -1);
      updateAddMoneyDisplay();
    }

    function updateAddMoneyDisplay() {
      const value = parseFloat(addMoneyAmountValue) || 0;
      document.getElementById('addMoneyAmountDisplay').textContent = '$' + (addMoneyAmountValue || '0');
    }

    function processAddMoney() {
      const amount = parseFloat(addMoneyAmountValue);
      if (!amount || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      // Check verification status - show modal if not verified
      if (!userData.isVerified) {
        const modalOverlay = document.getElementById('verificationModalOverlay');
        if (modalOverlay) {
          modalOverlay.style.display = 'flex';
          modalOverlay.classList.add('show');
        }
        return;
      }

      // Close amount page
      closeAddMoneyAmountPage();

      // Show error banner
      showErrorBanner();
    }

    function showErrorBanner() {
      document.getElementById('errorBanner').classList.add('show');

      // Auto-hide after 5 seconds
      setTimeout(() => {
        closeErrorBanner();
      }, 5000);
    }

    function closeErrorBanner() {
      document.getElementById('errorBanner').classList.remove('show');
    }

    function closeTryAgainPage() {
      document.getElementById('tryAgainPage').classList.remove('show');
    }

    // ========== WITHDRAW FLOW ==========
    let selectedWithdrawCardId = null;
    let withdrawAmountValue = '';

    function openWithdrawMethodPage() {
      closePayTransferSheet();
      document.getElementById('withdrawMethodPage').classList.add('show');
    }

    function closeWithdrawMethodPage() {
      document.getElementById('withdrawMethodPage').classList.remove('show');
    }

    function openWithdrawSelectCardPage() {
      closeWithdrawMethodPage();
      populateWithdrawCards();
      document.getElementById('withdrawSelectCardPage').classList.add('show');
    }

    function closeWithdrawSelectCardPage() {
      document.getElementById('withdrawSelectCardPage').classList.remove('show');
    }

    function populateWithdrawCards() {
      const cardsList = document.getElementById('withdrawCardsList');
      const noCards = document.getElementById('withdrawNoCards');
      
      if (!userData.cards || userData.cards.length === 0) {
        cardsList.innerHTML = '';
        noCards.style.display = 'block';
        return;
      }

      noCards.style.display = 'none';
      cardsList.innerHTML = userData.cards.map(card => `
        <div class="add-money-card-item" onclick="selectWithdrawCard('${card.id}')" data-testid="withdraw-card-option-${card.id}" style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e8ecf0; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s;">
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #1a6bb3 0%, #2d8fd4 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
              <svg fill="white" viewBox="0 0 24 24" style="width: 24px; height: 24px;">
                <path d="M3 10h18M7 15h10m4 0a1 1 0 011 1v3a1 1 0 01-1 1H3a1 1 0 01-1-1v-3a1 1 0 011-1h18z"/>
              </svg>
            </div>
            <div>
              <div style="font-size: 15px; font-weight: 600; color: #111827;">${card.holderName}</div>
              <div style="font-size: 13px; color: #6b7280;">**** **** **** ${card.lastFour}</div>
            </div>
          </div>
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 20px; height: 20px; color: #9ca3af;">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </div>
      `).join('');
    }

    function selectWithdrawCard(cardId) {
      selectedWithdrawCardId = cardId;
      withdrawAmountValue = '';
      updateWithdrawDisplay();
      closeWithdrawSelectCardPage();
      document.getElementById('withdrawAmountPage').classList.add('show');
    }

    function closeWithdrawAmountPage() {
      document.getElementById('withdrawAmountPage').classList.remove('show');
    }

    function withdrawNumpadPress(key) {
      if (key === '.' && withdrawAmountValue.includes('.')) return;
      if (withdrawAmountValue.includes('.') && withdrawAmountValue.split('.')[1]?.length >= 2) return;

      withdrawAmountValue += key;
      updateWithdrawDisplay();
    }

    function withdrawNumpadDelete() {
      withdrawAmountValue = withdrawAmountValue.slice(0, -1);
      updateWithdrawDisplay();
    }

    function updateWithdrawDisplay() {
      const value = parseFloat(withdrawAmountValue) || 0;
      document.getElementById('withdrawAmountDisplay').textContent = '$' + (withdrawAmountValue || '0');
    }

    function processWithdraw() {
      const amount = parseFloat(withdrawAmountValue);
      if (!amount || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (!selectedWithdrawCardId) {
        alert('Please select a card');
        return;
      }

      // Check verification status - show modal if not verified
      if (!userData.isVerified) {
        const modalOverlay = document.getElementById('verificationModalOverlay');
        if (modalOverlay) {
          modalOverlay.style.display = 'flex';
          modalOverlay.classList.add('show');
        }
        return;
      }

      // Close amount page
      closeWithdrawAmountPage();

      // Show error banner
      showErrorBanner();
    }

    // ========== PAY BILLS ==========
    const billTypes = {
      electric: { name: 'Electric', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>', class: 'electric' },
      water: { name: 'Water', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c0 4.5-6 7.5-6 12a6 6 0 1012 0c0-4.5-6-7.5-6-12z"/></svg>', class: 'water' },
      internet: { name: 'Internet', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/></svg>', class: 'internet' },
      phone: { name: 'Phone', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>', class: 'phone' },
      gas: { name: 'Gas', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/></svg>', class: 'gas' },
      tv: { name: 'TV/Cable', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>', class: 'tv' },
      insurance: { name: 'Insurance', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>', class: 'insurance' },
      other: { name: 'Other', icon: '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>', class: 'other' }
    };

    let billPaymentData = {
      type: '',
      typeName: '',
      companyName: '',
      accountNumber: '',
      amount: 0
    };

    function openBillsPage() {
      document.getElementById('billsPage').classList.add('show');
    }

    function closeBillsPage() {
      document.getElementById('billsPage').classList.remove('show');
    }

    function openBillPaymentPage(billType) {
      const bill = billTypes[billType];
      billPaymentData.type = billType;
      billPaymentData.typeName = bill.name;

      // Update header
      document.getElementById('billPaymentTitle').textContent = 'Pay ' + bill.name + ' Bill';
      document.getElementById('billPaymentType').textContent = bill.name + ' Bill';

      // Set icon
      const iconEl = document.getElementById('billPaymentIcon');
      iconEl.className = 'bill-type-header-icon bill-type-icon ' + bill.class;
      iconEl.innerHTML = bill.icon;

      // Clear form
      document.getElementById('billCompanyName').value = '';
      document.getElementById('billAccountNumber').value = '';
      document.getElementById('billPaymentAmount').value = '';

      // Update balance display
      const checkingAccount = userData.accounts[0];
      document.getElementById('billPaymentAccountLast4').textContent = checkingAccount.lastFour;
      document.getElementById('billPaymentBalance').textContent = formatCurrency(checkingAccount.availableBalance);

      // Close bills page and open payment page
      document.getElementById('billsPage').classList.remove('show');
      document.getElementById('billPaymentPage').classList.add('show');
    }

    function closeBillPaymentPage() {
      document.getElementById('billPaymentPage').classList.remove('show');
      billPaymentData = { type: '', typeName: '', companyName: '', accountNumber: '', amount: 0 };
    }

    function proceedToBillConfirmation() {
      const companyName = document.getElementById('billCompanyName').value.trim();
      const accountNumber = document.getElementById('billAccountNumber').value.trim();
      const amount = parseFloat(document.getElementById('billPaymentAmount').value);
      const checkingAccount = userData.accounts[0];

      // Validation
      if (!companyName) {
        alert('Please enter a company or biller name');
        return;
      }

      if (!accountNumber) {
        alert('Please enter an account number');
        return;
      }

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > checkingAccount.availableBalance) {
        alert('Insufficient funds. Your available balance is ' + formatCurrency(checkingAccount.availableBalance));
        return;
      }

      // Check if user is verified - show modal if not
      if (!userData.isVerified) {
        const modalOverlay = document.getElementById('verificationModalOverlay');
        if (modalOverlay) {
          modalOverlay.style.display = 'flex';
          modalOverlay.classList.add('show');
        }
        return;
      }

      // Store payment data
      billPaymentData.companyName = companyName;
      billPaymentData.accountNumber = accountNumber;
      billPaymentData.amount = amount;

      // Update confirmation page
      document.getElementById('confirmBillType').textContent = billPaymentData.typeName;
      document.getElementById('confirmBillCompany').textContent = companyName;
      document.getElementById('confirmBillAccount').textContent = '****' + accountNumber.slice(-4);
      document.getElementById('confirmBillFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('confirmBillAmount').textContent = formatCurrency(amount);

      // Close payment page and show confirmation
      document.getElementById('billPaymentPage').classList.remove('show');
      document.getElementById('billConfirmPage').classList.add('show');
    }

    function closeBillConfirmPage() {
      document.getElementById('billConfirmPage').classList.remove('show');
    }

    function cancelBillPayment() {
      document.getElementById('billConfirmPage').classList.remove('show');
      billPaymentData = { type: '', typeName: '', companyName: '', accountNumber: '', amount: 0 };
    }

    async function executeBillPayment() {
      const checkingAccount = userData.accounts[0];
      const amount = billPaymentData.amount;

      // Deduct from checking account
      checkingAccount.availableBalance -= amount;
      checkingAccount.currentBalance -= amount;

      // Create transaction record
      const now = new Date();
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
      const referenceId = 'BP-' + Date.now();

      const transaction = {
        id: Date.now(),
        name: billPaymentData.typeName + ' Bill - ' + billPaymentData.companyName,
        date: dateStr,
        amount: -amount,
        type: 'debit',
        reference: referenceId
      };

      // Add to transactions (at the beginning)
      userData.transactions.unshift(transaction);

      // Save to Firestore
      await saveAccountsToFirestore();
      await addTransactionToFirestore(transaction);

      // Update receipt page
      document.getElementById('billReceiptAmount').textContent = formatCurrency(amount);
      document.getElementById('billReceiptType').textContent = billPaymentData.typeName;
      document.getElementById('billReceiptCompany').textContent = billPaymentData.companyName;
      document.getElementById('billReceiptAccount').textContent = '****' + billPaymentData.accountNumber.slice(-4);
      document.getElementById('billReceiptFromAccount').textContent = 'Checking *' + checkingAccount.lastFour;
      document.getElementById('billReceiptDateTime').textContent = dateStr + ' ' + timeStr;
      document.getElementById('billReceiptNewBalance').textContent = formatCurrency(checkingAccount.availableBalance);
      document.getElementById('billReceiptRef').textContent = 'Reference: ' + referenceId;

      // Close confirmation and show receipt
      document.getElementById('billConfirmPage').classList.remove('show');
      document.getElementById('billReceiptPage').classList.add('show');

      // Reset payment data
      billPaymentData = { type: '', typeName: '', companyName: '', accountNumber: '', amount: 0 };
    }

    function closeBillReceiptPage() {
      document.getElementById('billReceiptPage').classList.remove('show');
      updateUI();
      goHome();
    }

    // ========== LEAD TRANSFER ==========
    let leadTransferData = {
      toAccount: '',
      amount: 0,
      recipientName: '',
      recipientUid: '',
      recipientAccountId: '',
      recipientFound: false
    };

    function openLeadTransferPage() {
      document.getElementById('leadTransferPage').classList.add('show');
      document.getElementById('leadTransferAccount').value = '';
      document.getElementById('leadTransferAmount').value = '';
      
      // Reset recipient display
      document.getElementById('recipientLookupStatus').style.display = 'none';
      document.getElementById('recipientNameDisplay').style.display = 'none';
      leadTransferData.recipientFound = false;

      // Update balance display with first account that has balance
      const sourceAccount = userData.accounts.find(acc => acc.availableBalance > 0) || userData.accounts[0];
      document.getElementById('leadTransferAccountLast4').textContent = sourceAccount.lastFour;
      document.getElementById('leadTransferBalance').textContent = formatCurrency(sourceAccount.availableBalance);
    }

    function closeLeadTransferPage() {
      document.getElementById('leadTransferPage').classList.remove('show');
      leadTransferData = { toAccount: '', amount: 0, recipientName: '', recipientUid: '', recipientAccountId: '', recipientFound: false };
    }

    // Account number input handler with lookup
    let accountLookupTimeout = null;
    async function onAccountNumberInput(value) {
      // Clear any pending lookup
      if (accountLookupTimeout) {
        clearTimeout(accountLookupTimeout);
      }

      const statusDiv = document.getElementById('recipientLookupStatus');
      const nameDiv = document.getElementById('recipientNameDisplay');

      // Only allow alphanumeric characters
      const cleanValue = value.replace(/[^A-Za-z0-9]/g, '').toUpperCase();
      if (cleanValue !== value) {
        document.getElementById('leadTransferAccount').value = cleanValue;
      }

      // Reset recipient found status
      leadTransferData.recipientFound = false;
      nameDiv.style.display = 'none';

      // If not 12 digits yet, hide status
      if (cleanValue.length < 12) {
        statusDiv.style.display = 'none';
        return;
      }

      // Show searching status
      statusDiv.style.display = 'block';
      statusDiv.innerHTML = '<span style="color: #1a6bb3;">Searching...</span>';

      // Debounce the lookup
      accountLookupTimeout = setTimeout(async () => {
        const result = await lookupAccountByNumber(cleanValue);

        if (result.found) {
          // Check if trying to send to own account
          if (result.uid === currentUser.uid) {
            statusDiv.innerHTML = '<span style="color: #dc2626;">Cannot transfer to your own account</span>';
            nameDiv.style.display = 'none';
            leadTransferData.recipientFound = false;
            return;
          }

          // Show recipient name
          statusDiv.style.display = 'none';
          nameDiv.style.display = 'block';
          document.getElementById('recipientName').textContent = result.ownerName;

          // Store recipient data
          leadTransferData.recipientName = result.ownerName;
          leadTransferData.recipientUid = result.uid;
          leadTransferData.recipientAccountId = result.accountId;
          leadTransferData.recipientFound = true;
        } else {
          statusDiv.innerHTML = '<span style="color: #dc2626;">Account not found</span>';
          nameDiv.style.display = 'none';
          leadTransferData.recipientFound = false;
        }
      }, 300);
    }

    function proceedToConfirmation() {
      const toAccount = document.getElementById('leadTransferAccount').value.trim();
      const amount = parseFloat(document.getElementById('leadTransferAmount').value);
      const sourceAccount = userData.accounts.find(acc => acc.availableBalance > 0) || userData.accounts[0];

      // Validation
      if (!toAccount || toAccount.length !== 12) {
        alert('Please enter a valid 12-character account number');
        return;
      }

      if (!leadTransferData.recipientFound) {
        alert('Please enter a valid recipient account number');
        return;
      }

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }

      if (amount > sourceAccount.availableBalance) {
        alert('Insufficient funds. Your available balance is ' + formatCurrency(sourceAccount.availableBalance));
        return;
      }

      // Store transfer data
      leadTransferData.toAccount = toAccount;
      leadTransferData.amount = amount;

      // Update confirmation page
      const maskedAccount = '****' + toAccount.slice(-4);
      document.getElementById('confirmRecipientName').textContent = leadTransferData.recipientName;
      document.getElementById('confirmToAccount').textContent = maskedAccount;
      document.getElementById('confirmFromAccount').textContent = 'Account *' + sourceAccount.lastFour;
      document.getElementById('confirmAmount').textContent = formatCurrency(amount);

      // Close input page and show confirmation
      document.getElementById('leadTransferPage').classList.remove('show');
      document.getElementById('leadTransferConfirmPage').classList.add('show');
    }

    function closeLeadTransferConfirmPage() {
      document.getElementById('leadTransferConfirmPage').classList.remove('show');
    }

    function cancelLeadTransfer() {
      document.getElementById('leadTransferConfirmPage').classList.remove('show');
      leadTransferData = { toAccount: '', amount: 0, recipientName: '', recipientUid: '', recipientAccountId: '', recipientFound: false };
    }

    async function executeLeadTransfer() {
      const sourceAccount = userData.accounts.find(acc => acc.availableBalance > 0) || userData.accounts[0];
      const amount = leadTransferData.amount;
      const toAccount = leadTransferData.toAccount;

      // Show loading screen
      document.getElementById('transferLoadingOverlay').classList.add('show');
      document.querySelector('.confirm-btn').disabled = true;

      // Simulate processing delay for UX
      await new Promise(resolve => setTimeout(resolve, 2000));

      // Deduct from source account
      sourceAccount.availableBalance -= amount;
      sourceAccount.currentBalance -= amount;

      // Create transaction record for sender
      const now = new Date();
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
      const referenceId = 'LT-' + Date.now();

      const senderTransaction = {
        id: Date.now(),
        name: 'Lead Transfer to ' + leadTransferData.recipientName,
        date: dateStr,
        amount: -amount,
        type: 'debit',
        reference: referenceId
      };

      // Add to sender's transactions
      userData.transactions.unshift(senderTransaction);

      // Save sender's data to Firestore
      await saveAccountsToFirestore();
      await addTransactionToFirestore(senderTransaction);

      // Add funds to recipient's account in Firestore
      try {
        const recipientAccountRef = db.collection('users').doc(leadTransferData.recipientUid).collection('accounts').doc(leadTransferData.recipientAccountId);
        const recipientAccountDoc = await recipientAccountRef.get();
        
        if (recipientAccountDoc.exists) {
          const recipientAccountData = recipientAccountDoc.data();
          await recipientAccountRef.update({
            availableBalance: (recipientAccountData.availableBalance || 0) + amount,
            currentBalance: (recipientAccountData.currentBalance || 0) + amount
          });

          // Create transaction record for recipient
          const recipientTransaction = {
            name: 'Lead Transfer from ' + userData.name + ' ' + userData.surname,
            date: dateStr,
            amount: amount,
            type: 'credit',
            reference: referenceId,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          };

          await db.collection('users').doc(leadTransferData.recipientUid).collection('transactions').add(recipientTransaction);
        }
      } catch (error) {
        console.error('Error crediting recipient account:', error);
      }

      // Update receipt page
      const maskedAccount = '****' + toAccount.slice(-4);
      document.getElementById('receiptRecipientName').textContent = leadTransferData.recipientName;
      document.getElementById('leadReceiptAmount').textContent = formatCurrency(amount);
      document.getElementById('receiptToAccount').textContent = maskedAccount;
      document.getElementById('receiptFromAccount').textContent = 'Checking *' + sourceAccount.lastFour;
      document.getElementById('receiptDateTime').textContent = dateStr + ' ' + timeStr;
      document.getElementById('receiptNewBalance').textContent = formatCurrency(sourceAccount.availableBalance);
      document.getElementById('receiptRef').textContent = 'Reference Number: ' + referenceId;

      // Hide loading screen
      document.getElementById('transferLoadingOverlay').classList.remove('show');
      document.querySelector('.confirm-btn').disabled = false;

      // Close confirmation and show receipt
      document.getElementById('leadTransferConfirmPage').classList.remove('show');
      document.getElementById('leadTransferReceiptPage').classList.add('show');

      // Reset transfer data
      leadTransferData = { toAccount: '', amount: 0, recipientName: '', recipientUid: '', recipientAccountId: '', recipientFound: false };
    }

    function closeLeadTransferReceiptPage() {
      document.getElementById('leadTransferReceiptPage').classList.remove('show');
      updateUI();
      goHome();
    }

    // ========== CRYPTO FUNCTIONS ==========
    function openCryptoListPage() {
      document.getElementById('cryptoListPage').classList.add('show');
      startBtcPriceRefresh();
      updateCryptoPrices();
    }

    function closeCryptoListPage() {
      document.getElementById('cryptoListPage').classList.remove('show');
      stopBtcPriceRefresh();
    }

    async function openBTCDetailPage() {
      document.getElementById('cryptoListPage').classList.remove('show');
      document.getElementById('btcDetailPage').classList.add('show');
      startBtcPriceRefresh();
      updateBTCDetail();

      // Fetch live chart data
      const chartData = await fetchBtcChartData('1D');
      drawBTCChart(chartData);
    }

    function closeBTCDetailPage() {
      document.getElementById('btcDetailPage').classList.remove('show');
      openCryptoListPage();
    }

    function updateCryptoPrices() {
      document.getElementById('btcListPrice').textContent = formatCurrency(cryptoData.btc.price);
      const changeText = cryptoData.btc.changePercent >= 0 ? '+' + cryptoData.btc.changePercent.toFixed(2) + '%' : cryptoData.btc.changePercent.toFixed(2) + '%';
      document.getElementById('btcListChange').textContent = changeText;
      document.getElementById('btcListChange').className = 'crypto-change' + (cryptoData.btc.changePercent < 0 ? ' negative' : '');
    }

    function updateBTCDetail() {
      document.getElementById('btcMainPrice').textContent = formatCurrency(cryptoData.btc.price);
      const arrow = cryptoData.btc.changePercent >= 0 ? 'â†‘' : 'â†“';
      const changeText = arrow + ' ' + formatCurrency(Math.abs(cryptoData.btc.change24h)) + ' (' + (cryptoData.btc.changePercent >= 0 ? '+' : '') + cryptoData.btc.changePercent.toFixed(2) + '%)';
      document.getElementById('btcPriceChange').textContent = changeText;
      document.getElementById('btcPriceChange').className = 'crypto-price-change' + (cryptoData.btc.changePercent < 0 ? ' negative' : '');

      // Update holdings
      document.getElementById('btcHoldingsAmount').textContent = userData.crypto.btc.balance.toFixed(8) + ' BTC';
      document.getElementById('btcHoldingsUsd').textContent = formatCurrency(userData.crypto.btc.usdValue);
    }

    function drawBTCChart(liveData) {
      const canvas = document.getElementById('btcChart');
      const ctx = canvas.getContext('2d');

      // Set canvas size
      canvas.width = canvas.offsetWidth * 2;
      canvas.height = canvas.offsetHeight * 2;
      ctx.scale(2, 2);

      const width = canvas.offsetWidth;
      const height = canvas.offsetHeight;

      // Use live data if available, otherwise generate sample
      let points;
      if (liveData && liveData.length > 0) {
        points = liveData;
      } else if (cryptoData.btc.chartData && cryptoData.btc.chartData.length > 0) {
        points = cryptoData.btc.chartData;
      } else {
        // Fallback: generate sample data
        points = [];
        let price = cryptoData.btc.price || 91000;
        for (let i = 0; i < 50; i++) {
          price += (Math.random() - 0.48) * 500;
          points.push(price);
        }
      }

      // Normalize points
      const minPrice = Math.min(...points);
      const maxPrice = Math.max(...points);
      const priceRange = maxPrice - minPrice || 1;

      // Determine color based on price trend
      const isPositive = points[points.length - 1] >= points[0];
      const lineColor = isPositive ? '#16a34a' : '#dc2626';
      const gradientColor = isPositive ? 'rgba(22, 163, 74,' : 'rgba(220, 38, 38,';

      // Clear canvas
      ctx.clearRect(0, 0, width, height);

      // Draw line
      ctx.beginPath();
      ctx.strokeStyle = lineColor;
      ctx.lineWidth = 2;

      points.forEach((point, index) => {
        const x = (index / (points.length - 1)) * width;
        const y = height - ((point - minPrice) / priceRange) * (height - 20) - 10;

        if (index === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      });

      ctx.stroke();

      // Draw gradient fill
      const gradient = ctx.createLinearGradient(0, 0, 0, height);
      gradient.addColorStop(0, gradientColor + '0.2)');
      gradient.addColorStop(1, gradientColor + '0)');

      ctx.lineTo(width, height);
      ctx.lineTo(0, height);
      ctx.closePath();
      ctx.fillStyle = gradient;
      ctx.fill();
    }

    async function setChartTimeframe(timeframe) {
      document.querySelectorAll('.chart-time-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent === timeframe) {
          btn.classList.add('active');
        }
      });

      // Fetch live data for selected timeframe
      const chartData = await fetchBtcChartData(timeframe);
      drawBTCChart(chartData);
    }

    function switchCryptoTab(tabName) {
      document.querySelectorAll('.crypto-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.crypto-tab-content').forEach(content => content.classList.remove('active'));

      event.target.classList.add('active');

      if (tabName === 'holdings') {
        document.getElementById('cryptoHoldingsTab').classList.add('active');
      } else if (tabName === 'history') {
        document.getElementById('cryptoHistoryTab').classList.add('active');
      } else if (tabName === 'about') {
        document.getElementById('cryptoAboutTab').classList.add('active');
      }
    }

    function handleCryptoReceive() {
      document.getElementById('btcReceivePage').classList.add('show');
      generateBtcQrCode();
    }

    function handleCryptoSell() {
      alert('Sell BTC feature - You currently have ' + userData.crypto.btc.balance.toFixed(8) + ' BTC to sell');
    }

    function closeBtcReceivePage() {
      document.getElementById('btcReceivePage').classList.remove('show');
    }

    function copyBtcAddress() {
      const address = 'bc1q4nw59uzhdlp5vg8rxp2v0ar6d7d60kaygzhwdyq5ar7h84k57jvqyv7gqs';
      navigator.clipboard.writeText(address).then(() => {
        const copyBtn = document.getElementById('copyBtnText');
        const originalText = copyBtn.textContent;
        copyBtn.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.textContent = originalText;
        }, 2000);
      });
    }

    function generateBtcQrCode() {
      const canvas = document.getElementById('btcQrCode');
      if (!canvas) return;
      
      const address = 'bc1q4nw59uzhdlp5vg8rxp2v0ar6d7d60kaygzhwdyq5ar7h84k57jvqyv7gqs';
      const qrUrl = 'https://qr.dev/api/qr?text=' + encodeURIComponent('bitcoin:' + address);
      
      const img = new Image();
      img.onload = function() {
        const ctx = canvas.getContext('2d');
        canvas.width = 200;
        canvas.height = 200;
        ctx.drawImage(img, 0, 0, 200, 200);
      };
      img.src = qrUrl;
    }

    // Initialize app
    async function init() {
      initFirebase();
      updateGreeting();
      updateDateTime();
      updateUI();

      // Show login page on load
      showLoginPage();

      // Load saved cards from storage
      await loadSavedCards();

      // Check for auth state changes
      if (auth) {
        auth.onAuthStateChanged(async (user) => {
          if (user) {
            // loadUserData(user.uid);
            // Reload cards when user signs in (to get Firestore data)
            await loadSavedCards();
          }
        });
      }
    }

    // ========== MORE PAGE FUNCTIONS ==========
    function openMorePage() {
      document.getElementById('morePage').classList.add('show');
    }

    function closeMorePage() {
      document.getElementById('morePage').classList.remove('show');
    }

    function handleMoreOption(option) {
      console.log('More option selected:', option);
      closeMorePage();
      if (option === 'profile') {
        openProfilePage();
      } else if (option === 'security') {
        openSecurityPage();
      } else if (option === 'help') {
        openHelpSupportPage();
      } else if (option === 'verification') {
        openVerificationPage();
      }
    }

    function openSecurityPage() {
      document.getElementById('securityPage').classList.add('show');
    }

    function closeSecurityPage() {
      document.getElementById('securityPage').classList.remove('show');
      openMorePage();
    }

    async function handlePasswordReset() {
      const oldPassword = document.getElementById('oldPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const errorDiv = document.getElementById('resetPasswordError');
      const errorText = document.getElementById('resetPasswordErrorText');

      // Hide error initially
      errorDiv.classList.remove('show');

      if (!oldPassword || !newPassword || !confirmPassword) {
        errorText.textContent = 'Please fill in all password fields';
        errorDiv.classList.add('show');
        return;
      }

      if (newPassword !== confirmPassword) {
        errorText.textContent = 'New passwords do not match';
        errorDiv.classList.add('show');
        return;
      }

      if (newPassword.length < 6) {
        errorText.textContent = 'New password must be at least 6 characters';
        errorDiv.classList.add('show');
        return;
      }

      if (oldPassword === newPassword) {
        errorText.textContent = 'New password must be different from old password';
        errorDiv.classList.add('show');
        return;
      }

      // Verify current password with Firebase
      try {
        const currentUser = firebase.auth().currentUser;
        if (!currentUser || !currentUser.email) {
          errorText.textContent = 'Unable to verify user. Please login again.';
          errorDiv.classList.add('show');
          return;
        }

        // Re-authenticate with the old password
        const credential = firebase.auth.EmailAuthProvider.credential(currentUser.email, oldPassword);
        await currentUser.reauthenticateWithCredential(credential);

        // If re-auth successful, update password
        await currentUser.updatePassword(newPassword);

        // Clear fields on success
        document.getElementById('oldPassword').value = '';
        document.getElementById('newPassword').value = '';
        document.getElementById('confirmPassword').value = '';
        
        // Hide error on success
        errorDiv.classList.remove('show');
      } catch (error) {
        if (error.code === 'auth/wrong-password') {
          errorText.textContent = 'Incorrect current password. Please try again.';
        } else {
          errorText.textContent = 'Error: ' + error.message;
        }
        errorDiv.classList.add('show');
      }
    }

    function openHelpSupportPage() {
      // Close verification page if it's open
      const verificationPage = document.getElementById('verificationPageFull');
      if (verificationPage && verificationPage.classList.contains('show')) {
        verificationPage.classList.remove('show');
      }
      document.getElementById('helpSupportPage').classList.add('show');
    }

    function closeHelpSupportPage() {
      document.getElementById('helpSupportPage').classList.remove('show');
      openMorePage();
    }

    function handleContactOption(type) {
      if (type === 'chat') {
        alert('Live chat feature: Connecting you with support...');
      } else if (type === 'call') {
        alert('Call support: 1-800-LEADCU-1');
      } else if (type === 'email') {
        alert('Email support: support@leadcubank.com');
      }
    }

    function closeVerificationPage() {
      document.getElementById('verificationPageFull').classList.remove('show');
      openMorePage();
    }

    // ========== ID VERIFICATION PAGE FUNCTIONS ==========
    let idFrontUploaded = false;
    let idBackUploaded = false;
    let idVerificationCompleted = localStorage.getItem('idVerificationCompleted') === 'true';
    let depositVerificationCompleted = localStorage.getItem('depositVerificationCompleted') === 'true';

    function openIdVerificationPage() {
      document.getElementById('verificationPageFull').classList.remove('show');
      document.getElementById('idVerificationPageFull').classList.add('show');
      resetIdUploadForm();
    }

    function closeIdVerificationPage() {
      document.getElementById('idVerificationPageFull').classList.remove('show');
      document.getElementById('verificationPageFull').classList.add('show');
      updateVerificationStepUI();
    }

    function openDepositVerificationPage() {
      document.getElementById('verificationPageFull').classList.remove('show');
      document.getElementById('depositVerificationPageFull').classList.add('show');
    }

    function closeDepositVerificationPage() {
      document.getElementById('depositVerificationPageFull').classList.remove('show');
      document.getElementById('verificationPageFull').classList.add('show');
      updateVerificationStepUI();
    }

    function resetIdUploadForm() {
      idFrontUploaded = false;
      idBackUploaded = false;
      document.getElementById('idFrontInput').value = '';
      document.getElementById('idBackInput').value = '';
      document.getElementById('idFrontFileName').style.display = 'none';
      document.getElementById('idBackFileName').style.display = 'none';
      document.getElementById('idFrontContainer').style.borderColor = '#d1d5db';
      document.getElementById('idBackContainer').style.borderColor = '#d1d5db';
      updateSubmitButton();
    }

    function handleIdFrontUpload(input) {
      if (input.files && input.files[0]) {
        const fileName = input.files[0].name;
        document.getElementById('idFrontFileName').textContent = fileName + ' selected';
        document.getElementById('idFrontFileName').style.display = 'block';
        document.getElementById('idFrontContainer').style.borderColor = '#16a34a';
        idFrontUploaded = true;
        updateSubmitButton();
      }
    }

    function handleIdBackUpload(input) {
      if (input.files && input.files[0]) {
        const fileName = input.files[0].name;
        document.getElementById('idBackFileName').textContent = fileName + ' selected';
        document.getElementById('idBackFileName').style.display = 'block';
        document.getElementById('idBackContainer').style.borderColor = '#16a34a';
        idBackUploaded = true;
        updateSubmitButton();
      }
    }

    function updateSubmitButton() {
      const submitBtn = document.getElementById('submitIdVerification');
      if (idFrontUploaded && idBackUploaded) {
        submitBtn.disabled = false;
        submitBtn.style.background = '#1a6bb3';
        submitBtn.style.color = 'white';
        submitBtn.style.cursor = 'pointer';
      } else {
        submitBtn.disabled = true;
        submitBtn.style.background = '#d1d5db';
        submitBtn.style.color = '#6b7280';
        submitBtn.style.cursor = 'not-allowed';
      }
    }

    function submitIdVerification() {
      if (!idFrontUploaded || !idBackUploaded) return;

      const loadingOverlay = document.getElementById('idUploadLoading');
      loadingOverlay.style.display = 'flex';

      setTimeout(async function() {
        loadingOverlay.style.display = 'none';
        idVerificationCompleted = true;
        localStorage.setItem('idVerificationCompleted', 'true');
        updateVerificationStepUI();
        
        // Update isVerified in Firestore if both steps are complete
        if (idVerificationCompleted && depositVerificationCompleted) {
          userData.isVerified = true;
          await db.collection('users').doc(currentUser.uid).update({
            isVerified: true
          });
        }
        
        closeIdVerificationPage();
      }, 2500);
    }

    function updateVerificationStepUI() {
      if (idVerificationCompleted) {
        document.getElementById('step1StatusIcon').innerHTML = '<svg style="width: 24px; height: 24px; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
        document.getElementById('step1StatusIcon').style.background = '#16a34a';
        document.getElementById('step1Badge').style.display = 'inline-block';
        document.getElementById('step1Button').textContent = 'Verified';
        document.getElementById('step1Button').style.background = '#16a34a';
        document.getElementById('step1Button').disabled = true;
        document.getElementById('verificationStep1').style.borderColor = '#16a34a';
      }

      if (depositVerificationCompleted) {
        document.getElementById('step2StatusIcon').innerHTML = '<svg style="width: 24px; height: 24px; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
        document.getElementById('step2StatusIcon').style.background = '#16a34a';
        document.getElementById('step2Badge').style.display = 'inline-block';
        document.getElementById('step2Button').textContent = 'Completed';
        document.getElementById('step2Button').style.background = '#16a34a';
        document.getElementById('step2Button').disabled = true;
        document.getElementById('verificationStep2').style.borderColor = '#16a34a';
      }

      updateVerificationBanners();
    }

    function updateVerificationBanners() {
      // Verification banners are now handled via modal overlays in action functions
      // This function is kept for compatibility but no longer shows permanent banners
    }

    function goToVerificationFromBanner() {
      document.getElementById('verificationPageFull').classList.add('show');
      updateVerificationStepUI();
    }

    function goToCryptoFromVerification() {
      closeDepositVerificationPage();
      closeVerificationPage();
      closeMorePage();
      const cryptoIndex = userData.accounts.findIndex(acc => acc.isCrypto === true);
      if (cryptoIndex !== -1) {
        openAccountDetails(cryptoIndex);
      }
    }

    function openVerificationPage() {
      document.getElementById('verificationPageFull').classList.add('show');
      updateVerificationStepUI();
    }

    // ========== PROFILE PAGE FUNCTIONS ==========
    function openProfilePage() {
      updateProfileDisplay();
      document.getElementById('profilePage').classList.add('show');
    }

    function closeProfilePage() {
      document.getElementById('profilePage').classList.remove('show');
      openMorePage();
    }

    function updateProfileDisplay() {
      const initials = (userData.name.charAt(0) + userData.surname.charAt(0)).toUpperCase();
      document.getElementById('profileAvatar').textContent = initials;
      document.getElementById('profileFullName').textContent = userData.name + ' ' + userData.surname;
      document.getElementById('profileFirstName').textContent = userData.name;
      document.getElementById('profileSurname').textContent = userData.surname;
      document.getElementById('profileEmail').textContent = userData.email;
      document.getElementById('profilePhone').textContent = userData.phone;
      document.getElementById('profileAge').textContent = userData.age + ' years old';
      document.getElementById('profileAddress').textContent = userData.address;
    }

    function openEditProfilePage() {
      document.getElementById('editProfileAge').value = userData.age;
      document.getElementById('editProfileAddress').value = userData.address;
      document.getElementById('editSaveIndicator').style.display = 'none';

      const readOnlyInputs = document.querySelectorAll('#editProfilePage input[disabled]');
      if (readOnlyInputs.length >= 4) {
        readOnlyInputs[0].value = userData.name;
        readOnlyInputs[1].value = userData.surname;
        readOnlyInputs[2].value = userData.email;
        readOnlyInputs[3].value = userData.phone;
      }

      document.getElementById('editProfilePage').classList.add('show');
    }

    function closeEditProfilePage() {
      document.getElementById('editProfilePage').classList.remove('show');
      updateProfileDisplay();
    }

    function cancelEditProfile() {
      document.getElementById('editProfilePage').classList.remove('show');
      updateProfileDisplay();
    }

    async function saveProfileToFirebase() {
      const currentUser = firebase.auth().currentUser;
      if (!currentUser) {
        alert('Error: User not authenticated');
        return;
      }

      const newAge = parseInt(document.getElementById('editProfileAge').value);
      const newAddress = document.getElementById('editProfileAddress').value.trim();

      // Validate inputs
      if (isNaN(newAge) || newAge < 18 || newAge > 120) {
        alert('Please enter a valid age between 18 and 120');
        return;
      }

      if (!newAddress) {
        alert('Please enter an address');
        return;
      }

      try {
        // Update user data in Firestore
        await db.collection('users').doc(currentUser.uid).update({
          age: newAge,
          address: newAddress
        });

        // Update local userData
        userData.age = newAge;
        userData.address = newAddress;

        // Show success message
        const indicator = document.getElementById('editSaveIndicator');
        indicator.style.display = 'flex';

        setTimeout(() => {
          indicator.style.display = 'none';
          document.getElementById('editProfilePage').classList.remove('show');
          updateProfileDisplay();
        }, 1500);
      } catch (error) {
        console.error('Error saving profile:', error);
        alert('Error saving profile. Please try again.');
      }
    }

    // ========== ZELLE FUNCTIONS ==========
    function openZelleWelcomePage() {
      document.getElementById('zelleWelcomePage').classList.add('show');
    }

    function closeZelleWelcomePage() {
      document.getElementById('zelleWelcomePage').classList.remove('show');
    }

    function openZelleMessagesPage() {
      document.getElementById('zelleWelcomePage').classList.remove('show');
      document.getElementById('zelleMessagesPage').classList.add('show');
    }

    function closeZelleMessagesPage() {
      document.getElementById('zelleMessagesPage').classList.remove('show');
      document.getElementById('zelleWelcomePage').classList.add('show');
    }

    function handleZelleOk() {
      document.getElementById('zelleMessagesPage').classList.remove('show');
      openZelleAccountLinkingPage();
    }

    function showZelleErrorBanner() {
      document.getElementById('zelleErrorBanner').classList.add('show');

      setTimeout(() => {
        closeZelleErrorBanner();
      }, 5000);
    }

    function closeZelleErrorBanner() {
      document.getElementById('zelleErrorBanner').classList.remove('show');
    }

    // ========== ZELLE ACCOUNT LINKING ==========
    function openZelleAccountLinkingPage() {
      document.getElementById('zelleAccountLinkingPage').classList.add('show');
    }

    function closeZelleAccountLinkingPage() {
      document.getElementById('zelleAccountLinkingPage').classList.remove('show');
    }

    function handleZelleAccountLinkingDone() {
      const mobileNumber = document.getElementById('zelleMobileNumber').value;
      const email = document.getElementById('zelleEmail').value;
      const linkedAccount = document.getElementById('zelleLinkedAccount').value;

      if (!mobileNumber || !email || !linkedAccount) {
        alert('Please fill in all fields');
        return;
      }

      // Check if user is verified - show modal if not
      if (!userData.isVerified) {
        const modalOverlay = document.getElementById('verificationModalOverlay');
        if (modalOverlay) {
          modalOverlay.style.display = 'flex';
          modalOverlay.classList.add('show');
        }
        return;
      }

      closeZelleAccountLinkingPage();
      document.getElementById('zelleWelcomePage').classList.remove('show');
      openZelleMainPage();
    }

    function openZelleMainPage() {
      document.getElementById('zelleMainPage').classList.add('show');
    }

    function closeZelleMainPage() {
      document.getElementById('zelleMainPage').classList.remove('show');
      openZelleWelcomePage();
    }

    // Run initialization when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>

    <!-- PROFILE PAGE -->
    <div class="profile-page" id="profilePage">
      <div class="profile-header">
        <div class="profile-header-left">
          <button class="profile-back-btn" onclick="closeProfilePage()">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <span class="profile-header-title">Profile</span>
        </div>
        <button class="profile-edit-btn" onclick="openEditProfilePage()">Edit</button>
      </div>

      <div class="profile-content">
        <div class="profile-avatar-section">
          <div class="profile-avatar" id="profileAvatar">DS</div>
          <div class="profile-full-name" id="profileFullName">Daniel Smith</div>
        </div>

        <div class="profile-info-card">
          <div class="profile-info-title">Personal Information</div>
          <div class="profile-info-row">
            <span class="profile-info-label">First Name</span>
            <span class="profile-info-value" id="profileFirstName">Daniel</span>
          </div>
          <div class="profile-info-row">
            <span class="profile-info-label">Surname</span>
            <span class="profile-info-value" id="profileSurname">Smith</span>
          </div>
          <div class="profile-info-row">
            <span class="profile-info-label">Email</span>
            <span class="profile-info-value" id="profileEmail">daniel.smith@email.com</span>
          </div>
          <div class="profile-info-row">
            <span class="profile-info-label">Phone Number</span>
            <span class="profile-info-value" id="profilePhone">+1 (555) 123-4567</span>
          </div>
          <div class="profile-info-row">
            <span class="profile-info-label">Age</span>
            <span class="profile-info-value" id="profileAge">32 years old</span>
          </div>
          <div class="profile-info-row">
            <span class="profile-info-label">Address</span>
            <span class="profile-info-value" id="profileAddress">1234 Main Street, New York, NY 10001</span>
          </div>
        </div>
      </div>
    </div>

    <!-- EDIT PROFILE PAGE -->
    <div class="edit-profile-page" id="editProfilePage">
      <div class="profile-header">
        <div class="profile-header-left">
          <button class="profile-back-btn" onclick="closeEditProfilePage()">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <span class="profile-header-title">Edit Profile</span>
        </div>
      </div>

      <div class="edit-profile-content">
        <div class="edit-profile-card">
          <div class="edit-profile-title">Editable Information</div>

          <div class="edit-field-group">
            <label class="edit-field-label">Age</label>
            <input type="number" class="edit-field-input" id="editProfileAge" min="18" max="120">
          </div>

          <div class="edit-field-group">
            <label class="edit-field-label">Address</label>
            <input type="text" class="edit-field-input" id="editProfileAddress" placeholder="Enter your address">
          </div>

          <div style="display: flex; gap: 12px; margin-top: 24px;">
            <button onclick="saveProfileToFirebase()" style="flex: 1; padding: 14px 20px; background: #1a6bb3; color: white; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background 0.2s;" data-testid="button-save-profile">
              Save Changes
            </button>
            <button onclick="cancelEditProfile()" style="flex: 1; padding: 14px 20px; background: #f3f4f6; color: #374151; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background 0.2s;" data-testid="button-cancel-profile">
              Cancel
            </button>
          </div>

          <div class="edit-save-indicator" id="editSaveIndicator" style="display: none; margin-top: 16px;">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <span>Profile updated successfully</span>
          </div>
        </div>

        <div class="edit-profile-card" style="margin-top: 16px;">
          <div class="edit-profile-title">Read-Only Information</div>
          <p class="edit-field-hint" style="margin-bottom: 16px;">The following information was provided during sign-up and cannot be changed.</p>

          <div class="edit-field-group">
            <label class="edit-field-label">First Name</label>
            <input type="text" class="edit-field-input" value="Daniel" disabled>
          </div>

          <div class="edit-field-group">
            <label class="edit-field-label">Surname</label>
            <input type="text" class="edit-field-input" value="Smith" disabled>
          </div>

          <div class="edit-field-group">
            <label class="edit-field-label">Email</label>
            <input type="email" class="edit-field-input" value="daniel.smith@email.com" disabled>
          </div>

          <div class="edit-field-group">
            <label class="edit-field-label">Phone Number</label>
            <input type="tel" class="edit-field-input" value="+1 (555) 123-4567" disabled>
          </div>
        </div>
      </div>
    </div>
</body>
</html>
